================================================================================
Template Upgrade v0.15.7 â€” Full Terraform Plan Output (Dev Environment)
Date: $(date)
Branch: template-upgrade-v0.15.7 (synced with main)
================================================================================


================================================================================
COMPONENT: api/service
================================================================================

data.terraform_remote_state.current_image_tag[0]: Reading...
module.app_config.data.external.account_ids_by_name: Reading...
module.service.data.external.whoami: Reading...
module.service.data.external.deploy_github_sha: Reading...
module.app_config.data.external.account_ids_by_name: Read complete after 0s [id=-]
module.service.data.external.whoami: Read complete after 0s [id=-]
module.service.data.external.deploy_github_sha: Read complete after 0s [id=-]
module.service.module.network.data.aws_subnets.public: Reading...
module.service.aws_cloudwatch_log_group.scheduled_jobs["build-automatic-opportunities"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-build-automatic-opportunities/scheduled-jobs/20251201191713387900000001]
module.service.aws_cloudwatch_log_group.scheduled_jobs["load-search-agency-data"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-load-search-agency-data/scheduled-jobs/20250416170337385100000002]
module.service.aws_cloudwatch_log_group.scheduled_jobs["sam-extracts"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-sam-extracts/scheduled-jobs/20250812181143713400000001]
module.service.aws_cloudwatch_log_group.scheduled_jobs["load-transform"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-load-transform/scheduled-jobs/20250314180555008500000001]
module.service.aws_cloudwatch_log_group.scheduled_jobs["load-search-opportunity-data"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-load-search-opportunity-data/scheduled-jobs/20250416170337384400000001]
module.service.aws_cloudwatch_log_group.scheduled_jobs["create-application-submission"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-create-application-submission/scheduled-jobs/20250902162620760700000001]
module.service.aws_cloudwatch_log_group.scheduled_jobs["email_notification_opportunity"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-email_notification_opportunity/scheduled-jobs/20250722211557316900000001]
module.service.aws_cloudwatch_log_group.scheduled_jobs["export-opportunity-data"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-export-opportunity-data/scheduled-jobs/20250314180555023800000003]
module.service.aws_cloudwatch_log_group.scheduled_jobs["create-analytics-db-csvs"]: Refreshing state... [id=/aws/vendedlogs/states/api-dev-create-analytics-db-csvs/scheduled-jobs/20250314180555013500000002]
data.aws_iam_policy.app_db_access_policy[0]: Reading...
module.service.aws_cloudwatch_log_group.WafWebAclLoggroup[0]: Refreshing state... [id=aws-waf-logs-wafv2-web-acl-api-dev]
module.service.data.aws_iam_policy_document.ecs_tasks_assume_role_policy: Reading...
module.service.data.aws_iam_policy_document.ecs_tasks_assume_role_policy: Read complete after 0s [id=4229150499]
module.service.data.aws_iam_policy_document.ecs_exec: Reading...
data.aws_iam_policy.migrator_db_access_policy[0]: Reading...
module.service.data.aws_iam_policy_document.ecs_exec: Read complete after 0s [id=1236260518]
module.service.aws_cloudfront_origin_access_control.cdn[0]: Refreshing state... [id=E2EJR515GGOGNA]
module.database[0].data.aws_iam_policy.migrator_db_access_policy: Reading...
module.service.module.network.data.aws_subnets.database: Reading...
module.notifications_email_domain[0].data.aws_caller_identity.current: Reading...
module.service.module.network.data.aws_subnets.public: Read complete after 1s [id=us-east-1]
data.aws_acm_certificate.cert[0]: Reading...
module.notifications_email_domain[0].data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
module.service.aws_cloudfront_origin_request_policy.forward_all_cookies[0]: Refreshing state... [id=0a8ca8c2-850d-4df8-a0e7-c812f062cbae]
module.service.aws_cloudfront_cache_policy.api_no_cache[0]: Refreshing state... [id=eb295aee-cbec-402d-9dca-ceb15292d648]
module.service.module.network.data.aws_subnets.database: Read complete after 0s [id=us-east-1]
module.service.data.aws_ssm_parameter.fluent_bit_commit: Reading...
data.terraform_remote_state.current_image_tag[0]: Read complete after 2s
module.service.aws_s3_bucket.general_purpose: Refreshing state... [id=api-dev-general-purpose20240416221336163000000001]
module.service.module.network.data.aws_vpc.network: Reading...
module.database[0].data.aws_rds_cluster.db_cluster: Reading...
module.service.aws_ecs_cluster.cluster: Refreshing state... [id=arn:aws:ecs:us-east-1:315341936575:cluster/api-dev]
module.service.data.aws_ssm_parameter.fluent_bit_commit: Read complete after 0s [id=/fluent-bit-commit]
module.domain.data.aws_acm_certificate.certificate[0]: Reading...
module.service.aws_wafv2_web_acl.waf[0]: Refreshing state... [id=a13139a8-fb10-4545-89fb-924417495223]
data.aws_acm_certificate.cert[0]: Read complete after 1s [id=arn:aws:acm:us-east-1:315341936575:certificate/401850f9-6515-4c19-ae89-1aeaab66edb2]
data.aws_iam_policy.opensearch_ingest[0]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["API_AUTH_TOKEN"]: Reading...
module.database[0].data.aws_rds_cluster.db_cluster: Read complete after 1s [id=api-dev]
module.secrets.data.aws_ssm_parameter.secrets["API_JWT_PRIVATE_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["API_AUTH_TOKEN"]: Read complete after 0s [id=/api/dev/api-auth-token]
module.service.data.aws_region.current: Reading...
module.service.data.aws_region.current: Read complete after 0s [id=us-east-1]
module.secrets.data.aws_ssm_parameter.secrets["DOCRAPTOR_API_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["API_JWT_PRIVATE_KEY"]: Read complete after 0s [id=/api/dev/api-jwt-private-key]
module.secrets.data.aws_ssm_parameter.secrets["DOMAIN_VERIFICATION_CONTENT"]: Reading...
module.domain.data.aws_acm_certificate.certificate[0]: Read complete after 1s [id=arn:aws:acm:us-east-1:315341936575:certificate/401850f9-6515-4c19-ae89-1aeaab66edb2]
module.secrets.data.aws_ssm_parameter.secrets["API_JWT_PUBLIC_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["DOCRAPTOR_API_KEY"]: Read complete after 0s [id=/api/dev/docraptor-api-key]
module.secrets.data.aws_ssm_parameter.secrets["FRONTEND_BASE_URL"]: Reading...
module.service.module.network.data.aws_vpc.network: Read complete after 1s [id=vpc-08f522c5cc442d126]
module.secrets.data.aws_ssm_parameter.secrets["LOGIN_FINAL_DESTINATION"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["DOMAIN_VERIFICATION_CONTENT"]: Read complete after 0s [id=/api/dev/domain-verification-content]
module.secrets.data.aws_ssm_parameter.secrets["LOGIN_GOV_CLIENT_ASSERTION_PRIVATE_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["API_JWT_PUBLIC_KEY"]: Read complete after 0s [id=/api/dev/api-jwt-public-key]
module.secrets.data.aws_ssm_parameter.secrets["NEW_RELIC_LICENSE_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FRONTEND_BASE_URL"]: Read complete after 0s [id=/api/dev/frontend-base-url]
module.secrets.data.aws_ssm_parameter.secrets["SAM_GOV_API_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["LOGIN_FINAL_DESTINATION"]: Read complete after 0s [id=/api/dev/frontend-login-redirect-url]
module.secrets.data.aws_ssm_parameter.secrets["SOAP_PRIVATE_KEYS"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["LOGIN_GOV_CLIENT_ASSERTION_PRIVATE_KEY"]: Read complete after 0s [id=/api/dev/login-gov-client-assertion-private-key]
module.secrets.data.aws_ssm_parameter.secrets["API_GATEWAY_DEFAULT_USAGE_PLAN_ID"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["SAM_GOV_API_KEY"]: Read complete after 0s [id=/api/dev/sam-gov-api-key]
module.service.aws_s3_bucket.access_logs: Refreshing state... [id=api-dev-access-logs20231023213552646900000003]
module.secrets.data.aws_ssm_parameter.secrets["NEW_RELIC_LICENSE_KEY"]: Read complete after 0s [id=/api/dev/new-relic-license-key]
module.service.module.network.data.aws_subnets.private: Reading...
module.secrets.data.aws_ssm_parameter.secrets["SOAP_PRIVATE_KEYS"]: Read complete after 0s [id=/api/dev/soap-private-keys]
module.service.aws_s3_bucket.cdn[0]: Refreshing state... [id=api-dev-cdn-access-logs20250116191905055600000002]
module.secrets.data.aws_ssm_parameter.secrets["API_GATEWAY_DEFAULT_USAGE_PLAN_ID"]: Read complete after 0s [id=/api/dev/api-gateway-default-usage-plan-id]
module.service.aws_cloudwatch_log_group.api_gateway_logs[0]: Refreshing state... [id=service/api-dev-api-gateway/v1-stage]
module.service.module.network.data.aws_subnets.private: Read complete after 0s [id=us-east-1]
module.notifications[0].aws_pinpoint_app.app: Refreshing state... [id=26dadc33716449bc8c153ca6ba5a06ed]
module.service.aws_cloudwatch_log_group.service_logs: Refreshing state... [id=service/api-dev]
data.aws_acm_certificate.s3_cdn_cert[0]: Reading...
data.aws_acm_certificate.mtls_cert[0]: Reading...
module.service.aws_s3_bucket.s3_buckets["draft-files"]: Refreshing state... [id=api-dev-draft-files-20241217170228581000000003]
data.aws_acm_certificate.s3_cdn_cert[0]: Read complete after 0s [id=arn:aws:acm:us-east-1:315341936575:certificate/5adbc246-e87b-4ee4-ab1e-f5b94ccb862d]
module.service.aws_s3_bucket.s3_buckets["public-files"]: Refreshing state... [id=api-dev-public-files-20241217170228558900000002]
data.aws_acm_certificate.mtls_cert[0]: Read complete after 0s [id=arn:aws:acm:us-east-1:315341936575:certificate/9f45ae8d-99d8-42ad-820b-eb9a83f6c5e9]
module.service.aws_s3_bucket.s3_buckets["api-analytics-transfer"]: Refreshing state... [id=api-dev-api-analytics-transfer-20241217170228558900000001]
module.database[0].data.aws_iam_policy.migrator_db_access_policy: Read complete after 2s [id=arn:aws:iam::315341936575:policy/api-dev-migrator-access]
module.notifications_email_domain[0].aws_sesv2_configuration_set.email: Refreshing state... [id=dev-simpler-grants-gov]
data.aws_iam_policy.app_db_access_policy[0]: Read complete after 2s [id=arn:aws:iam::315341936575:policy/api-dev-app-access]
module.service.data.aws_iam_policy_document.scheduler_assume_role: Reading...
module.service.data.aws_iam_policy_document.scheduler_assume_role: Read complete after 0s [id=52247394]
module.service.data.aws_caller_identity.current: Reading...
data.aws_iam_policy.migrator_db_access_policy[0]: Read complete after 2s [id=arn:aws:iam::315341936575:policy/api-dev-migrator-access]
module.notifications_email_domain[0].data.aws_region.current: Reading...
module.notifications_email_domain[0].data.aws_region.current: Read complete after 0s [id=us-east-1]
module.database[0].data.aws_iam_policy.app_db_access_policy: Reading...
module.service.data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
data.aws_acm_certificate.secondary_certs["alb.dev.simpler.grants.gov"]: Reading...
data.aws_vpc.network: Reading...
data.aws_ssm_parameter.search_endpoint_arn[0]: Reading...
data.aws_acm_certificate.secondary_certs["alb.dev.simpler.grants.gov"]: Read complete after 1s [id=arn:aws:acm:us-east-1:315341936575:certificate/87f1b277-3118-414a-8971-388a44e07393]
module.domain.data.aws_route53_zone.zone[0]: Reading...
data.aws_ssm_parameter.search_endpoint_arn[0]: Read complete after 0s [id=/search/api-dev/endpoint]
data.aws_rds_cluster.db_cluster[0]: Reading...
data.aws_iam_policy.opensearch_query[0]: Reading...
module.service.aws_api_gateway_rest_api.api[0]: Refreshing state... [id=wxuxv45ooj]
data.aws_iam_policy.opensearch_ingest[0]: Read complete after 2s [id=arn:aws:iam::315341936575:policy/api-dev-opensearch-ingest]
module.service.data.aws_iam_policy_document.events_assume_role: Reading...
module.service.data.aws_iam_policy_document.events_assume_role: Read complete after 0s [id=3959961479]
module.service.aws_api_gateway_api_key.frontend_api_access[0]: Refreshing state... [id=tqifu17hud]
data.aws_rds_cluster.db_cluster[0]: Read complete after 0s [id=api-dev]
module.service.aws_cloudfront_cache_policy.default[0]: Refreshing state... [id=7429d37c-43fe-4ef3-8777-ad2025195294]
data.aws_vpc.network: Read complete after 0s [id=vpc-08f522c5cc442d126]
module.service.aws_iam_role.task_executor: Refreshing state... [id=api-dev-task-executor]
module.service.aws_iam_role.app_service: Refreshing state... [id=api-dev-app]
module.service.aws_iam_policy.ecs_exec: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-ecs-exec]
module.domain.data.aws_route53_zone.zone[0]: Read complete after 1s [id=Z04517193GDPF9DWUX2WT]
module.service.data.aws_iam_policy_document.api_gateway_access[0]: Reading...
module.service.data.aws_iam_policy_document.api_gateway_access[0]: Read complete after 0s [id=663413826]
module.service.module.network.data.aws_security_groups.aws_services: Reading...
module.service.aws_cloudwatch_log_group.fluentbit: Refreshing state... [id=service/api-dev-fluentbit]
module.service.aws_s3_bucket_server_side_encryption_configuration.general_purpose_encryption: Refreshing state... [id=api-dev-general-purpose20240416221336163000000001]
module.service.aws_s3_bucket_lifecycle_configuration.general_purpose: Refreshing state... [id=api-dev-general-purpose20240416221336163000000001]
module.service.aws_s3_bucket_public_access_block.general_purpose: Refreshing state... [id=api-dev-general-purpose20240416221336163000000001]
module.service.aws_iam_role.scheduler: Refreshing state... [id=api-dev-scheduler]
module.service.module.network.data.aws_security_groups.aws_services: Read complete after 0s [id=us-east-1]
module.service.data.aws_iam_policy_document.workflow_orchestrator_assume_role: Reading...
module.service.data.aws_iam_policy_document.workflow_orchestrator_assume_role: Read complete after 0s [id=3468042870]
module.service.data.aws_iam_policy_document.runtime_logs: Reading...
module.service.data.aws_iam_policy_document.runtime_logs: Read complete after 0s [id=1037264550]
module.notifications_email_domain[0].aws_ses_event_destination.logs: Refreshing state... [id=dev-simpler-grants-gov-email-identity-logs]
module.notifications_email_domain[0].aws_sesv2_email_identity.sender_domain: Refreshing state... [id=dev.simpler.grants.gov]
module.service.aws_s3_bucket_lifecycle_configuration.access_logs: Refreshing state... [id=api-dev-access-logs20231023213552646900000003]
module.service.aws_s3_bucket_public_access_block.access_logs: Refreshing state... [id=api-dev-access-logs20231023213552646900000003]
module.service.data.aws_iam_policy_document.access_logs_put_access: Reading...
module.service.data.aws_iam_policy_document.access_logs_put_access: Read complete after 0s [id=2049148182]
module.service.aws_s3_bucket_server_side_encryption_configuration.encryption: Refreshing state... [id=api-dev-access-logs20231023213552646900000003]
module.service.aws_s3_bucket_public_access_block.cdn[0]: Refreshing state... [id=api-dev-cdn-access-logs20250116191905055600000002]
module.service.aws_s3_bucket_ownership_controls.cdn[0]: Refreshing state... [id=api-dev-cdn-access-logs20250116191905055600000002]
module.service.aws_s3_bucket_lifecycle_configuration.cdn[0]: Refreshing state... [id=api-dev-cdn-access-logs20250116191905055600000002]
module.service.aws_wafv2_web_acl_logging_configuration.WafWebAclLogging[0]: Refreshing state... [id=arn:aws:wafv2:us-east-1:315341936575:regional/webacl/api-dev-wafv2-web-acl/a13139a8-fb10-4545-89fb-924417495223]
module.service.aws_iam_role.events: Refreshing state... [id=api-dev-events]
data.aws_subnets.private: Reading...
data.aws_security_groups.aws_services: Reading...
data.aws_subnets.public: Reading...
module.service.aws_api_gateway_domain_name.api[0]: Refreshing state... [id=api.dev.simpler.grants.gov]
data.aws_subnets.private: Read complete after 0s [id=us-east-1]
module.service.aws_iam_policy.api_gateway_access[0]: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-api-gateway-access-role-policy]
data.aws_security_groups.aws_services: Read complete after 0s [id=us-east-1]
module.service.aws_security_group.alb: Refreshing state... [id=sg-025e1dd290c12d572]
module.service.aws_lb_target_group.mtls_tg[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:targetgroup/mtls-20250623204826794600000001/d4bfbe0ea5dcaf0d]
module.service.aws_lb_target_group.app_tg[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:targetgroup/app-20240129204404286300000001/2225bef73ea80162]
data.aws_subnets.public: Read complete after 0s [id=us-east-1]
module.service.aws_api_gateway_resource.root_endpoints[".well-known"]: Refreshing state... [id=rta2jw]
module.service.aws_api_gateway_resource.root_endpoints["v1"]: Refreshing state... [id=uu82z4]
module.service.aws_api_gateway_resource.root_endpoints["static"]: Refreshing state... [id=kn28do]
module.service.aws_api_gateway_model.alpha_applications_model[0]: Refreshing state... [id=7ev2cp]
module.service.aws_api_gateway_resource.root_endpoints["{proxy+}"]: Refreshing state... [id=6vnfzl]
module.service.aws_api_gateway_resource.root_endpoints["alpha"]: Refreshing state... [id=nwdf73]
module.service.aws_api_gateway_resource.root_endpoints["openapi.json"]: Refreshing state... [id=q2nwpl]
module.service.aws_api_gateway_resource.root_endpoints["docs"]: Refreshing state... [id=6l2z2p]
module.service.aws_api_gateway_resource.root_endpoints["robots.txt"]: Refreshing state... [id=yz23s7]
module.service.aws_api_gateway_resource.root_endpoints["grantsws-applicant"]: Refreshing state... [id=4aerfp]
module.database[0].data.aws_iam_policy.app_db_access_policy: Read complete after 3s [id=arn:aws:iam::315341936575:policy/api-dev-app-access]
module.service.aws_api_gateway_resource.root_endpoints["health"]: Refreshing state... [id=kv9vnv]
module.service.aws_api_gateway_resource.root_endpoints["grantsws-agency"]: Refreshing state... [id=6agk95]
module.service.data.aws_iam_policy_document.api_access_restriction[0]: Reading...
module.service.data.aws_iam_policy_document.api_access_restriction[0]: Read complete after 0s [id=806067237]
module.service.data.aws_iam_policy_document.general_purpose_put_access: Reading...
module.service.data.aws_iam_policy_document.general_purpose_put_access: Read complete after 0s [id=612448226]
module.service.aws_iam_role.workflow_orchestrator: Refreshing state... [id=api-dev-workflow-orchestrator]
module.service.aws_iam_policy.runtime_logs: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-task-executor-role-policy]
module.service.aws_s3_bucket_policy.access_logs: Refreshing state... [id=api-dev-access-logs20231023213552646900000003]
module.service.aws_s3_bucket_server_side_encryption_configuration.s3_buckets["draft-files"]: Refreshing state... [id=api-dev-draft-files-20241217170228581000000003]
module.service.aws_s3_bucket_server_side_encryption_configuration.s3_buckets["api-analytics-transfer"]: Refreshing state... [id=api-dev-api-analytics-transfer-20241217170228558900000001]
module.service.aws_s3_bucket_server_side_encryption_configuration.s3_buckets["public-files"]: Refreshing state... [id=api-dev-public-files-20241217170228558900000002]
module.service.aws_s3_bucket_lifecycle_configuration.s3_buckets["draft-files"]: Refreshing state... [id=api-dev-draft-files-20241217170228581000000003]
module.service.aws_s3_bucket_lifecycle_configuration.s3_buckets["public-files"]: Refreshing state... [id=api-dev-public-files-20241217170228558900000002]
module.service.aws_s3_bucket_lifecycle_configuration.s3_buckets["api-analytics-transfer"]: Refreshing state... [id=api-dev-api-analytics-transfer-20241217170228558900000001]
module.service.aws_s3_bucket_public_access_block.s3_buckets["draft-files"]: Refreshing state... [id=api-dev-draft-files-20241217170228581000000003]
module.service.aws_s3_bucket_public_access_block.s3_buckets["api-analytics-transfer"]: Refreshing state... [id=api-dev-api-analytics-transfer-20241217170228558900000001]
module.service.aws_s3_bucket_public_access_block.s3_buckets["public-files"]: Refreshing state... [id=api-dev-public-files-20241217170228558900000002]
module.service.aws_ssm_parameter.s3_bucket_ids["public-files"]: Refreshing state... [id=/buckets/api-dev/public-files/id]
module.service.aws_ssm_parameter.s3_bucket_ids["api-analytics-transfer"]: Refreshing state... [id=/buckets/api-dev/api-analytics-transfer/id]
module.service.aws_ssm_parameter.s3_bucket_ids["draft-files"]: Refreshing state... [id=/buckets/api-dev/draft-files/id]
module.service.aws_ssm_parameter.s3_bucket_arns["api-analytics-transfer"]: Refreshing state... [id=/buckets/api-dev/api-analytics-transfer/arn]
module.service.aws_ssm_parameter.s3_bucket_arns["draft-files"]: Refreshing state... [id=/buckets/api-dev/draft-files/arn]
module.service.aws_ssm_parameter.s3_bucket_arns["public-files"]: Refreshing state... [id=/buckets/api-dev/public-files/arn]
data.aws_iam_policy.opensearch_query[0]: Read complete after 2s [id=arn:aws:iam::315341936575:policy/api-dev-opensearch-query]
module.notifications_email_domain[0].aws_sesv2_email_identity_policy.sender: Refreshing state... [id=dev.simpler.grants.gov|PinpointEmail]
module.notifications_email_domain[0].aws_sesv2_email_identity_mail_from_attributes.sender_domain: Refreshing state... [id=dev.simpler.grants.gov]
module.service.aws_s3_bucket_acl.cdn[0]: Refreshing state... [id=api-dev-cdn-access-logs20250116191905055600000002,log-delivery-write]
module.service.data.aws_iam_policy_document.task_executor: Reading...
module.service.data.aws_iam_policy_document.task_executor: Read complete after 0s [id=3060599744]
module.service.aws_security_group_rule.http_ingress_ipv6: Refreshing state... [id=sgrule-2134446771]
module.service.aws_security_group_rule.http_ingress: Refreshing state... [id=sgrule-69662097]
module.service.aws_security_group.app: Refreshing state... [id=sg-0eab49e76a34379f9]
module.service.aws_security_group_rule.https_ingress_ipv6[0]: Refreshing state... [id=sgrule-1537373897]
module.service.aws_security_group_rule.https_ingress[0]: Refreshing state... [id=sgrule-61791004]
module.service.aws_iam_role_policy_attachment.api_gateway_access[0]: Refreshing state... [id=api-dev-app-20250918161043065300000002]
module.service.aws_api_gateway_method.root[0]: Refreshing state... [id=agm-wxuxv45ooj-wewgtft4x5-GET]
module.service.aws_api_gateway_rest_api_policy.api_access_restriction[0]: Refreshing state... [id=wxuxv45ooj]
module.service.aws_s3_bucket_policy.general_purpose: Refreshing state... [id=api-dev-general-purpose20240416221336163000000001]
module.service.aws_api_gateway_resource.first_level_endpoints["v1/users"]: Refreshing state... [id=94wmdw]
module.service.aws_api_gateway_resource.first_level_endpoints["grantsws-applicant/services"]: Refreshing state... [id=4b0ibd]
module.service.aws_api_gateway_resource.first_level_endpoints["grantsws-agency/services"]: Refreshing state... [id=7h7abi]
module.service.aws_api_gateway_resource.first_level_endpoints["alpha/forms"]: Refreshing state... [id=ntyhnc]
module.service.aws_api_gateway_resource.first_level_endpoints["static/{proxy+}"]: Refreshing state... [id=9zn738]
module.service.aws_api_gateway_resource.first_level_endpoints[".well-known/pki-validation"]: Refreshing state... [id=3rq4qb]
module.service.aws_api_gateway_resource.first_level_endpoints["alpha/applications"]: Refreshing state... [id=ygexvp]
module.service.aws_api_gateway_method.root_endpoints["{proxy+}-ANY"]: Refreshing state... [id=agm-wxuxv45ooj-6vnfzl-ANY]
module.service.aws_api_gateway_method.root_endpoints["health-GET"]: Refreshing state... [id=agm-wxuxv45ooj-kv9vnv-GET]
module.service.aws_api_gateway_method.root_endpoints["openapi.json-GET"]: Refreshing state... [id=agm-wxuxv45ooj-q2nwpl-GET]
module.service.aws_api_gateway_method.root_endpoints["docs-GET"]: Refreshing state... [id=agm-wxuxv45ooj-6l2z2p-GET]
module.service.aws_api_gateway_method.root_endpoints["robots.txt-GET"]: Refreshing state... [id=agm-wxuxv45ooj-yz23s7-GET]
module.service.aws_lb.alb[1]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:loadbalancer/app/api-dev-mtls/3140048efa26be8e]
module.service.aws_lb.alb[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:loadbalancer/app/api-dev/48f2e65279b967a5]
module.service.aws_iam_role_policy_attachment.runtime_logs: Refreshing state... [id=api-dev-app-20250428193958540800000001]
module.notifications_email_domain[0].aws_route53_record.mx_receive: Refreshing state... [id=Z04517193GDPF9DWUX2WT_mail.dev.simpler.grants.gov_MX]
module.notifications_email_domain[0].aws_route53_record.dkim[2]: Refreshing state... [id=Z04517193GDPF9DWUX2WT_3hwyu5qifcdnrgstnintgupuu4uaqt4b._domainkey_CNAME]
module.notifications_email_domain[0].aws_route53_record.dkim[0]: Refreshing state... [id=Z04517193GDPF9DWUX2WT_euqp5oauub2jxtiglvjorht373aatuju._domainkey_CNAME]
module.notifications_email_domain[0].aws_route53_record.dkim[1]: Refreshing state... [id=Z04517193GDPF9DWUX2WT_726yiosqv6432ssoifjxuotdmseplz6c._domainkey_CNAME]
module.service.aws_iam_role_policy.task_executor: Refreshing state... [id=api-dev-task-executor:api-dev-task-executor-role-policy]
module.notifications_email_domain[0].aws_route53_record.spf_mail_from: Refreshing state... [id=Z04517193GDPF9DWUX2WT_mail.dev.simpler.grants.gov_TXT]
module.service.aws_security_group_rule.alb_app_local_health_check: Refreshing state... [id=sgrule-2094221940]
module.service.data.aws_iam_policy_document.email_access[0]: Reading...
module.service.data.aws_iam_policy_document.email_access[0]: Read complete after 0s [id=3811623138]
module.service.aws_api_gateway_integration.root[0]: Refreshing state... [id=agi-wxuxv45ooj-wewgtft4x5-GET]
module.service.aws_api_gateway_method.first_level_endpoints["static/{proxy+}-ANY"]: Refreshing state... [id=agm-wxuxv45ooj-9zn738-ANY]
module.service.aws_api_gateway_resource.second_level_endpoints["alpha/forms/{form_id}"]: Refreshing state... [id=hdgc1j]
module.service.aws_api_gateway_resource.second_level_endpoints["grantsws-applicant/services/v2"]: Refreshing state... [id=omweuk]
module.service.aws_api_gateway_resource.second_level_endpoints["grantsws-agency/services/v2"]: Refreshing state... [id=niamzr]
module.service.aws_api_gateway_resource.second_level_endpoints["v1/users/login"]: Refreshing state... [id=7znsiw]
module.service.aws_api_gateway_resource.second_level_endpoints["v1/users/token"]: Refreshing state... [id=plj4qg]
module.service.aws_api_gateway_resource.second_level_endpoints["alpha/applications/{application_id}"]: Refreshing state... [id=db17q6]
module.service.aws_api_gateway_resource.second_level_endpoints[".well-known/pki-validation/{proxy+}"]: Refreshing state... [id=21x20r]
module.service.aws_iam_role_policy_attachment.extra_policies["opensearch_query"]: Refreshing state... [id=api-dev-app-20251216142246163500000002]
module.service.aws_api_gateway_integration.root_endpoints["docs-GET"]: Refreshing state... [id=agi-wxuxv45ooj-6l2z2p-GET]
module.service.aws_api_gateway_integration.root_endpoints["health-GET"]: Refreshing state... [id=agi-wxuxv45ooj-kv9vnv-GET]
module.service.aws_api_gateway_integration.root_endpoints["openapi.json-GET"]: Refreshing state... [id=agi-wxuxv45ooj-q2nwpl-GET]
module.service.aws_api_gateway_integration.root_endpoints["robots.txt-GET"]: Refreshing state... [id=agi-wxuxv45ooj-yz23s7-GET]
module.service.aws_api_gateway_integration.root_endpoints["{proxy+}-ANY"]: Refreshing state... [id=agi-wxuxv45ooj-6vnfzl-ANY]
module.service.aws_vpc_security_group_ingress_rule.db_ingress_from_service[0]: Refreshing state... [id=sgr-024fcce0dd2b24824]
module.service.aws_iam_role.migrator_task[0]: Refreshing state... [id=api-dev-migrator]
module.service.aws_iam_role_policy_attachment.app_service_db_access[0]: Refreshing state... [id=api-dev-app-20231023230412768300000001]
module.service.aws_iam_policy.email_access[0]: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-email-access-role-policy]
module.service.aws_api_gateway_integration.first_level_endpoints["static/{proxy+}-ANY"]: Refreshing state... [id=agi-wxuxv45ooj-9zn738-ANY]
module.service.aws_wafv2_web_acl_association.WafWebAclAssociation[0]: Refreshing state... [id=arn:aws:wafv2:us-east-1:315341936575:regional/webacl/api-dev-wafv2-web-acl/a13139a8-fb10-4545-89fb-924417495223,arn:aws:elasticloadbalancing:us-east-1:315341936575:loadbalancer/app/api-dev/48f2e65279b967a5]
module.service.aws_lb_listener.alb_listener_http[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener/app/api-dev/48f2e65279b967a5/d4ce6505b9614ba0]
module.service.aws_lb_listener.alb_listener_https[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener/app/api-dev/48f2e65279b967a5/fb2b9c099b498d96]
module.service.aws_lb_listener.alb_listener_https[1]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener/app/api-dev-mtls/3140048efa26be8e/87744942a61c5462]
module.service.aws_api_gateway_resource.third_level_endpoints["v1/users/login/callback"]: Refreshing state... [id=36aya8]
module.service.aws_api_gateway_resource.third_level_endpoints["grantsws-applicant/services/v2/{service_port_name}"]: Refreshing state... [id=8g19iv]
module.service.aws_api_gateway_resource.third_level_endpoints["v1/users/login/result"]: Refreshing state... [id=hskork]
module.service.aws_api_gateway_resource.third_level_endpoints["alpha/forms/{form_id}/form_instructions"]: Refreshing state... [id=0e2q7i]
module.service.aws_api_gateway_resource.third_level_endpoints["alpha/applications/{application_id}/attachments"]: Refreshing state... [id=lz25uc]
module.service.aws_api_gateway_resource.third_level_endpoints["v1/users/token/logout"]: Refreshing state... [id=rbmxyv]
module.service.aws_api_gateway_resource.third_level_endpoints["grantsws-agency/services/v2/{service_port_name}"]: Refreshing state... [id=uzbs2q]
module.service.aws_api_gateway_resource.third_level_endpoints["v1/users/token/refresh"]: Refreshing state... [id=05z9yx]
module.service.aws_api_gateway_method.second_level_endpoints["v1/users/login-GET"]: Refreshing state... [id=agm-wxuxv45ooj-7znsiw-GET]
module.service.aws_api_gateway_method.second_level_endpoints[".well-known/pki-validation/{proxy+}-ANY"]: Refreshing state... [id=agm-wxuxv45ooj-21x20r-ANY]
module.service.aws_iam_role_policy_attachment.email_access[0]: Refreshing state... [id=api-dev-app-20250612142702959800000002]
module.service.aws_cloudfront_distribution.cdn[0]: Refreshing state... [id=E3OVMJEHODS81X]
module.service.aws_iam_role_policy_attachment.migrator_opensearch_ingest[0]: Refreshing state... [id=api-dev-migrator-20260130102225749500000002]
module.service.aws_iam_role_policy_attachment.migrator_db_access[0]: Refreshing state... [id=api-dev-migrator-20231023230412789800000002]
module.service.aws_iam_role_policy_attachment.migrator_email_access[0]: Refreshing state... [id=api-dev-migrator-20251216170036983200000001]
module.service.aws_iam_role_policy_attachment.migrator_app_db_access[0]: Refreshing state... [id=api-dev-migrator-20251216231354726600000002]
module.service.aws_api_gateway_resource.fourth_level_endpoints["alpha/applications/{application_id}/attachments/{application_attachment_id}"]: Refreshing state... [id=xqpgve]
module.service.aws_api_gateway_resource.fourth_level_endpoints["alpha/forms/{form_id}/form_instructions/{form_instruction_id}"]: Refreshing state... [id=jg7n1y]
module.service.aws_api_gateway_method.third_level_endpoints["v1/users/token/refresh-GET"]: Refreshing state... [id=agm-wxuxv45ooj-05z9yx-GET]
module.service.aws_api_gateway_method.third_level_endpoints["v1/users/token/logout-GET"]: Refreshing state... [id=agm-wxuxv45ooj-rbmxyv-GET]
module.service.aws_api_gateway_method.third_level_endpoints["alpha/applications/{application_id}/attachments-POST"]: Refreshing state... [id=agm-wxuxv45ooj-lz25uc-POST]
module.service.aws_api_gateway_method.third_level_endpoints["v1/users/login/callback-GET"]: Refreshing state... [id=agm-wxuxv45ooj-36aya8-GET]
module.service.aws_api_gateway_method.third_level_endpoints["v1/users/login/result-GET"]: Refreshing state... [id=agm-wxuxv45ooj-hskork-GET]
module.service.aws_api_gateway_method.third_level_endpoints["grantsws-applicant/services/v2/{service_port_name}-POST"]: Refreshing state... [id=agm-wxuxv45ooj-8g19iv-POST]
module.service.aws_api_gateway_method.third_level_endpoints["grantsws-agency/services/v2/{service_port_name}-POST"]: Refreshing state... [id=agm-wxuxv45ooj-uzbs2q-POST]
module.service.aws_api_gateway_integration.second_level_endpoints[".well-known/pki-validation/{proxy+}-ANY"]: Refreshing state... [id=agi-wxuxv45ooj-21x20r-ANY]
module.service.aws_api_gateway_integration.second_level_endpoints["v1/users/login-GET"]: Refreshing state... [id=agi-wxuxv45ooj-7znsiw-GET]
module.service.aws_lb_listener_rule.app_http_forward[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener-rule/app/api-dev/48f2e65279b967a5/d4ce6505b9614ba0/009594b77c825b5a]
module.service.aws_api_gateway_method.fourth_level_endpoints["alpha/applications/{application_id}/attachments/{application_attachment_id}-PUT"]: Refreshing state... [id=agm-wxuxv45ooj-xqpgve-PUT]
module.service.aws_api_gateway_method.fourth_level_endpoints["alpha/forms/{form_id}/form_instructions/{form_instruction_id}-PUT"]: Refreshing state... [id=agm-wxuxv45ooj-jg7n1y-PUT]
module.service.aws_lb_listener_certificate.alb_listener_https_optional_extra_certs["arn:aws:acm:us-east-1:315341936575:certificate/87f1b277-3118-414a-8971-388a44e07393"]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener/app/api-dev/48f2e65279b967a5/fb2b9c099b498d96_arn:aws:acm:us-east-1:315341936575:certificate/87f1b277-3118-414a-8971-388a44e07393]
module.service.aws_lb_listener_rule.app_https_forward[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener-rule/app/api-dev/48f2e65279b967a5/fb2b9c099b498d96/77f3b4b749a22699]
module.service.aws_lb_listener_rule.app_https_forward[1]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener-rule/app/api-dev-mtls/3140048efa26be8e/87744942a61c5462/f63420ab301917af]
module.service.aws_s3_bucket_policy.cdn[0]: Refreshing state... [id=api-dev-cdn-access-logs20250116191905055600000002]
module.service.aws_s3_bucket_policy.s3_buckets["public-files"]: Refreshing state... [id=api-dev-public-files-20241217170228558900000002]
module.service.aws_s3_bucket_policy.s3_buckets["draft-files"]: Refreshing state... [id=api-dev-draft-files-20241217170228581000000003]
module.service.aws_s3_bucket_policy.s3_buckets["api-analytics-transfer"]: Refreshing state... [id=api-dev-api-analytics-transfer-20241217170228558900000001]
module.service.aws_ecs_task_definition.app: Refreshing state... [id=api-dev]
module.service.aws_api_gateway_integration.fourth_level_endpoints["alpha/applications/{application_id}/attachments/{application_attachment_id}-PUT"]: Refreshing state... [id=agi-wxuxv45ooj-xqpgve-PUT]
module.service.aws_api_gateway_integration.fourth_level_endpoints["alpha/forms/{form_id}/form_instructions/{form_instruction_id}-PUT"]: Refreshing state... [id=agi-wxuxv45ooj-jg7n1y-PUT]
module.service.aws_ecs_task_definition.migrator[0]: Refreshing state... [id=api-dev-migrator]
module.service.data.aws_iam_policy_document.run_task: Reading...
module.service.data.aws_iam_policy_document.run_task: Read complete after 0s [id=1712525928]
module.service.aws_ecs_service.app: Refreshing state... [id=arn:aws:ecs:us-east-1:315341936575:service/api-dev/api-dev]
module.service.aws_iam_policy.run_task: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-run-access]
module.service.aws_sfn_state_machine.scheduled_jobs["load-search-opportunity-data"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-opportunity-data]
module.service.aws_sfn_state_machine.scheduled_jobs["create-analytics-db-csvs"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-analytics-db-csvs]
module.service.aws_sfn_state_machine.scheduled_jobs["email_notification_opportunity"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-email_notification_opportunity]
module.service.aws_sfn_state_machine.scheduled_jobs["build-automatic-opportunities"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-build-automatic-opportunities]
module.service.aws_sfn_state_machine.scheduled_jobs["create-application-submission"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-application-submission]
module.service.aws_sfn_state_machine.scheduled_jobs["load-search-agency-data"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-agency-data]
module.service.aws_sfn_state_machine.scheduled_jobs["load-transform"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-transform]
module.service.aws_sfn_state_machine.scheduled_jobs["sam-extracts"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-sam-extracts]
module.service.aws_sfn_state_machine.scheduled_jobs["export-opportunity-data"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-export-opportunity-data]
module.service.aws_iam_policy.workflow_orchestrator: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-workflow-orchestrator]
module.service.aws_appautoscaling_target.ecs_target[0]: Refreshing state... [id=service/api-dev/api-dev]
module.service.aws_scheduler_schedule.scheduled_jobs["email_notification_opportunity"]: Refreshing state... [id=default/api-dev-email_notification_opportunity]
module.service.aws_scheduler_schedule.scheduled_jobs["load-search-opportunity-data"]: Refreshing state... [id=default/api-dev-load-search-opportunity-data]
module.service.aws_scheduler_schedule.scheduled_jobs["build-automatic-opportunities"]: Refreshing state... [id=default/api-dev-build-automatic-opportunities]
module.service.aws_scheduler_schedule.scheduled_jobs["create-analytics-db-csvs"]: Refreshing state... [id=default/api-dev-create-analytics-db-csvs]
module.service.aws_scheduler_schedule.scheduled_jobs["load-transform"]: Refreshing state... [id=default/api-dev-load-transform]
module.service.aws_scheduler_schedule.scheduled_jobs["sam-extracts"]: Refreshing state... [id=default/api-dev-sam-extracts]
module.service.aws_scheduler_schedule.scheduled_jobs["export-opportunity-data"]: Refreshing state... [id=default/api-dev-export-opportunity-data]
module.service.aws_scheduler_schedule.scheduled_jobs["create-application-submission"]: Refreshing state... [id=default/api-dev-create-application-submission]
module.service.aws_scheduler_schedule.scheduled_jobs["load-search-agency-data"]: Refreshing state... [id=default/api-dev-load-search-agency-data]
module.service.aws_iam_policy.scheduler: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-scheduler]
module.service.aws_appautoscaling_policy.ecs_scale_policy_memory[0]: Refreshing state... [id=api-dev-ecs-scale-policy-memory]
module.service.aws_appautoscaling_policy.ecs_scale_policy_cpu[0]: Refreshing state... [id=api-dev-ecs-scale-policy-cpu]
module.service.aws_api_gateway_integration.third_level_endpoints["v1/users/login/callback-GET"]: Refreshing state... [id=agi-wxuxv45ooj-36aya8-GET]
module.service.aws_api_gateway_integration.third_level_endpoints["grantsws-agency/services/v2/{service_port_name}-POST"]: Refreshing state... [id=agi-wxuxv45ooj-uzbs2q-POST]
module.service.aws_api_gateway_integration.third_level_endpoints["v1/users/token/refresh-GET"]: Refreshing state... [id=agi-wxuxv45ooj-05z9yx-GET]
module.service.aws_api_gateway_integration.third_level_endpoints["v1/users/token/logout-GET"]: Refreshing state... [id=agi-wxuxv45ooj-rbmxyv-GET]
module.service.aws_api_gateway_integration.third_level_endpoints["grantsws-applicant/services/v2/{service_port_name}-POST"]: Refreshing state... [id=agi-wxuxv45ooj-8g19iv-POST]
module.service.aws_api_gateway_integration.third_level_endpoints["v1/users/login/result-GET"]: Refreshing state... [id=agi-wxuxv45ooj-hskork-GET]
module.service.aws_api_gateway_integration.third_level_endpoints["alpha/applications/{application_id}/attachments-POST"]: Refreshing state... [id=agi-wxuxv45ooj-lz25uc-POST]
module.service.aws_api_gateway_deployment.api_deployment[0]: Refreshing state... [id=lff734]
module.service.aws_api_gateway_stage.api_v1_stage[0]: Refreshing state... [id=ags-wxuxv45ooj-v1]
module.service.aws_api_gateway_base_path_mapping.api_domain_name_mapping_v1[0]: Refreshing state... [id=api.dev.simpler.grants.gov/]
module.service.aws_api_gateway_method_settings.api_v1_stage_settings[0]: Refreshing state... [id=wxuxv45ooj-v1-*/*]
module.service.aws_api_gateway_usage_plan.api_internal_usage_plan[0]: Refreshing state... [id=txe83x]
module.service.aws_api_gateway_usage_plan.api_public_usage_plan[0]: Refreshing state... [id=piknl2]
module.service.aws_api_gateway_usage_plan_key.frontend_api_access[0]: Refreshing state... [id=tqifu17hud]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
-/+ destroy and then create replacement
 <= read (data resources)

Terraform will perform the following actions:

  # module.monitoring.aws_cloudwatch_log_metric_filter.service_error_filter will be created
  + resource "aws_cloudwatch_log_metric_filter" "service_error_filter" {
      + id             = (known after apply)
      + log_group_name = "service/api-dev"
      + name           = "service-error-filter"
      + pattern        = "%ERROR | Exception%"

      + metric_transformation {
          + name      = "ErrorCount"
          + namespace = "api-dev"
          + unit      = "None"
          + value     = "1"
        }
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_app_http_5xx_count will be created
  + resource "aws_cloudwatch_metric_alarm" "high_app_http_5xx_count" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High HTTP service 5XX error count"
      + alarm_name                            = "api-dev-high-app-5xx-count"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + dimensions                            = {
          + "LoadBalancer" = "app/api-dev/48f2e65279b967a5"
        }
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "HTTPCode_Target_5XX_Count"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 1
      + treat_missing_data                    = "notBreaching"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_app_response_time will be created
  + resource "aws_cloudwatch_metric_alarm" "high_app_response_time" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High target latency alert"
      + alarm_name                            = "api-dev-high-app-response-time"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + dimensions                            = {
          + "LoadBalancer" = "app/api-dev/48f2e65279b967a5"
        }
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "TargetResponseTime"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Average"
      + tags_all                              = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 0.5
      + treat_missing_data                    = "ignore"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_load_balancer_http_5xx_count will be created
  + resource "aws_cloudwatch_metric_alarm" "high_load_balancer_http_5xx_count" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High HTTP ELB 5XX error count"
      + alarm_name                            = "api-dev-high-load-balancer-5xx-count"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + dimensions                            = {
          + "LoadBalancer" = "app/api-dev/48f2e65279b967a5"
        }
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "HTTPCode_ELB_5XX_Count"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 1
      + treat_missing_data                    = "notBreaching"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.service_errors will be created
  + resource "aws_cloudwatch_metric_alarm" "service_errors" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "Alarm for service errors"
      + alarm_name                            = "api-dev-errors"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanThreshold"
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 1
      + id                                    = (known after apply)
      + metric_name                           = "ErrorCount"
      + namespace                             = "api-dev"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 0
      + treat_missing_data                    = "ignore"
    }

  # module.monitoring.aws_sns_topic.this will be created
  + resource "aws_sns_topic" "this" {
      + arn                         = (known after apply)
      + beginning_archive_time      = (known after apply)
      + content_based_deduplication = false
      + fifo_topic                  = false
      + id                          = (known after apply)
      + name                        = "api-dev-monitoring"
      + name_prefix                 = (known after apply)
      + owner                       = (known after apply)
      + policy                      = (known after apply)
      + signature_version           = (known after apply)
      + tags_all                    = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + tracing_config              = (known after apply)
    }

  # module.notifications[0].aws_iam_policy.access will be created
  + resource "aws_iam_policy" "access" {
      + arn              = (known after apply)
      + attachment_count = (known after apply)
      + description      = "Policy for calling SendMessages and SendUsersMessages on Pinpoint app api-dev"
      + id               = (known after apply)
      + name             = "api-dev-notifications-access"
      + name_prefix      = (known after apply)
      + path             = "/"
      + policy           = (known after apply)
      + policy_id        = (known after apply)
      + tags_all         = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
    }

  # module.notifications_email_domain[0].aws_route53_record.dkim[0] must be replaced
-/+ resource "aws_route53_record" "dkim" {
      ~ fqdn                             = "euqp5oauub2jxtiglvjorht373aatuju._domainkey.dev.simpler.grants.gov" -> (known after apply)
      ~ id                               = "Z04517193GDPF9DWUX2WT_euqp5oauub2jxtiglvjorht373aatuju._domainkey_CNAME" -> (known after apply)
      - multivalue_answer_routing_policy = false -> null
      ~ name                             = "euqp5oauub2jxtiglvjorht373aatuju._domainkey" -> (known after apply) # forces replacement
      ~ records                          = [
          - "euqp5oauub2jxtiglvjorht373aatuju.dkim.amazonses.com",
        ] -> (known after apply)
        # (6 unchanged attributes hidden)
    }

  # module.notifications_email_domain[0].aws_route53_record.dkim[1] must be replaced
-/+ resource "aws_route53_record" "dkim" {
      ~ fqdn                             = "726yiosqv6432ssoifjxuotdmseplz6c._domainkey.dev.simpler.grants.gov" -> (known after apply)
      ~ id                               = "Z04517193GDPF9DWUX2WT_726yiosqv6432ssoifjxuotdmseplz6c._domainkey_CNAME" -> (known after apply)
      - multivalue_answer_routing_policy = false -> null
      ~ name                             = "726yiosqv6432ssoifjxuotdmseplz6c._domainkey" -> (known after apply) # forces replacement
      ~ records                          = [
          - "726yiosqv6432ssoifjxuotdmseplz6c.dkim.amazonses.com",
        ] -> (known after apply)
        # (6 unchanged attributes hidden)
    }

  # module.notifications_email_domain[0].aws_route53_record.dkim[2] must be replaced
-/+ resource "aws_route53_record" "dkim" {
      ~ fqdn                             = "3hwyu5qifcdnrgstnintgupuu4uaqt4b._domainkey.dev.simpler.grants.gov" -> (known after apply)
      ~ id                               = "Z04517193GDPF9DWUX2WT_3hwyu5qifcdnrgstnintgupuu4uaqt4b._domainkey_CNAME" -> (known after apply)
      - multivalue_answer_routing_policy = false -> null
      ~ name                             = "3hwyu5qifcdnrgstnintgupuu4uaqt4b._domainkey" -> (known after apply) # forces replacement
      ~ records                          = [
          - "3hwyu5qifcdnrgstnintgupuu4uaqt4b.dkim.amazonses.com",
        ] -> (known after apply)
        # (6 unchanged attributes hidden)
    }

  # module.notifications_email_domain[0].aws_route53_record.dmarc will be created
  + resource "aws_route53_record" "dmarc" {
      + allow_overwrite = true
      + fqdn            = (known after apply)
      + id              = (known after apply)
      + name            = "_dmarc.api.dev.simpler.grants.gov"
      + records         = [
          + "v=DMARC1; p=none;",
        ]
      + ttl             = 600
      + type            = "TXT"
      + zone_id         = "Z04517193GDPF9DWUX2WT"
    }

  # module.notifications_email_domain[0].aws_route53_record.mx_receive must be replaced
-/+ resource "aws_route53_record" "mx_receive" {
      ~ fqdn                             = "mail.dev.simpler.grants.gov" -> (known after apply)
      ~ id                               = "Z04517193GDPF9DWUX2WT_mail.dev.simpler.grants.gov_MX" -> (known after apply)
      - multivalue_answer_routing_policy = false -> null
      ~ name                             = "mail.dev.simpler.grants.gov" -> "mail.api.dev.simpler.grants.gov" # forces replacement
      ~ records                          = [
          - "10 feedback-smtp.us-east-1.amazonaws.com",
          + "10 feedback-smtp.us-east-1.amazonses.com",
        ]
        # (6 unchanged attributes hidden)
    }

  # module.notifications_email_domain[0].aws_route53_record.spf_mail_from must be replaced
-/+ resource "aws_route53_record" "spf_mail_from" {
      ~ fqdn                             = "mail.dev.simpler.grants.gov" -> (known after apply)
      ~ id                               = "Z04517193GDPF9DWUX2WT_mail.dev.simpler.grants.gov_TXT" -> (known after apply)
      - multivalue_answer_routing_policy = false -> null
      ~ name                             = "mail.dev.simpler.grants.gov" -> "mail.api.dev.simpler.grants.gov" # forces replacement
        # (7 unchanged attributes hidden)
    }

  # module.notifications_email_domain[0].aws_ses_event_destination.logs must be replaced
-/+ resource "aws_ses_event_destination" "logs" {
      ~ arn                    = "arn:aws:ses:us-east-1:315341936575:configuration-set/dev-simpler-grants-gov:event-destination/dev-simpler-grants-gov-email-identity-logs" -> (known after apply)
      ~ configuration_set_name = "dev-simpler-grants-gov" -> "api-dev-simpler-grants-gov" # forces replacement
      ~ id                     = "dev-simpler-grants-gov-email-identity-logs" -> (known after apply)
      ~ name                   = "dev-simpler-grants-gov-email-identity-logs" -> "api-dev-simpler-grants-gov-email-identity-logs" # forces replacement
        # (2 unchanged attributes hidden)

        # (1 unchanged block hidden)
    }

  # module.notifications_email_domain[0].aws_sesv2_configuration_set.email must be replaced
-/+ resource "aws_sesv2_configuration_set" "email" {
      ~ arn                    = "arn:aws:ses:us-east-1:315341936575:configuration-set/dev-simpler-grants-gov" -> (known after apply)
      ~ configuration_set_name = "dev-simpler-grants-gov" -> "api-dev-simpler-grants-gov" # forces replacement
      ~ id                     = "dev-simpler-grants-gov" -> (known after apply)
      - tags                   = {} -> null
        # (1 unchanged attribute hidden)

      ~ reputation_options {
          + last_fresh_start           = (known after apply)
            # (1 unchanged attribute hidden)
        }

        # (2 unchanged blocks hidden)
    }

  # module.notifications_email_domain[0].aws_sesv2_email_identity.sender_domain must be replaced
-/+ resource "aws_sesv2_email_identity" "sender_domain" {
      ~ arn                         = "arn:aws:ses:us-east-1:315341936575:identity/dev.simpler.grants.gov" -> (known after apply)
      ~ configuration_set_name      = "dev-simpler-grants-gov" -> "api-dev-simpler-grants-gov"
      ~ email_identity              = "dev.simpler.grants.gov" -> "api.dev.simpler.grants.gov" # forces replacement
      ~ id                          = "dev.simpler.grants.gov" -> (known after apply)
      ~ identity_type               = "DOMAIN" -> (known after apply)
      - tags                        = {} -> null
      ~ verified_for_sending_status = true -> (known after apply)
        # (1 unchanged attribute hidden)

      ~ dkim_signing_attributes (known after apply)
      - dkim_signing_attributes {
          - current_signing_key_length    = "RSA_2048_BIT" -> null
          - last_key_generation_timestamp = "2025-09-12T15:01:18Z" -> null
          - next_signing_key_length       = "RSA_2048_BIT" -> null
          - signing_attributes_origin     = "AWS_SES" -> null
          - status                        = "SUCCESS" -> null
          - tokens                        = [
              - "euqp5oauub2jxtiglvjorht373aatuju",
              - "726yiosqv6432ssoifjxuotdmseplz6c",
              - "3hwyu5qifcdnrgstnintgupuu4uaqt4b",
            ] -> null
            # (2 unchanged attributes hidden)
        }
    }

  # module.notifications_email_domain[0].aws_sesv2_email_identity_mail_from_attributes.sender_domain must be replaced
-/+ resource "aws_sesv2_email_identity_mail_from_attributes" "sender_domain" {
      ~ email_identity         = "dev.simpler.grants.gov" -> "api.dev.simpler.grants.gov" # forces replacement
      ~ id                     = "dev.simpler.grants.gov" -> (known after apply)
      ~ mail_from_domain       = "mail.dev.simpler.grants.gov" -> "mail.api.dev.simpler.grants.gov"
        # (1 unchanged attribute hidden)
    }

  # module.notifications_email_domain[0].aws_sesv2_email_identity_policy.sender must be replaced
-/+ resource "aws_sesv2_email_identity_policy" "sender" {
      ~ email_identity = "dev.simpler.grants.gov" -> "api.dev.simpler.grants.gov" # forces replacement
      ~ id             = "dev.simpler.grants.gov|PinpointEmail" -> (known after apply)
      ~ policy         = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "ses:*"
                      - Condition = {
                          - StringEquals = {
                              - "aws:SourceAccount" = "315341936575"
                            }
                          - StringLike   = {
                              - "aws:SourceArn" = "arn:aws:mobiletargeting:us-east-1:315341936575:apps/*"
                            }
                        }
                      - Effect    = "Allow"
                      - Principal = {
                          - Service = "pinpoint.amazonaws.com"
                        }
                      - Resource  = "arn:aws:ses:us-east-1:315341936575:identity/dev.simpler.grants.gov"
                      - Sid       = "PinpointEmail"
                    },
                ]
              - Version   = "2008-10-17"
            }
        ) -> (known after apply)
        # (1 unchanged attribute hidden)
    }

  # module.service.data.aws_iam_policy_document.cdn[0] will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "cdn" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:GetObject",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::api-dev-cdn-access-logs20250116191905055600000002/*",
            ]
          + sid       = "AllowCloudFrontIngress"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + "arn:aws:cloudfront::315341936575:distribution/E3OVMJEHODS81X",
                ]
              + variable = "AWS:SourceArn"
            }

          + principals {
              + identifiers = [
                  + "cloudfront.amazonaws.com",
                ]
              + type        = "Service"
            }
        }
    }

  # module.service.data.aws_iam_policy_document.s3_buckets_put_access["api-analytics-transfer"] will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "s3_buckets_put_access" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::api-dev-api-analytics-transfer-20241217170228558900000001",
              + "arn:aws:s3:::api-dev-api-analytics-transfer-20241217170228558900000001/*",
            ]

          + principals {
              + identifiers = [
                  + "arn:aws:iam::315341936575:role/api-dev-app",
                  + "arn:aws:iam::315341936575:role/api-dev-migrator",
                ]
              + type        = "AWS"
            }
        }
      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Deny"
          + resources = [
              + "arn:aws:s3:::api-dev-api-analytics-transfer-20241217170228558900000001",
              + "arn:aws:s3:::api-dev-api-analytics-transfer-20241217170228558900000001/*",
            ]
          + sid       = "AllowSSLRequestsOnly"

          + condition {
              + test     = "Bool"
              + values   = [
                  + "false",
                ]
              + variable = "aws:SecureTransport"
            }

          + principals {
              + identifiers = [
                  + "*",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.service.data.aws_iam_policy_document.s3_buckets_put_access["draft-files"] will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "s3_buckets_put_access" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::api-dev-draft-files-20241217170228581000000003",
              + "arn:aws:s3:::api-dev-draft-files-20241217170228581000000003/*",
            ]

          + principals {
              + identifiers = [
                  + "arn:aws:iam::315341936575:role/api-dev-app",
                  + "arn:aws:iam::315341936575:role/api-dev-migrator",
                ]
              + type        = "AWS"
            }
        }
      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Deny"
          + resources = [
              + "arn:aws:s3:::api-dev-draft-files-20241217170228581000000003",
              + "arn:aws:s3:::api-dev-draft-files-20241217170228581000000003/*",
            ]
          + sid       = "AllowSSLRequestsOnly"

          + condition {
              + test     = "Bool"
              + values   = [
                  + "false",
                ]
              + variable = "aws:SecureTransport"
            }

          + principals {
              + identifiers = [
                  + "*",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.service.data.aws_iam_policy_document.s3_buckets_put_access["public-files"] will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "s3_buckets_put_access" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::api-dev-public-files-20241217170228558900000002",
              + "arn:aws:s3:::api-dev-public-files-20241217170228558900000002/*",
            ]

          + principals {
              + identifiers = [
                  + "arn:aws:iam::315341936575:role/api-dev-app",
                  + "arn:aws:iam::315341936575:role/api-dev-migrator",
                ]
              + type        = "AWS"
            }
        }
      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Deny"
          + resources = [
              + "arn:aws:s3:::api-dev-public-files-20241217170228558900000002",
              + "arn:aws:s3:::api-dev-public-files-20241217170228558900000002/*",
            ]
          + sid       = "AllowSSLRequestsOnly"

          + condition {
              + test     = "Bool"
              + values   = [
                  + "false",
                ]
              + variable = "aws:SecureTransport"
            }

          + principals {
              + identifiers = [
                  + "*",
                ]
              + type        = "AWS"
            }
        }
      + statement {
          + actions   = [
              + "s3:GetObject",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::api-dev-public-files-20241217170228558900000002/*",
            ]
          + sid       = "AllowCloudFrontIngress"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + "arn:aws:cloudfront::315341936575:distribution/E3OVMJEHODS81X",
                ]
              + variable = "AWS:SourceArn"
            }

          + principals {
              + identifiers = [
                  + "cloudfront.amazonaws.com",
                ]
              + type        = "Service"
            }
        }
    }

  # module.service.data.aws_iam_policy_document.scheduler will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "scheduler" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "events:DescribeRule",
              + "events:PutRule",
              + "events:PutTargets",
            ]
          + resources = [
              + "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule",
            ]
          + sid       = "StepFunctionsEvents"
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-build-automatic-opportunities",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-analytics-db-csvs",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-application-submission",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-email_notification_opportunity",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-export-opportunity-data",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-agency-data",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-opportunity-data",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-transform",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-sam-extracts",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-build-automatic-opportunities:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-analytics-db-csvs:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-application-submission:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-email_notification_opportunity:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-export-opportunity-data:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-agency-data:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-opportunity-data:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-transform:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-sam-extracts:*",
            ]
        }
    }

  # module.service.data.aws_iam_policy_document.workflow_orchestrator will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "workflow_orchestrator" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "logs:CreateLogDelivery",
              + "logs:CreateLogStream",
              + "logs:DeleteLogDelivery",
              + "logs:DescribeLogGroups",
              + "logs:DescribeResourcePolicies",
              + "logs:GetLogDelivery",
              + "logs:ListLogDeliveries",
              + "logs:PutLogEvents",
              + "logs:PutResourcePolicy",
              + "logs:UpdateLogDelivery",
            ]
          + resources = [
              + "*",
            ]
          + sid       = "UnscopeLogsPermissions"
        }
      + statement {
          + actions   = [
              + "events:DescribeRule",
              + "events:PutRule",
              + "events:PutTargets",
            ]
          + resources = [
              + "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForECSTaskRule",
            ]
          + sid       = "StepFunctionsEvents"
        }
      + statement {
          + actions   = [
              + "ecs:RunTask",
            ]
          + effect    = "Allow"
          + resources = [
              + (known after apply),
              + (known after apply),
            ]

          + condition {
              + test     = "ArnLike"
              + values   = [
                  + "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev",
                ]
              + variable = "ecs:cluster"
            }
        }
      + statement {
          + actions   = [
              + "ecs:DescribeTasks",
              + "ecs:StopTask",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:ecs:us-east-1:315341936575:task/api-dev/*",
            ]

          + condition {
              + test     = "ArnLike"
              + values   = [
                  + "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev",
                ]
              + variable = "ecs:cluster"
            }
        }
      + statement {
          + actions   = [
              + "iam:PassRole",
            ]
          + resources = [
              + "arn:aws:iam::315341936575:role/api-dev-app",
              + "arn:aws:iam::315341936575:role/api-dev-migrator",
              + "arn:aws:iam::315341936575:role/api-dev-task-executor",
            ]
          + sid       = "PassRole"
        }
    }

  # module.service.aws_cloudfront_distribution.cdn[0] will be updated in-place
  ~ resource "aws_cloudfront_distribution" "cdn" {
        id                              = "E3OVMJEHODS81X"
        tags                            = {}
        # (22 unchanged attributes hidden)

      - origin {
          - connection_attempts      = 3 -> null
          - connection_timeout       = 10 -> null
          - domain_name              = "api-dev-public-files-20241217170228558900000002.s3.us-east-1.amazonaws.com" -> null
          - origin_access_control_id = "E2EJR515GGOGNA" -> null
          - origin_id                = "default" -> null
            # (1 unchanged attribute hidden)

          - origin_shield {
              - enabled              = true -> null
              - origin_shield_region = "us-east-1" -> null
            }
        }
      + origin {
          + connection_attempts      = 3
          + connection_timeout       = 10
          + domain_name              = "api-dev-public-files-20241217170228558900000002.s3.us-east-1.amazonaws.com"
          + origin_access_control_id = "E2EJR515GGOGNA"
          + origin_id                = "default"
            # (1 unchanged attribute hidden)
        }

        # (5 unchanged blocks hidden)
    }

  # module.service.aws_ecs_service.app will be updated in-place
  ~ resource "aws_ecs_service" "app" {
        id                                 = "arn:aws:ecs:us-east-1:315341936575:service/api-dev/api-dev"
        name                               = "api-dev"
        tags                               = {}
      ~ task_definition                    = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev:1827" -> (known after apply)
        # (16 unchanged attributes hidden)

        # (5 unchanged blocks hidden)
    }

  # module.service.aws_ecs_task_definition.app must be replaced
-/+ resource "aws_ecs_task_definition" "app" {
      ~ arn                      = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev:1827" -> (known after apply)
      ~ arn_without_revision     = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev" -> (known after apply)
      ~ container_definitions    = (sensitive value) # forces replacement
      ~ cpu                      = "1024" -> "3" # forces replacement
      ~ enable_fault_injection   = false -> (known after apply)
      ~ id                       = "api-dev" -> (known after apply)
      ~ revision                 = 1827 -> (known after apply)
      - tags                     = {} -> null
        # (11 unchanged attributes hidden)
    }

  # module.service.aws_ecs_task_definition.migrator[0] must be replaced
-/+ resource "aws_ecs_task_definition" "migrator" {
      ~ arn                      = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61" -> (known after apply)
      ~ arn_without_revision     = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator" -> (known after apply)
      ~ container_definitions    = (sensitive value) # forces replacement
      ~ cpu                      = "1024" -> "3" # forces replacement
      ~ enable_fault_injection   = false -> (known after apply)
      ~ id                       = "api-dev-migrator" -> (known after apply)
      ~ revision                 = 61 -> (known after apply)
      - tags                     = {} -> null
        # (11 unchanged attributes hidden)

      - volume {
          - configure_at_launch = false -> null
          - name                = "tmp" -> null
            # (1 unchanged attribute hidden)
        }
      + volume {
          + configure_at_launch = (known after apply)
          + name                = "tmp"
            # (1 unchanged attribute hidden)
        }
    }

  # module.service.aws_iam_policy.scheduler will be updated in-place
  ~ resource "aws_iam_policy" "scheduler" {
        id               = "arn:aws:iam::315341936575:policy/api-dev-scheduler"
        name             = "api-dev-scheduler"
      ~ policy           = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "events:PutTargets",
                          - "events:PutRule",
                          - "events:DescribeRule",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule"
                      - Sid      = "StepFunctionsEvents"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-build-automatic-opportunities"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-analytics-db-csvs"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-application-submission"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-email_notification_opportunity"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-export-opportunity-data"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-agency-data"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-opportunity-data"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-transform"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-sam-extracts"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-build-automatic-opportunities:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-analytics-db-csvs:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-application-submission:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-email_notification_opportunity:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-export-opportunity-data:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-agency-data:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-opportunity-data:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-transform:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-sam-extracts:*"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        tags             = {}
        # (7 unchanged attributes hidden)
    }

  # module.service.aws_iam_policy.workflow_orchestrator will be updated in-place
  ~ resource "aws_iam_policy" "workflow_orchestrator" {
        id               = "arn:aws:iam::315341936575:policy/api-dev-workflow-orchestrator"
        name             = "api-dev-workflow-orchestrator"
      ~ policy           = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "logs:UpdateLogDelivery",
                          - "logs:PutResourcePolicy",
                          - "logs:PutLogEvents",
                          - "logs:ListLogDeliveries",
                          - "logs:GetLogDelivery",
                          - "logs:DescribeResourcePolicies",
                          - "logs:DescribeLogGroups",
                          - "logs:DeleteLogDelivery",
                          - "logs:CreateLogStream",
                          - "logs:CreateLogDelivery",
                        ]
                      - Effect   = "Allow"
                      - Resource = "*"
                      - Sid      = "UnscopeLogsPermissions"
                    },
                  - {
                      - Action   = [
                          - "events:PutTargets",
                          - "events:PutRule",
                          - "events:DescribeRule",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForECSTaskRule"
                      - Sid      = "StepFunctionsEvents"
                    },
                  - {
                      - Action    = "ecs:RunTask"
                      - Condition = {
                          - ArnLike = {
                              - "ecs:cluster" = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                            }
                        }
                      - Effect    = "Allow"
                      - Resource  = [
                          - "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev:*",
                          - "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:*",
                        ]
                    },
                  - {
                      - Action    = [
                          - "ecs:StopTask",
                          - "ecs:DescribeTasks",
                        ]
                      - Condition = {
                          - ArnLike = {
                              - "ecs:cluster" = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                            }
                        }
                      - Effect    = "Allow"
                      - Resource  = "arn:aws:ecs:us-east-1:315341936575:task/api-dev/*"
                    },
                  - {
                      - Action   = "iam:PassRole"
                      - Effect   = "Allow"
                      - Resource = [
                          - "arn:aws:iam::315341936575:role/api-dev-task-executor",
                          - "arn:aws:iam::315341936575:role/api-dev-migrator",
                          - "arn:aws:iam::315341936575:role/api-dev-app",
                        ]
                      - Sid      = "PassRole"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        tags             = {}
        # (7 unchanged attributes hidden)
    }

  # module.service.aws_iam_role_policy_attachment.events will be created
  + resource "aws_iam_role_policy_attachment" "events" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/api-dev-run-access"
      + role       = "api-dev-events"
    }

  # module.service.aws_iam_role_policy_attachment.scheduler will be created
  + resource "aws_iam_role_policy_attachment" "scheduler" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/api-dev-scheduler"
      + role       = "api-dev-scheduler"
    }

  # module.service.aws_iam_role_policy_attachment.workflow_orchestrator will be created
  + resource "aws_iam_role_policy_attachment" "workflow_orchestrator" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/api-dev-workflow-orchestrator"
      + role       = "api-dev-workflow-orchestrator"
    }

  # module.service.aws_lb_listener_rule.http_to_https_redirect[0] will be created
  + resource "aws_lb_listener_rule" "http_to_https_redirect" {
      + arn          = (known after apply)
      + id           = (known after apply)
      + listener_arn = "arn:aws:elasticloadbalancing:us-east-1:315341936575:listener/app/api-dev/48f2e65279b967a5/d4ce6505b9614ba0"
      + priority     = 50
      + tags_all     = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }

      + action {
          + order = (known after apply)
          + type  = "redirect"

          + redirect {
              + host        = "#{host}"
              + path        = "/#{path}"
              + port        = "443"
              + protocol    = "HTTPS"
              + query       = "#{query}"
              + status_code = "HTTP_301"
            }
        }

      + condition {
          + path_pattern {
              + values = [
                  + "/*",
                ]
            }
        }
    }

  # module.service.aws_s3_bucket_policy.cdn[0] will be updated in-place
  ~ resource "aws_s3_bucket_policy" "cdn" {
        id     = "api-dev-cdn-access-logs20250116191905055600000002"
      ~ policy = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "s3:GetObject"
                      - Condition = {
                          - StringEquals = {
                              - "AWS:SourceArn" = "arn:aws:cloudfront::315341936575:distribution/E3OVMJEHODS81X"
                            }
                        }
                      - Effect    = "Allow"
                      - Principal = {
                          - Service = "cloudfront.amazonaws.com"
                        }
                      - Resource  = "arn:aws:s3:::api-dev-cdn-access-logs20250116191905055600000002/*"
                      - Sid       = "AllowCloudFrontIngress"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        # (1 unchanged attribute hidden)
    }

  # module.service.aws_s3_bucket_policy.s3_buckets["api-analytics-transfer"] will be updated in-place
  ~ resource "aws_s3_bucket_policy" "s3_buckets" {
        id     = "api-dev-api-analytics-transfer-20241217170228558900000001"
      ~ policy = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "s3:*"
                      - Effect    = "Allow"
                      - Principal = {
                          - AWS = [
                              - "arn:aws:iam::315341936575:role/api-dev-migrator",
                              - "arn:aws:iam::315341936575:role/api-dev-app",
                            ]
                        }
                      - Resource  = [
                          - "arn:aws:s3:::api-dev-api-analytics-transfer-20241217170228558900000001/*",
                          - "arn:aws:s3:::api-dev-api-analytics-transfer-20241217170228558900000001",
                        ]
                    },
                  - {
                      - Action    = "s3:*"
                      - Condition = {
                          - Bool = {
                              - "aws:SecureTransport" = "false"
                            }
                        }
                      - Effect    = "Deny"
                      - Principal = {
                          - AWS = "*"
                        }
                      - Resource  = [
                          - "arn:aws:s3:::api-dev-api-analytics-transfer-20241217170228558900000001/*",
                          - "arn:aws:s3:::api-dev-api-analytics-transfer-20241217170228558900000001",
                        ]
                      - Sid       = "AllowSSLRequestsOnly"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        # (1 unchanged attribute hidden)
    }

  # module.service.aws_s3_bucket_policy.s3_buckets["draft-files"] will be updated in-place
  ~ resource "aws_s3_bucket_policy" "s3_buckets" {
        id     = "api-dev-draft-files-20241217170228581000000003"
      ~ policy = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "s3:*"
                      - Effect    = "Allow"
                      - Principal = {
                          - AWS = [
                              - "arn:aws:iam::315341936575:role/api-dev-migrator",
                              - "arn:aws:iam::315341936575:role/api-dev-app",
                            ]
                        }
                      - Resource  = [
                          - "arn:aws:s3:::api-dev-draft-files-20241217170228581000000003/*",
                          - "arn:aws:s3:::api-dev-draft-files-20241217170228581000000003",
                        ]
                    },
                  - {
                      - Action    = "s3:*"
                      - Condition = {
                          - Bool = {
                              - "aws:SecureTransport" = "false"
                            }
                        }
                      - Effect    = "Deny"
                      - Principal = {
                          - AWS = "*"
                        }
                      - Resource  = [
                          - "arn:aws:s3:::api-dev-draft-files-20241217170228581000000003/*",
                          - "arn:aws:s3:::api-dev-draft-files-20241217170228581000000003",
                        ]
                      - Sid       = "AllowSSLRequestsOnly"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        # (1 unchanged attribute hidden)
    }

  # module.service.aws_s3_bucket_policy.s3_buckets["public-files"] will be updated in-place
  ~ resource "aws_s3_bucket_policy" "s3_buckets" {
        id     = "api-dev-public-files-20241217170228558900000002"
      ~ policy = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "s3:*"
                      - Effect    = "Allow"
                      - Principal = {
                          - AWS = [
                              - "arn:aws:iam::315341936575:role/api-dev-migrator",
                              - "arn:aws:iam::315341936575:role/api-dev-app",
                            ]
                        }
                      - Resource  = [
                          - "arn:aws:s3:::api-dev-public-files-20241217170228558900000002/*",
                          - "arn:aws:s3:::api-dev-public-files-20241217170228558900000002",
                        ]
                    },
                  - {
                      - Action    = "s3:*"
                      - Condition = {
                          - Bool = {
                              - "aws:SecureTransport" = "false"
                            }
                        }
                      - Effect    = "Deny"
                      - Principal = {
                          - AWS = "*"
                        }
                      - Resource  = [
                          - "arn:aws:s3:::api-dev-public-files-20241217170228558900000002/*",
                          - "arn:aws:s3:::api-dev-public-files-20241217170228558900000002",
                        ]
                      - Sid       = "AllowSSLRequestsOnly"
                    },
                  - {
                      - Action    = "s3:GetObject"
                      - Condition = {
                          - StringEquals = {
                              - "AWS:SourceArn" = "arn:aws:cloudfront::315341936575:distribution/E3OVMJEHODS81X"
                            }
                        }
                      - Effect    = "Allow"
                      - Principal = {
                          - Service = "cloudfront.amazonaws.com"
                        }
                      - Resource  = "arn:aws:s3:::api-dev-public-files-20241217170228558900000002/*"
                      - Sid       = "AllowCloudFrontIngress"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        # (1 unchanged attribute hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["build-automatic-opportunities"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "task",
                                          - "build-automatic-opportunities",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-build-automatic-opportunities"
        name                      = "api-dev-build-automatic-opportunities"
        tags                      = {
            "job"  = "build-automatic-opportunities"
            "name" = "api-dev-build-automatic-opportunities"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["create-analytics-db-csvs"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "task",
                                          - "create-analytics-db-csvs",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-analytics-db-csvs"
        name                      = "api-dev-create-analytics-db-csvs"
        tags                      = {
            "job"  = "create-analytics-db-csvs"
            "name" = "api-dev-create-analytics-db-csvs"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["create-application-submission"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "task",
                                          - "create-application-submission",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-create-application-submission"
        name                      = "api-dev-create-application-submission"
        tags                      = {
            "job"  = "create-application-submission"
            "name" = "api-dev-create-application-submission"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["email_notification_opportunity"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "task",
                                          - "email-notifications",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-email_notification_opportunity"
        name                      = "api-dev-email_notification_opportunity"
        tags                      = {
            "job"  = "email_notification_opportunity"
            "name" = "api-dev-email_notification_opportunity"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["export-opportunity-data"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "task",
                                          - "export-opportunity-data",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-export-opportunity-data"
        name                      = "api-dev-export-opportunity-data"
        tags                      = {
            "job"  = "export-opportunity-data"
            "name" = "api-dev-export-opportunity-data"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["load-search-agency-data"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "load-search-data",
                                          - "load-agency-data",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-agency-data"
        name                      = "api-dev-load-search-agency-data"
        tags                      = {
            "job"  = "load-search-agency-data"
            "name" = "api-dev-load-search-agency-data"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["load-search-opportunity-data"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "load-search-data",
                                          - "load-opportunity-data",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-search-opportunity-data"
        name                      = "api-dev-load-search-opportunity-data"
        tags                      = {
            "job"  = "load-search-opportunity-data"
            "name" = "api-dev-load-search-opportunity-data"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["load-transform"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "data-migration",
                                          - "load-transform",
                                          - "--load",
                                          - "--transform",
                                          - "--set-current",
                                          - "--store-version",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-load-transform"
        name                      = "api-dev-load-transform"
        tags                      = {
            "job"  = "load-transform"
            "name" = "api-dev-load-transform"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["sam-extracts"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/api-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-0eab49e76a34379f9",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "flask",
                                          - "task",
                                          - "sam-extracts",
                                          - "--no-fetch-extracts",
                                          - "--setup-lower-env",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "api-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/api-dev-migrator:61"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:api-dev-sam-extracts"
        name                      = "api-dev-sam-extracts"
        tags                      = {
            "job"  = "sam-extracts"
            "name" = "api-dev-sam-extracts"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.storage.data.aws_iam_policy_document.storage will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "storage" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Deny"
          + resources = [
              + (known after apply),
            ]
          + sid       = "RestrictToTLSRequestsOnly"

          + condition {
              + test     = "Bool"
              + values   = [
                  + "false",
                ]
              + variable = "aws:SecureTransport"
            }

          + principals {
              + identifiers = [
                  + "*",
                ]
              + type        = "*"
            }
        }
    }

  # module.storage.data.aws_iam_policy_document.storage_access will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "storage_access" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:DeleteObject",
              + "s3:DeleteObjectTagging",
              + "s3:GetObject",
              + "s3:GetObjectAttributes",
              + "s3:GetObjectTagging",
              + "s3:ListBucket",
              + "s3:PutObject",
              + "s3:PutObjectTagging",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::simpler-grants-gov-api-dev",
              + "arn:aws:s3:::simpler-grants-gov-api-dev/*",
            ]
        }
      + statement {
          + actions   = [
              + "kms:Decrypt",
              + "kms:GenerateDataKey",
            ]
          + effect    = "Allow"
          + resources = [
              + (known after apply),
            ]
        }
    }

  # module.storage.aws_iam_policy.storage_access will be created
  + resource "aws_iam_policy" "storage_access" {
      + arn              = (known after apply)
      + attachment_count = (known after apply)
      + id               = (known after apply)
      + name             = "simpler-grants-gov-api-dev-access"
      + name_prefix      = (known after apply)
      + path             = "/"
      + policy           = (known after apply)
      + policy_id        = (known after apply)
      + tags_all         = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
    }

  # module.storage.aws_kms_key.storage will be created
  + resource "aws_kms_key" "storage" {
      + arn                                = (known after apply)
      + bypass_policy_lockout_safety_check = false
      + customer_master_key_spec           = "SYMMETRIC_DEFAULT"
      + deletion_window_in_days            = 10
      + description                        = "KMS key for bucket simpler-grants-gov-api-dev"
      + enable_key_rotation                = true
      + id                                 = (known after apply)
      + is_enabled                         = true
      + key_id                             = (known after apply)
      + key_usage                          = "ENCRYPT_DECRYPT"
      + multi_region                       = (known after apply)
      + policy                             = (known after apply)
      + rotation_period_in_days            = (known after apply)
      + tags_all                           = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
    }

  # module.storage.aws_s3_bucket.storage will be created
  + resource "aws_s3_bucket" "storage" {
      + acceleration_status         = (known after apply)
      + acl                         = (known after apply)
      + arn                         = (known after apply)
      + bucket                      = "simpler-grants-gov-api-dev"
      + bucket_domain_name          = (known after apply)
      + bucket_prefix               = (known after apply)
      + bucket_regional_domain_name = (known after apply)
      + force_destroy               = false
      + hosted_zone_id              = (known after apply)
      + id                          = (known after apply)
      + object_lock_enabled         = (known after apply)
      + policy                      = (known after apply)
      + region                      = (known after apply)
      + request_payer               = (known after apply)
      + tags_all                    = {
          + "app"                 = "api"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "api-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + website_domain              = (known after apply)
      + website_endpoint            = (known after apply)

      + cors_rule (known after apply)

      + grant (known after apply)

      + lifecycle_rule (known after apply)

      + logging (known after apply)

      + object_lock_configuration (known after apply)

      + replication_configuration (known after apply)

      + server_side_encryption_configuration (known after apply)

      + versioning (known after apply)

      + website (known after apply)
    }

  # module.storage.aws_s3_bucket_lifecycle_configuration.storage will be created
  + resource "aws_s3_bucket_lifecycle_configuration" "storage" {
      + bucket                                 = (known after apply)
      + expected_bucket_owner                  = (known after apply)
      + id                                     = (known after apply)
      + transition_default_minimum_object_size = "all_storage_classes_128K"

      + rule {
          + id     = "AbortIncompleteUpload"
          + prefix = (known after apply)
          + status = "Enabled"

          + abort_incomplete_multipart_upload {
              + days_after_initiation = 7
            }
        }
    }

  # module.storage.aws_s3_bucket_notification.storage will be created
  + resource "aws_s3_bucket_notification" "storage" {
      + bucket      = (known after apply)
      + eventbridge = true
      + id          = (known after apply)
    }

  # module.storage.aws_s3_bucket_policy.storage will be created
  + resource "aws_s3_bucket_policy" "storage" {
      + bucket = (known after apply)
      + id     = (known after apply)
      + policy = (known after apply)
    }

  # module.storage.aws_s3_bucket_public_access_block.storage will be created
  + resource "aws_s3_bucket_public_access_block" "storage" {
      + block_public_acls       = true
      + block_public_policy     = true
      + bucket                  = (known after apply)
      + id                      = (known after apply)
      + ignore_public_acls      = true
      + restrict_public_buckets = true
    }

  # module.storage.aws_s3_bucket_server_side_encryption_configuration.storage will be created
  + resource "aws_s3_bucket_server_side_encryption_configuration" "storage" {
      + bucket = (known after apply)
      + id     = (known after apply)

      + rule {
          + bucket_key_enabled = true

          + apply_server_side_encryption_by_default {
              + kms_master_key_id = (known after apply)
              + sse_algorithm     = "aws:kms"
            }
        }
    }

Plan: 32 to add, 17 to change, 12 to destroy.

Changes to Outputs:
  + migrator_username             = "migrator"
  + pinpoint_app_id               = "26dadc33716449bc8c153ca6ba5a06ed"

Warning: Invalid Attribute Combination

  with module.service.aws_s3_bucket_lifecycle_configuration.access_logs,
  on ../../modules/service/access_logs.tf line 82, in resource "aws_s3_bucket_lifecycle_configuration" "access_logs":
  82:   rule {

No attribute specified when one (and only one) of [rule[0].prefix.<.filter]
is required

This will be an error in a future version of the provider

(and 6 more similar warnings elsewhere)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.

================================================================================
COMPONENT: api/database
================================================================================

module.app_config.data.external.account_ids_by_name: Reading...
module.database.random_id.db_superuser: Refreshing state... [id=Oguh2V71yLjGD6dDISBucQ]
module.search[0].random_password.opensearch_username: Refreshing state... [id=none]
module.search[0].random_password.opensearch_password: Refreshing state... [id=none]
module.search[0].data.archive_file.role_mappings_lambda: Reading...
module.search[0].data.archive_file.role_mappings_lambda: Read complete after 0s [id=aaa3dd3c24603fd7b9bcf230aed4f3d43611e810]
module.app_config.data.external.account_ids_by_name: Read complete after 0s [id=-]
module.database.data.aws_iam_policy_document.role_manager_assume_role: Reading...
data.aws_vpc.network: Reading...
module.database.data.aws_caller_identity.current: Reading...
module.database.data.aws_kms_key.backup_vault_key: Reading...
module.search[0].data.aws_caller_identity.current: Reading...
module.database.data.aws_iam_policy_document.db_backup_policy: Reading...
module.search[0].data.aws_region.current: Reading...
module.database.data.aws_region.current: Reading...
module.database.aws_kms_key.role_manager: Refreshing state... [id=44279d9c-b6f6-42ca-ba99-010b26888696]
module.database.aws_rds_cluster_parameter_group.rds_query_logging: Refreshing state... [id=api-dev-17]
module.search[0].data.aws_region.current: Read complete after 0s [id=us-east-1]
module.database.data.aws_region.current: Read complete after 0s [id=us-east-1]
module.database.data.aws_iam_policy_document.role_manager_assume_role: Read complete after 0s [id=2690255455]
module.database.data.aws_iam_policy_document.db_backup_policy: Read complete after 0s [id=1497918837]
data.aws_caller_identity.current: Reading...
module.database.data.aws_kms_key.default_ssm_key: Reading...
module.database.aws_kms_key.dms_endpoints: Refreshing state... [id=46a4cb8b-906c-463e-ae2e-e840ec0c0eee]
module.search[0].aws_iam_role.role_mappings_lambda: Refreshing state... [id=api-dev-opensearch-role-mappings-role]
module.search[0].data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
module.database.data.aws_iam_policy.lambda_vpc_access: Reading...
module.database.data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
module.database.aws_kms_key.db: Refreshing state... [id=dc43f791-3687-404a-8409-db97f179c26e]
data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
module.database.data.aws_iam_policy_document.rds_enhanced_monitoring: Reading...
module.database.data.aws_iam_policy_document.rds_enhanced_monitoring: Read complete after 0s [id=76086537]
module.database.aws_iam_role.db_backup_role: Refreshing state... [id=api-dev-db-backup-20240131145503288300000001]
module.database.data.aws_kms_key.default_ssm_key: Read complete after 0s [id=838d74b1-f6a8-469b-b8fa-9ebf5f75d67f]
module.database.data.aws_kms_key.backup_vault_key: Read complete after 0s [id=fc09b7a2-be4b-40cf-a259-4ee81bd24693]
module.database.aws_backup_vault.backup_vault: Refreshing state... [id=api-dev-db-backup-vault]
module.database.aws_iam_role.rds_enhanced_monitoring: Refreshing state... [id=api-dev-db-monitor-20240131145503288800000002]
module.search[0].aws_kms_key.opensearch: Refreshing state... [id=42759bc0-95c6-4d5a-9009-9d1529148898]
module.database.aws_iam_role_policy_attachment.db_backup_role_policy_attachment: Refreshing state... [id=api-dev-db-backup-20240131145503288300000001-20240131145503718700000003]
module.search[0].aws_iam_role_policy_attachment.role_mappings_lambda_vpc: Refreshing state... [id=api-dev-opensearch-role-mappings-role/arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole]
module.database.aws_iam_role_policy_attachment.rds_enhanced_monitoring: Refreshing state... [id=api-dev-db-monitor-20240131145503288800000002-20240131145503755300000004]
module.database.aws_backup_plan.backup_plan: Refreshing state... [id=58c3f76d-967c-4bbe-a4e5-1925bad4b02d]
data.aws_vpc.network: Read complete after 1s [id=vpc-08f522c5cc442d126]
data.aws_security_groups.aws_services: Reading...
data.aws_subnets.database: Reading...
module.search[0].data.aws_vpc.vpc: Reading...
module.database.aws_security_group.role_manager: Refreshing state... [id=sg-091fe28a36c46cb9a]
module.search[0].aws_ssm_parameter.opensearch_password: Refreshing state... [id=/search/api-dev/password]
module.search[0].aws_ssm_parameter.opensearch_username: Refreshing state... [id=/search/api-dev/username]
module.database.aws_security_group.db: Refreshing state... [id=sg-0011e7397e1025c78]
module.search[0].aws_kms_alias.opensearch: Refreshing state... [id=alias/search/api-dev]
data.aws_security_groups.aws_services: Read complete after 0s [id=us-east-1]
module.search[0].aws_cloudwatch_log_group.role_mappings_lambda: Refreshing state... [id=/aws/lambda/api-dev-opensearch-role-mappings]
module.search[0].aws_cloudwatch_log_group.opensearch: Refreshing state... [id=opensearch-api-dev20241010075224679200000002]
data.aws_subnets.database: Read complete after 0s [id=us-east-1]
module.database.aws_vpc_security_group_egress_rule.role_manager_egress_to_vpc_endpoints: Refreshing state... [id=sgr-03eaa7688eb5eae58]
module.database.aws_vpc_security_group_ingress_rule.vpc_endpoints_ingress_from_role_manager: Refreshing state... [id=sgr-0dc6bf214cb9b45ce]
module.database.aws_vpc_security_group_egress_rule.egress_to_oracle: Refreshing state... [id=sgr-0220238f2a44b2923]
module.database.aws_vpc_security_group_ingress_rule.ingress_from_oracle: Refreshing state... [id=sgr-0c9c0e684850eebbe]
module.database.aws_vpc_security_group_egress_rule.role_manager_egress_to_db: Refreshing state... [id=sgr-06f8b9f4a4f07f7c0]
module.database.aws_rds_cluster.db: Refreshing state... [id=api-dev]
module.search[0].aws_iam_role_policy.role_mappings_lambda_logs: Refreshing state... [id=api-dev-opensearch-role-mappings-role:api-dev-opensearch-role-mappings-logs]
module.database.aws_vpc_security_group_ingress_rule.db_ingress_from_role_manager: Refreshing state... [id=sgr-0e73077d43c80b868]
module.search[0].data.aws_vpc.vpc: Read complete after 1s [id=vpc-08f522c5cc442d126]
module.search[0].aws_security_group.opensearch: Refreshing state... [id=sg-088fb3ed718ee5f0c]
module.database.data.aws_secretsmanager_secret.db_password: Reading...
module.database.aws_backup_selection.db_backup: Refreshing state... [id=5a9ecf8d-7ab4-4422-87d8-1f4ce3b3816a]
module.database.data.aws_iam_policy_document.app_db_access: Reading...
module.database.data.aws_iam_policy_document.migrator_db_access: Reading...
module.database.aws_rds_cluster_instance.instance[0]: Refreshing state... [id=api-dev-instance-0]
module.database.aws_rds_cluster_instance.instance[1]: Refreshing state... [id=api-dev-instance-1]
module.database.data.aws_iam_policy_document.app_db_access: Read complete after 0s [id=470543145]
module.database.data.aws_iam_policy_document.migrator_db_access: Read complete after 0s [id=206695619]
module.database.aws_iam_policy.migrator_db_access: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-migrator-access]
module.database.aws_iam_policy.app_db_access: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-app-access]
module.search[0].aws_security_group.role_mappings_lambda: Refreshing state... [id=sg-0c6ef91a91b87b641]
module.search[0].aws_opensearch_domain.opensearch: Refreshing state... [id=arn:aws:es:us-east-1:315341936575:domain/api-dev]
module.search[0].aws_security_group_rule.opensearch_from_lambda: Refreshing state... [id=sgrule-2236610217]
module.database.data.aws_secretsmanager_secret.db_password: Read complete after 0s [id=arn:aws:secretsmanager:us-east-1:315341936575:secret:rds!cluster-c91a63ac-db0e-404e-84ce-525d6c841035-rVruEX]
module.database.data.aws_iam_policy.lambda_vpc_access: Read complete after 2s [id=arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole]
module.database.aws_iam_role.role_manager: Refreshing state... [id=api-dev-manager]
module.search[0].aws_opensearch_vpc_endpoint.opensearch: Refreshing state... [id=aos-91d9a5491eae]
module.search[0].aws_ssm_parameter.opensearch_endpoint: Refreshing state... [id=/search/api-dev/endpoint]
module.search[0].aws_iam_policy.opensearch_ingest: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-opensearch-ingest]
module.search[0].aws_lambda_function.role_mappings: Refreshing state... [id=api-dev-opensearch-role-mappings]
module.search[0].aws_opensearch_domain_policy.main: Refreshing state... [id=esd-policy-api-dev]
module.search[0].aws_iam_policy.opensearch_query: Refreshing state... [id=arn:aws:iam::315341936575:policy/api-dev-opensearch-query]
module.database.aws_iam_role_policy.role_manager_access_to_db_password: Refreshing state... [id=api-dev-manager:api-dev-role-manager-ssm-access]
module.database.aws_lambda_function.role_manager: Refreshing state... [id=api-dev-role-manager]
module.search[0].aws_lambda_invocation.configure_role_mappings: Refreshing state... [id=api-dev-opensearch-role-mappings_$LATEST_eea597307522697cae7bc9097a9531f7]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
-/+ destroy and then create replacement
 <= read (data resources)

Terraform will perform the following actions:

  # module.search[0].data.aws_iam_policy_document.iam_access_control will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "iam_access_control" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "es:ESHttpDelete",
              + "es:ESHttpGet",
              + "es:ESHttpHead",
              + "es:ESHttpPost",
              + "es:ESHttpPut",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev",
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
            ]
          + sid       = "IngestRoleAccess"

          + principals {
              + identifiers = [
                  + "arn:aws:iam::315341936575:role/api-dev-migrator",
                ]
              + type        = "AWS"
            }
        }
      + statement {
          + actions   = [
              + "es:ESHttpGet",
              + "es:ESHttpHead",
              + "es:ESHttpPost",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev",
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
            ]
          + sid       = "QueryRoleAccess"

          + principals {
              + identifiers = [
                  + "arn:aws:iam::315341936575:role/api-dev-app",
                ]
              + type        = "AWS"
            }
        }
      + statement {
          + actions   = [
              + "es:ESHttp*",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev",
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
            ]
          + sid       = "SSOAdminAccess"

          + principals {
              + identifiers = [
                  + "arn:aws:iam::315341936575:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_AWSAdministratorAccess_7531ec3bb3ba9352",
                ]
              + type        = "AWS"
            }
        }
      + statement {
          + actions   = [
              + "es:ESHttpGet",
              + "es:ESHttpPost",
              + "es:ESHttpPut",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev/_plugins/_security/*",
            ]
          + sid       = "SecurityAPIAccess"

          + principals {
              + identifiers = [
                  + "*",
                ]
              + type        = "AWS"
            }
        }
    }

  # module.search[0].data.aws_iam_policy_document.opensearch_ingest will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "opensearch_ingest" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "es:ESHttpDelete",
              + "es:ESHttpGet",
              + "es:ESHttpHead",
              + "es:ESHttpPost",
              + "es:ESHttpPut",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev",
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
            ]
          + sid       = "OpenSearchIngestAccess"
        }
    }

  # module.search[0].data.aws_iam_policy_document.opensearch_query will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "opensearch_query" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "es:ESHttpGet",
              + "es:ESHttpHead",
              + "es:ESHttpPost",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev",
              + "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
            ]
          + sid       = "OpenSearchQueryAccess"
        }
    }

  # module.search[0].aws_iam_policy.opensearch_ingest will be updated in-place
  ~ resource "aws_iam_policy" "opensearch_ingest" {
        id               = "arn:aws:iam::315341936575:policy/api-dev-opensearch-ingest"
        name             = "api-dev-opensearch-ingest"
      ~ policy           = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "es:ESHttpPut",
                          - "es:ESHttpPost",
                          - "es:ESHttpHead",
                          - "es:ESHttpGet",
                          - "es:ESHttpDelete",
                        ]
                      - Effect   = "Allow"
                      - Resource = [
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev",
                        ]
                      - Sid      = "OpenSearchIngestAccess"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        tags             = {}
        # (7 unchanged attributes hidden)
    }

  # module.search[0].aws_iam_policy.opensearch_query will be updated in-place
  ~ resource "aws_iam_policy" "opensearch_query" {
        id               = "arn:aws:iam::315341936575:policy/api-dev-opensearch-query"
        name             = "api-dev-opensearch-query"
      ~ policy           = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "es:ESHttpPost",
                          - "es:ESHttpHead",
                          - "es:ESHttpGet",
                        ]
                      - Effect   = "Allow"
                      - Resource = [
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev",
                        ]
                      - Sid      = "OpenSearchQueryAccess"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        tags             = {}
        # (7 unchanged attributes hidden)
    }

  # module.search[0].aws_lambda_invocation.configure_role_mappings must be replaced
-/+ resource "aws_lambda_invocation" "configure_role_mappings" {
      ~ id              = "api-dev-opensearch-role-mappings_$LATEST_eea597307522697cae7bc9097a9531f7" -> (known after apply)
      ~ input           = (sensitive value) # forces replacement
      ~ result          = jsonencode(
            {
              - body       = jsonencode(
                    {
                      - all_access = {
                          - backend_roles = [
                              - "arn:aws:iam::315341936575:role/api-dev-migrator",
                              - "arn:aws:iam::315341936575:role/api-dev-opensearch-write",
                              - "arn:aws:iam::315341936575:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_AWSAdministratorAccess_7531ec3bb3ba9352",
                            ]
                          - response      = jsonencode(
                                {
                                  - message = "'all_access' updated."
                                  - status  = "OK"
                                }
                            )
                          - status        = "updated"
                        }
                      - readall    = {
                          - backend_roles = [
                              - "arn:aws:iam::315341936575:role/api-dev-app",
                            ]
                          - response      = jsonencode(
                                {
                                  - message = "'readall' updated."
                                  - status  = "OK"
                                }
                            )
                          - status        = "updated"
                        }
                    }
                )
              - statusCode = 200
              - success    = true
            }
        ) -> (known after apply)
      ~ triggers        = { # forces replacement
          ~ "ingest_role_arn"  = "arn:aws:iam::315341936575:role/api-dev-opensearch-write" -> "arn:aws:iam::315341936575:role/api-dev-migrator"
            # (3 unchanged elements hidden)
        }
        # (5 unchanged attributes hidden)
    }

  # module.search[0].aws_opensearch_domain.opensearch will be updated in-place
  ~ resource "aws_opensearch_domain" "opensearch" {
        id                                = "arn:aws:es:us-east-1:315341936575:domain/api-dev"
        tags                              = {}
        # (12 unchanged attributes hidden)

      ~ cluster_config {
            # (10 unchanged attributes hidden)

          + zone_awareness_config {
              + availability_zone_count = 3
            }

            # (2 unchanged blocks hidden)
        }

        # (15 unchanged blocks hidden)
    }

  # module.search[0].aws_opensearch_domain_policy.main will be updated in-place
  ~ resource "aws_opensearch_domain_policy" "main" {
      ~ access_policies = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = [
                          - "es:ESHttpPut",
                          - "es:ESHttpPost",
                          - "es:ESHttpHead",
                          - "es:ESHttpGet",
                          - "es:ESHttpDelete",
                        ]
                      - Effect    = "Allow"
                      - Principal = {
                          - AWS = "AROAUS26YC67YSKGYJFID"
                        }
                      - Resource  = [
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev",
                        ]
                      - Sid       = "IngestRoleAccess"
                    },
                  - {
                      - Action    = [
                          - "es:ESHttpPost",
                          - "es:ESHttpHead",
                          - "es:ESHttpGet",
                        ]
                      - Effect    = "Allow"
                      - Principal = {
                          - AWS = "arn:aws:iam::315341936575:role/api-dev-app"
                        }
                      - Resource  = [
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev",
                        ]
                      - Sid       = "QueryRoleAccess"
                    },
                  - {
                      - Action    = "es:ESHttp*"
                      - Effect    = "Allow"
                      - Principal = {
                          - AWS = "arn:aws:iam::315341936575:role/aws-reserved/sso.amazonaws.com/AWSReservedSSO_AWSAdministratorAccess_7531ec3bb3ba9352"
                        }
                      - Resource  = [
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev/*",
                          - "arn:aws:es:us-east-1:315341936575:domain/api-dev",
                        ]
                      - Sid       = "SSOAdminAccess"
                    },
                  - {
                      - Action    = [
                          - "es:ESHttpPut",
                          - "es:ESHttpPost",
                          - "es:ESHttpGet",
                        ]
                      - Effect    = "Allow"
                      - Principal = {
                          - AWS = "*"
                        }
                      - Resource  = "arn:aws:es:us-east-1:315341936575:domain/api-dev/_plugins/_security/*"
                      - Sid       = "SecurityAPIAccess"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        id              = "esd-policy-api-dev"
        # (2 unchanged attributes hidden)
    }

  # module.search[0].aws_security_group_rule.opensearch_from_lambda will be created
  + resource "aws_security_group_rule" "opensearch_from_lambda" {
      + description              = "Allow HTTPS from role mappings Lambda"
      + from_port                = 443
      + id                       = (known after apply)
      + protocol                 = "tcp"
      + region                   = "us-east-1"
      + security_group_id        = "sg-088fb3ed718ee5f0c"
      + security_group_rule_id   = (known after apply)
      + self                     = false
      + source_security_group_id = "sg-0c6ef91a91b87b641"
      + to_port                  = 443
      + type                     = "ingress"
    }

Plan: 2 to add, 4 to change, 1 to destroy.

Warning: Deprecated attribute

  on ../../modules/database/main.tf line 19, in locals:
  19:   db_user_arn_prefix = "arn:aws:rds-db:${data.aws_region.current.name}:${data.aws_caller_identity.current.account_id}:dbuser:${aws_rds_cluster.db.cluster_resource_id}"

The attribute "name" is deprecated. Refer to the provider documentation for
details.

(and 4 more similar warnings elsewhere)

Warning: Argument is deprecated

  with module.database.aws_iam_role.role_manager,
  on ../../modules/database/role_manager.tf line 78, in resource "aws_iam_role" "role_manager":
  78:   managed_policy_arns = [
  79:     data.aws_iam_policy.lambda_vpc_access.arn,
  80:     # Grant the role manager access to the DB as app and migrator users
  81:     # so that it can performance database checks. This is needed by
  82:     # the infra database tests
  83:     aws_iam_policy.app_db_access.arn,
  84:     aws_iam_policy.migrator_db_access.arn
  85:   ]

managed_policy_arns is deprecated. Use the aws_iam_role_policy_attachment
resource instead. If Terraform should exclusively manage all managed policy
attachments (the current behavior of this argument), use the
aws_iam_role_policy_attachments_exclusive resource as well.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.

================================================================================
COMPONENT: networks
================================================================================

module.app_config.data.external.account_ids_by_name: Reading...
module.app_config.data.external.account_ids_by_name: Read complete after 0s [id=-]
module.network.data.aws_availability_zones.available: Reading...
module.network.data.aws_region.current: Reading...
module.network.data.aws_caller_identity.current: Reading...
data.aws_region.current: Reading...
module.network.aws_route_table_association.security_private: Refreshing state... [id=rtbassoc-0839559edb887a0ca]
module.network.aws_route_table_association.security_public: Refreshing state... [id=rtbassoc-0275199245cc0c25f]
module.network.aws_cloudwatch_log_group.flow_log: Refreshing state... [id=vpc-flow-logs-to-cloudwatch20240126190204594100000001]
module.network.aws_subnet.security_private: Refreshing state... [id=subnet-09242086180078c3a]
module.network.aws_vpc_security_group_ingress_rule.vpc_endpoints_ingress_from_vpc_cidr: Refreshing state... [id=sgr-0a68b277b205f7e7c]
module.network.aws_subnet.security_public: Refreshing state... [id=subnet-0cde50d99717ef627]
data.aws_region.current: Read complete after 0s [id=us-east-1]
module.network.data.aws_region.current: Read complete after 0s [id=us-east-1]
module.dms_networking.data.aws_ssm_parameter.dms_peer_vpc_id: Reading...
module.network.data.aws_iam_policy_document.flow_log_cloudwatch_assume_role: Reading...
module.network.data.aws_iam_policy_document.flow_log_cloudwatch_assume_role: Read complete after 0s [id=2717921857]
module.dms_networking.data.aws_ssm_parameter.dms_peer_owner_id: Reading...
module.network.data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
module.network.data.aws_iam_policy_document.vpc_flow_log_cloudwatch: Reading...
module.network.data.aws_iam_policy_document.vpc_flow_log_cloudwatch: Read complete after 0s [id=24122658]
module.network.data.aws_availability_zones.available: Read complete after 0s [id=us-east-1]
module.dms_networking.data.aws_region.current: Reading...
module.dms_networking.data.aws_region.current: Read complete after 0s [id=us-east-1]
module.dms_networking.data.aws_caller_identity.current: Reading...
module.dms_networking.data.aws_ssm_parameter.dms_peer_vpc_id: Read complete after 0s [id=/network/dev/dms/peer-vpc-id]
module.dms_networking.data.aws_ssm_parameter.dms_peer_owner_id: Read complete after 0s [id=/network/dev/dms/peer-owner-id]
module.network.module.aws_vpc.aws_vpc.this[0]: Refreshing state... [id=vpc-08f522c5cc442d126]
module.network.data.aws_vpc_endpoint_service.aws_service["ecr.api"]: Reading...
module.dms_networking.data.aws_caller_identity.current: Read complete after 1s [id=315341936575]
module.network.data.aws_vpc_endpoint_service.aws_service["logs"]: Reading...
module.network.data.aws_vpc_endpoint_service.aws_service["ecr.dkr"]: Reading...
module.network.aws_iam_policy.vpc_flow_log_cloudwatch: Refreshing state... [id=arn:aws:iam::315341936575:policy/vpc-flow-log-cloudwatch-20240126190204597800000003]
module.network.aws_iam_role.vpc_flow_log_cloudwatch: Refreshing state... [id=vpc-flow-log-role-20240126190204597800000002]
module.network.data.aws_vpc_endpoint_service.aws_service["ecr.api"]: Read complete after 1s [id=1808222790]
module.network.data.aws_vpc_endpoint_service.aws_service["ecr.dkr"]: Read complete after 0s [id=1314884315]
module.network.data.aws_vpc_endpoint_service.aws_service["logs"]: Read complete after 0s [id=653499976]
module.network.aws_iam_role_policy_attachment.vpc_flow_log_cloudwatch: Refreshing state... [id=vpc-flow-log-role-20240126190204597800000002-20240126190205762100000006]
module.network.module.aws_vpc.aws_default_security_group.this[0]: Refreshing state... [id=sg-07648e11b9a4aeb4b]
module.dms_networking.data.aws_route_tables.rts: Reading...
module.dms_networking.data.aws_vpc.main: Reading...
module.dms_networking.aws_vpc_peering_connection.dms: Refreshing state... [id=pcx-05af188aad659224e]
module.network.module.aws_vpc.aws_subnet.public[2]: Refreshing state... [id=subnet-07346454cb648bbf7]
module.network.module.aws_vpc.aws_default_route_table.default[0]: Refreshing state... [id=rtb-030ac78294b75356a]
module.network.module.aws_vpc.aws_default_network_acl.this[0]: Refreshing state... [id=acl-0411123e1a3e4edc1]
module.network.module.aws_vpc.aws_subnet.public[0]: Refreshing state... [id=subnet-05b5e5c01ebc7604b]
module.network.module.aws_vpc.aws_subnet.public[1]: Refreshing state... [id=subnet-08d867e8473b2a90c]
module.network.aws_security_group.aws_services: Refreshing state... [id=sg-04f1cbb9af90e474e]
module.dms_networking.data.aws_route_tables.rts: Read complete after 0s [id=us-east-1]
module.network.module.aws_vpc.aws_route_table.public[0]: Refreshing state... [id=rtb-0e2acaf9fbd50158c]
module.network.module.aws_vpc.aws_internet_gateway.this[0]: Refreshing state... [id=igw-09306e431523050b5]
module.network.module.aws_vpc.aws_subnet.database[0]: Refreshing state... [id=subnet-0f0256a1db5f6153e]
module.network.module.aws_vpc.aws_subnet.database[1]: Refreshing state... [id=subnet-00494a7cd1713edc7]
module.network.module.aws_vpc.aws_subnet.database[2]: Refreshing state... [id=subnet-0e00674c7ae0f91df]
module.network.module.aws_vpc.aws_route_table.private[0]: Refreshing state... [id=rtb-07b647dcec4b15868]
module.network.module.aws_vpc.aws_route_table.private[1]: Refreshing state... [id=rtb-0c2ef476b6761bfc9]
module.network.module.aws_vpc.aws_route_table.private[2]: Refreshing state... [id=rtb-02341a2c0313abe34]
module.network.module.aws_vpc.aws_subnet.private[1]: Refreshing state... [id=subnet-019f469ba97dc6ec7]
module.network.module.aws_vpc.aws_subnet.private[2]: Refreshing state... [id=subnet-068ede7dcfd9469ab]
module.network.module.aws_vpc.aws_subnet.private[0]: Refreshing state... [id=subnet-0a5ea667d3751639f]
module.network.module.aws_vpc.aws_egress_only_internet_gateway.this[0]: Refreshing state... [id=eigw-0d007c5286f11b757]
module.dms_networking.aws_route.dms["rtb-02341a2c0313abe34"]: Refreshing state... [id=r-rtb-02341a2c0313abe343548427919]
module.dms_networking.aws_route.dms["rtb-07b647dcec4b15868"]: Refreshing state... [id=r-rtb-07b647dcec4b158683548427919]
module.dms_networking.aws_route.dms["rtb-0e2acaf9fbd50158c"]: Refreshing state... [id=r-rtb-0e2acaf9fbd50158c3548427919]
module.dms_networking.aws_route.dms["rtb-0c2ef476b6761bfc9"]: Refreshing state... [id=r-rtb-0c2ef476b6761bfc93548427919]
module.dms_networking.aws_route.dms["rtb-030ac78294b75356a"]: Refreshing state... [id=r-rtb-030ac78294b75356a3548427919]
module.network.module.aws_vpc.aws_route_table_association.public[0]: Refreshing state... [id=rtbassoc-0514e1523d96263a4]
module.network.module.aws_vpc.aws_route_table_association.public[1]: Refreshing state... [id=rtbassoc-0a6bd1fb7bdaeba54]
module.network.module.aws_vpc.aws_route_table_association.public[2]: Refreshing state... [id=rtbassoc-0f4e3eb7ae372e180]
module.network.module.aws_vpc.aws_route.public_internet_gateway_ipv6[0]: Refreshing state... [id=r-rtb-0e2acaf9fbd50158c2750132062]
module.network.module.aws_vpc.aws_eip.nat[2]: Refreshing state... [id=eipalloc-0dd527070799c47dd]
module.network.module.aws_vpc.aws_eip.nat[0]: Refreshing state... [id=eipalloc-0e29a09c914a4918a]
module.network.module.aws_vpc.aws_eip.nat[1]: Refreshing state... [id=eipalloc-0769d1bf73119bad2]
module.network.module.aws_vpc.aws_route.public_internet_gateway[0]: Refreshing state... [id=r-rtb-0e2acaf9fbd50158c1080289494]
module.network.module.aws_vpc.aws_flow_log.this[0]: Refreshing state... [id=fl-094e7967ecca70a4b]
module.network.module.aws_vpc.aws_db_subnet_group.database[0]: Refreshing state... [id=dev]
module.network.module.aws_vpc.aws_route_table_association.database[2]: Refreshing state... [id=rtbassoc-05c13b16000a8603a]
module.network.module.aws_vpc.aws_route_table_association.database[0]: Refreshing state... [id=rtbassoc-021586261212049d1]
module.network.module.aws_vpc.aws_route_table_association.database[1]: Refreshing state... [id=rtbassoc-0c2a4b0bf8d979478]
module.network.module.aws_vpc.aws_route.private_ipv6_egress[2]: Refreshing state... [id=r-rtb-02341a2c0313abe342750132062]
module.network.module.aws_vpc.aws_route.private_ipv6_egress[0]: Refreshing state... [id=r-rtb-07b647dcec4b158682750132062]
module.network.module.aws_vpc.aws_route.private_ipv6_egress[1]: Refreshing state... [id=r-rtb-0c2ef476b6761bfc92750132062]
module.network.module.aws_vpc.aws_route_table_association.private[2]: Refreshing state... [id=rtbassoc-0f6d7ff9f728a102a]
module.network.module.aws_vpc.aws_route_table_association.private[0]: Refreshing state... [id=rtbassoc-0c977c4466ad13f86]
module.network.module.aws_vpc.aws_route_table_association.private[1]: Refreshing state... [id=rtbassoc-0f3c6fa39d9d92c27]
module.dms_networking.data.aws_vpc.main: Read complete after 1s [id=vpc-08f522c5cc442d126]
module.network.data.aws_subnet.private[0]: Reading...
module.network.data.aws_subnet.private[1]: Reading...
module.network.data.aws_subnet.private[2]: Reading...
module.network.aws_vpc_endpoint.gateway["s3"]: Refreshing state... [id=vpce-03b40227fe9f27c6f]
module.network.module.aws_vpc.aws_nat_gateway.this[0]: Refreshing state... [id=nat-03203e04c51fddb01]
module.network.module.aws_vpc.aws_nat_gateway.this[2]: Refreshing state... [id=nat-063ce48aeefbab0cc]
module.network.module.aws_vpc.aws_nat_gateway.this[1]: Refreshing state... [id=nat-0674be81f63202645]
module.network.data.aws_subnet.private[1]: Read complete after 0s [id=subnet-019f469ba97dc6ec7]
module.network.data.aws_subnet.private[0]: Read complete after 0s [id=subnet-0a5ea667d3751639f]
module.network.data.aws_subnet.private[2]: Read complete after 0s [id=subnet-068ede7dcfd9469ab]
module.network.aws_vpc_endpoint.interface["ssm"]: Refreshing state... [id=vpce-08774bce56ccc601d]
module.network.aws_vpc_endpoint.interface["logs"]: Refreshing state... [id=vpce-0b4ee53a275106e9c]
module.network.aws_vpc_endpoint.interface["ecr.api"]: Refreshing state... [id=vpce-06c6116ba7eddcc18]
module.network.aws_vpc_endpoint.interface["kms"]: Refreshing state... [id=vpce-070949444aaf29b67]
module.network.aws_vpc_endpoint.interface["ecr.dkr"]: Refreshing state... [id=vpce-09df2c96911bf38ce]
module.network.aws_vpc_endpoint.interface["ec2"]: Refreshing state... [id=vpce-06ec07d04d72d2700]
module.network.aws_vpc_endpoint.interface["secretsmanager"]: Refreshing state... [id=vpce-0bda8abf69d4aa6ce]
module.network.module.aws_vpc.aws_route.private_nat_gateway[0]: Refreshing state... [id=r-rtb-07b647dcec4b158681080289494]
module.network.module.aws_vpc.aws_route.private_nat_gateway[2]: Refreshing state... [id=r-rtb-02341a2c0313abe341080289494]
module.network.module.aws_vpc.aws_route.private_nat_gateway[1]: Refreshing state... [id=r-rtb-0c2ef476b6761bfc91080289494]
module.network.module.aws_vpc.aws_route.private_dns64_nat_gateway[1]: Refreshing state... [id=r-rtb-0c2ef476b6761bfc92696003898]
module.network.module.aws_vpc.aws_route.private_dns64_nat_gateway[2]: Refreshing state... [id=r-rtb-02341a2c0313abe342696003898]
module.network.module.aws_vpc.aws_route.private_dns64_nat_gateway[0]: Refreshing state... [id=r-rtb-07b647dcec4b158682696003898]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
  - destroy
 <= read (data resources)

Terraform will perform the following actions:

  # module.network.data.aws_iam_policy_document.waf_logs will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "waf_logs" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)
      + version       = "2012-10-17"

      + statement {
          + actions   = [
              + "logs:CreateLogStream",
              + "logs:PutLogEvents",
            ]
          + effect    = "Allow"
          + resources = [
              + (known after apply),
            ]

          + condition {
              + test     = "ArnLike"
              + values   = [
                  + "arn:aws:logs:us-east-1:315341936575:*",
                ]
              + variable = "aws:SourceArn"
            }
          + condition {
              + test     = "StringEquals"
              + values   = [
                  + "315341936575",
                ]
              + variable = "aws:SourceAccount"
            }

          + principals {
              + identifiers = [
                  + "delivery.logs.amazonaws.com",
                ]
              + type        = "Service"
            }
        }
    }

  # module.network.aws_cloudwatch_log_group.waf_logs will be created
  + resource "aws_cloudwatch_log_group" "waf_logs" {
      + arn               = (known after apply)
      + id                = (known after apply)
      + log_group_class   = (known after apply)
      + name              = "aws-waf-logs-dev"
      + name_prefix       = (known after apply)
      + retention_in_days = 365
      + skip_destroy      = false
      + tags_all          = {
          + "description"         = "VPC resources"
          + "network_name"        = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
    }

  # module.network.aws_cloudwatch_log_resource_policy.waf_logs will be created
  + resource "aws_cloudwatch_log_resource_policy" "waf_logs" {
      + id              = (known after apply)
      + policy_document = (known after apply)
      + policy_name     = "webacl-policy-uniq-name"
    }

  # module.network.aws_route_table_association.security_private will be destroyed
  # (because aws_route_table_association.security_private is not in configuration)
  - resource "aws_route_table_association" "security_private" {
      - id             = "rtbassoc-0839559edb887a0ca" -> null
      - route_table_id = "rtb-07b647dcec4b15868" -> null
      - subnet_id      = "subnet-09242086180078c3a" -> null
        # (1 unchanged attribute hidden)
    }

  # module.network.aws_route_table_association.security_public will be destroyed
  # (because aws_route_table_association.security_public is not in configuration)
  - resource "aws_route_table_association" "security_public" {
      - id             = "rtbassoc-0275199245cc0c25f" -> null
      - route_table_id = "rtb-0e2acaf9fbd50158c" -> null
      - subnet_id      = "subnet-0cde50d99717ef627" -> null
        # (1 unchanged attribute hidden)
    }

  # module.network.aws_subnet.security_private will be destroyed
  # (because aws_subnet.security_private is not in configuration)
  - resource "aws_subnet" "security_private" {
      - arn                                            = "arn:aws:ec2:us-east-1:315341936575:subnet/subnet-09242086180078c3a" -> null
      - assign_ipv6_address_on_creation                = false -> null
      - availability_zone                              = "us-east-1a" -> null
      - availability_zone_id                           = "use1-az2" -> null
      - cidr_block                                     = "10.0.15.0/24" -> null
      - enable_dns64                                   = false -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = false -> null
      - id                                             = "subnet-09242086180078c3a" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = false -> null
      - owner_id                                       = "315341936575" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "Name"        = "dev-security-private"
          - "subnet_type" = "security-private"
        } -> null
      - tags_all                                       = {
          - "Name"                = "dev-security-private"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "subnet_type"         = "security-private"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_id                                         = "vpc-08f522c5cc442d126" -> null
        # (4 unchanged attributes hidden)
    }

  # module.network.aws_subnet.security_public will be destroyed
  # (because aws_subnet.security_public is not in configuration)
  - resource "aws_subnet" "security_public" {
      - arn                                            = "arn:aws:ec2:us-east-1:315341936575:subnet/subnet-0cde50d99717ef627" -> null
      - assign_ipv6_address_on_creation                = false -> null
      - availability_zone                              = "us-east-1a" -> null
      - availability_zone_id                           = "use1-az2" -> null
      - cidr_block                                     = "10.0.14.0/24" -> null
      - enable_dns64                                   = false -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = false -> null
      - id                                             = "subnet-0cde50d99717ef627" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = false -> null
      - owner_id                                       = "315341936575" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "Name"        = "dev-security-public"
          - "subnet_type" = "security-public"
        } -> null
      - tags_all                                       = {
          - "Name"                = "dev-security-public"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "subnet_type"         = "security-public"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_id                                         = "vpc-08f522c5cc442d126" -> null
        # (4 unchanged attributes hidden)
    }

  # module.network.aws_vpc_endpoint.interface["ec2"] will be destroyed
  # (because key ["ec2"] is not in for_each map)
  - resource "aws_vpc_endpoint" "interface" {
      - arn                   = "arn:aws:ec2:us-east-1:315341936575:vpc-endpoint/vpce-06ec07d04d72d2700" -> null
      - cidr_blocks           = [] -> null
      - dns_entry             = [
          - {
              - dns_name       = "vpce-06ec07d04d72d2700-flty53sz.ec2.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-06ec07d04d72d2700-flty53sz-us-east-1c.ec2.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-06ec07d04d72d2700-flty53sz-us-east-1a.ec2.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-06ec07d04d72d2700-flty53sz-us-east-1b.ec2.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "ec2.us-east-1.amazonaws.com"
              - hosted_zone_id = "Z0346262GMJEJ93R40OB"
            },
          - {
              - dns_name       = "ec2.us-east-1.api.aws"
              - hosted_zone_id = "Z034413320HJU4BEHLQ2Q"
            },
        ] -> null
      - id                    = "vpce-06ec07d04d72d2700" -> null
      - ip_address_type       = "ipv4" -> null
      - network_interface_ids = [
          - "eni-052583e0cf2ccab50",
          - "eni-05b516c873203f44c",
          - "eni-094f1150b9100208a",
        ] -> null
      - owner_id              = "315341936575" -> null
      - policy                = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "*"
                      - Effect    = "Allow"
                      - Principal = "*"
                      - Resource  = "*"
                    },
                ]
            }
        ) -> null
      - private_dns_enabled   = true -> null
      - requester_managed     = false -> null
      - route_table_ids       = [] -> null
      - security_group_ids    = [
          - "sg-04f1cbb9af90e474e",
        ] -> null
      - service_name          = "com.amazonaws.us-east-1.ec2" -> null
      - state                 = "available" -> null
      - subnet_ids            = [
          - "subnet-019f469ba97dc6ec7",
          - "subnet-068ede7dcfd9469ab",
          - "subnet-0a5ea667d3751639f",
        ] -> null
      - tags                  = {} -> null
      - tags_all              = {
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_endpoint_type     = "Interface" -> null
      - vpc_id                = "vpc-08f522c5cc442d126" -> null

      - dns_options {
          - dns_record_ip_type                             = "ipv4" -> null
          - private_dns_only_for_inbound_resolver_endpoint = false -> null
        }

      - subnet_configuration {
          - ipv4      = "10.0.0.29" -> null
          - subnet_id = "subnet-0a5ea667d3751639f" -> null
            # (1 unchanged attribute hidden)
        }
      - subnet_configuration {
          - ipv4      = "10.0.1.59" -> null
          - subnet_id = "subnet-019f469ba97dc6ec7" -> null
            # (1 unchanged attribute hidden)
        }
      - subnet_configuration {
          - ipv4      = "10.0.2.64" -> null
          - subnet_id = "subnet-068ede7dcfd9469ab" -> null
            # (1 unchanged attribute hidden)
        }
    }

  # module.network.aws_vpc_endpoint.interface["kms"] will be destroyed
  # (because key ["kms"] is not in for_each map)
  - resource "aws_vpc_endpoint" "interface" {
      - arn                   = "arn:aws:ec2:us-east-1:315341936575:vpc-endpoint/vpce-070949444aaf29b67" -> null
      - cidr_blocks           = [] -> null
      - dns_entry             = [
          - {
              - dns_name       = "vpce-070949444aaf29b67-f2ypt5oc.kms.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-070949444aaf29b67-f2ypt5oc-us-east-1a.kms.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-070949444aaf29b67-f2ypt5oc-us-east-1c.kms.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-070949444aaf29b67-f2ypt5oc-us-east-1b.kms.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "kms.us-east-1.amazonaws.com"
              - hosted_zone_id = "Z06845272B5XLPZ5K69GZ"
            },
          - {
              - dns_name       = "kms.us-east-1.api.aws"
              - hosted_zone_id = "Z0083818EOZOR2N1JQLK"
            },
        ] -> null
      - id                    = "vpce-070949444aaf29b67" -> null
      - ip_address_type       = "ipv4" -> null
      - network_interface_ids = [
          - "eni-093f5861ae904a802",
          - "eni-0a268241bff9d9def",
          - "eni-0c55d51ab2f8ca7b4",
        ] -> null
      - owner_id              = "315341936575" -> null
      - policy                = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "*"
                      - Effect    = "Allow"
                      - Principal = "*"
                      - Resource  = "*"
                    },
                ]
            }
        ) -> null
      - private_dns_enabled   = true -> null
      - requester_managed     = false -> null
      - route_table_ids       = [] -> null
      - security_group_ids    = [
          - "sg-04f1cbb9af90e474e",
        ] -> null
      - service_name          = "com.amazonaws.us-east-1.kms" -> null
      - state                 = "available" -> null
      - subnet_ids            = [
          - "subnet-019f469ba97dc6ec7",
          - "subnet-068ede7dcfd9469ab",
          - "subnet-0a5ea667d3751639f",
        ] -> null
      - tags                  = {} -> null
      - tags_all              = {
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_endpoint_type     = "Interface" -> null
      - vpc_id                = "vpc-08f522c5cc442d126" -> null

      - dns_options {
          - dns_record_ip_type                             = "ipv4" -> null
          - private_dns_only_for_inbound_resolver_endpoint = false -> null
        }

      - subnet_configuration {
          - ipv4      = "10.0.0.132" -> null
          - subnet_id = "subnet-0a5ea667d3751639f" -> null
            # (1 unchanged attribute hidden)
        }
      - subnet_configuration {
          - ipv4      = "10.0.1.56" -> null
          - subnet_id = "subnet-019f469ba97dc6ec7" -> null
            # (1 unchanged attribute hidden)
        }
      - subnet_configuration {
          - ipv4      = "10.0.2.213" -> null
          - subnet_id = "subnet-068ede7dcfd9469ab" -> null
            # (1 unchanged attribute hidden)
        }
    }

  # module.network.aws_vpc_endpoint.interface["secretsmanager"] will be destroyed
  # (because key ["secretsmanager"] is not in for_each map)
  - resource "aws_vpc_endpoint" "interface" {
      - arn                   = "arn:aws:ec2:us-east-1:315341936575:vpc-endpoint/vpce-0bda8abf69d4aa6ce" -> null
      - cidr_blocks           = [] -> null
      - dns_entry             = [
          - {
              - dns_name       = "vpce-0bda8abf69d4aa6ce-o90xzz1q.secretsmanager.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-0bda8abf69d4aa6ce-o90xzz1q-us-east-1a.secretsmanager.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-0bda8abf69d4aa6ce-o90xzz1q-us-east-1c.secretsmanager.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-0bda8abf69d4aa6ce-o90xzz1q-us-east-1b.secretsmanager.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "secretsmanager.us-east-1.amazonaws.com"
              - hosted_zone_id = "Z028893238MWTVCM9PCA6"
            },
        ] -> null
      - id                    = "vpce-0bda8abf69d4aa6ce" -> null
      - ip_address_type       = "ipv4" -> null
      - network_interface_ids = [
          - "eni-03fe956c6e2b4c58d",
          - "eni-0b8194de07cfaa1d1",
          - "eni-0e486e7a968e3dde7",
        ] -> null
      - owner_id              = "315341936575" -> null
      - policy                = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "*"
                      - Effect    = "Allow"
                      - Principal = "*"
                      - Resource  = "*"
                    },
                ]
            }
        ) -> null
      - private_dns_enabled   = true -> null
      - requester_managed     = false -> null
      - route_table_ids       = [] -> null
      - security_group_ids    = [
          - "sg-04f1cbb9af90e474e",
        ] -> null
      - service_name          = "com.amazonaws.us-east-1.secretsmanager" -> null
      - state                 = "available" -> null
      - subnet_ids            = [
          - "subnet-019f469ba97dc6ec7",
          - "subnet-068ede7dcfd9469ab",
          - "subnet-0a5ea667d3751639f",
        ] -> null
      - tags                  = {} -> null
      - tags_all              = {
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_endpoint_type     = "Interface" -> null
      - vpc_id                = "vpc-08f522c5cc442d126" -> null

      - dns_options {
          - dns_record_ip_type                             = "ipv4" -> null
          - private_dns_only_for_inbound_resolver_endpoint = false -> null
        }

      - subnet_configuration {
          - ipv4      = "10.0.0.147" -> null
          - subnet_id = "subnet-0a5ea667d3751639f" -> null
            # (1 unchanged attribute hidden)
        }
      - subnet_configuration {
          - ipv4      = "10.0.1.173" -> null
          - subnet_id = "subnet-019f469ba97dc6ec7" -> null
            # (1 unchanged attribute hidden)
        }
      - subnet_configuration {
          - ipv4      = "10.0.2.155" -> null
          - subnet_id = "subnet-068ede7dcfd9469ab" -> null
            # (1 unchanged attribute hidden)
        }
    }

  # module.network.aws_vpc_endpoint.interface["ssm"] will be destroyed
  # (because key ["ssm"] is not in for_each map)
  - resource "aws_vpc_endpoint" "interface" {
      - arn                   = "arn:aws:ec2:us-east-1:315341936575:vpc-endpoint/vpce-08774bce56ccc601d" -> null
      - cidr_blocks           = [] -> null
      - dns_entry             = [
          - {
              - dns_name       = "vpce-08774bce56ccc601d-d01xsrh5.ssm.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-08774bce56ccc601d-d01xsrh5-us-east-1b.ssm.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-08774bce56ccc601d-d01xsrh5-us-east-1a.ssm.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "vpce-08774bce56ccc601d-d01xsrh5-us-east-1c.ssm.us-east-1.vpce.amazonaws.com"
              - hosted_zone_id = "Z7HUB22UULQXV"
            },
          - {
              - dns_name       = "ssm.us-east-1.amazonaws.com"
              - hosted_zone_id = "Z085855166BFWQ47CWUI"
            },
          - {
              - dns_name       = "ssm.us-east-1.api.aws"
              - hosted_zone_id = "Z0276064VPORHJYIZCY7"
            },
        ] -> null
      - id                    = "vpce-08774bce56ccc601d" -> null
      - ip_address_type       = "ipv4" -> null
      - network_interface_ids = [
          - "eni-09b2bbb26b7acd46a",
          - "eni-0df3ecf413fa7781a",
          - "eni-0f05c6c699306894d",
        ] -> null
      - owner_id              = "315341936575" -> null
      - policy                = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "*"
                      - Effect    = "Allow"
                      - Principal = "*"
                      - Resource  = "*"
                    },
                ]
            }
        ) -> null
      - private_dns_enabled   = true -> null
      - requester_managed     = false -> null
      - route_table_ids       = [] -> null
      - security_group_ids    = [
          - "sg-04f1cbb9af90e474e",
        ] -> null
      - service_name          = "com.amazonaws.us-east-1.ssm" -> null
      - state                 = "available" -> null
      - subnet_ids            = [
          - "subnet-019f469ba97dc6ec7",
          - "subnet-068ede7dcfd9469ab",
          - "subnet-0a5ea667d3751639f",
        ] -> null
      - tags                  = {} -> null
      - tags_all              = {
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_endpoint_type     = "Interface" -> null
      - vpc_id                = "vpc-08f522c5cc442d126" -> null

      - dns_options {
          - dns_record_ip_type                             = "ipv4" -> null
          - private_dns_only_for_inbound_resolver_endpoint = false -> null
        }

      - subnet_configuration {
          - ipv4      = "10.0.0.206" -> null
          - subnet_id = "subnet-0a5ea667d3751639f" -> null
            # (1 unchanged attribute hidden)
        }
      - subnet_configuration {
          - ipv4      = "10.0.1.241" -> null
          - subnet_id = "subnet-019f469ba97dc6ec7" -> null
            # (1 unchanged attribute hidden)
        }
      - subnet_configuration {
          - ipv4      = "10.0.2.129" -> null
          - subnet_id = "subnet-068ede7dcfd9469ab" -> null
            # (1 unchanged attribute hidden)
        }
    }

  # module.network.aws_vpc_security_group_ingress_rule.vpc_endpoints_ingress_from_vpc_cidr will be destroyed
  # (because aws_vpc_security_group_ingress_rule.vpc_endpoints_ingress_from_vpc_cidr is not in configuration)
  - resource "aws_vpc_security_group_ingress_rule" "vpc_endpoints_ingress_from_vpc_cidr" {
      - arn                    = "arn:aws:ec2:us-east-1:315341936575:security-group-rule/sgr-0a68b277b205f7e7c" -> null
      - cidr_ipv4              = "10.0.0.0/20" -> null
      - description            = "Allow inbound requests to VPC endpoints from the VPC cidr block" -> null
      - from_port              = 443 -> null
      - id                     = "sgr-0a68b277b205f7e7c" -> null
      - ip_protocol            = "tcp" -> null
      - security_group_id      = "sg-04f1cbb9af90e474e" -> null
      - security_group_rule_id = "sgr-0a68b277b205f7e7c" -> null
      - tags_all               = {
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - to_port                = 443 -> null
    }

  # module.network.aws_wafv2_web_acl.main will be created
  + resource "aws_wafv2_web_acl" "main" {
      + application_integration_url = (known after apply)
      + arn                         = (known after apply)
      + capacity                    = (known after apply)
      + description                 = "WAF to protect application load balancers in the dev network"
      + id                          = (known after apply)
      + lock_token                  = (known after apply)
      + name                        = "dev"
      + scope                       = "REGIONAL"
      + tags                        = {
          + "Name" = "dev"
        }
      + tags_all                    = {
          + "Name"                = "dev"
          + "description"         = "VPC resources"
          + "network_name"        = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }

      + default_action {
          + allow {
            }
        }

      + rule {
          + name     = "AWS-AWSManagedRulesCommonRuleSet"
          + priority = 1

          + override_action {
              + none {}
            }

          + statement {
              + managed_rule_group_statement {
                  + name        = "AWSManagedRulesCommonRuleSet"
                  + vendor_name = "AWS"
                    # (1 unchanged attribute hidden)
                }
            }

          + visibility_config {
              + cloudwatch_metrics_enabled = true
              + metric_name                = "AWS-AWSManagedRulesCommonRuleSet"
              + sampled_requests_enabled   = true
            }
        }
      + rule {
          + name     = "AWS-AWSManagedRulesKnownBadInputsRuleSet"
          + priority = 2

          + override_action {
              + none {}
            }

          + statement {
              + managed_rule_group_statement {
                  + name        = "AWSManagedRulesKnownBadInputsRuleSet"
                  + vendor_name = "AWS"
                    # (1 unchanged attribute hidden)
                }
            }

          + visibility_config {
              + cloudwatch_metrics_enabled = true
              + metric_name                = "AWS-AWSManagedRulesKnownBadInputsRuleSet"
              + sampled_requests_enabled   = true
            }
        }

      + visibility_config {
          + cloudwatch_metrics_enabled = true
          + metric_name                = "dev-waf"
          + sampled_requests_enabled   = true
        }
    }

  # module.network.aws_wafv2_web_acl_logging_configuration.waf_logs will be created
  + resource "aws_wafv2_web_acl_logging_configuration" "waf_logs" {
      + id                      = (known after apply)
      + log_destination_configs = (known after apply)
      + resource_arn            = (known after apply)
    }

  # module.network.module.aws_vpc.aws_db_subnet_group.database[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_db_subnet_group" "database" {
      - arn                     = "arn:aws:rds:us-east-1:315341936575:subgrp:dev" -> null
      - description             = "Database subnet group for dev" -> null
      - id                      = "dev" -> null
      - name                    = "dev" -> null
      - subnet_ids              = [
          - "subnet-00494a7cd1713edc7",
          - "subnet-0e00674c7ae0f91df",
          - "subnet-0f0256a1db5f6153e",
        ] -> null
      - supported_network_types = [
          - "DUAL",
          - "IPV4",
        ] -> null
      - tags                    = {
          - "Name" = "dev"
        } -> null
      - tags_all                = {
          - "Name"                = "dev"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_id                  = "vpc-08f522c5cc442d126" -> null
        # (1 unchanged attribute hidden)
    }

  # module.network.module.aws_vpc.aws_egress_only_internet_gateway.this[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_egress_only_internet_gateway" "this" {
      - id       = "eigw-0d007c5286f11b757" -> null
      - tags     = {
          - "Name" = "dev"
        } -> null
      - tags_all = {
          - "Name"                = "dev"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_id   = "vpc-08f522c5cc442d126" -> null
    }

  # module.network.module.aws_vpc.aws_eip.nat[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_eip" "nat" {
      - allocation_id            = "eipalloc-0e29a09c914a4918a" -> null
      - arn                      = "arn:aws:ec2:us-east-1:315341936575:elastic-ip/eipalloc-0e29a09c914a4918a" -> null
      - association_id           = "eipassoc-02491f04ac2ae8b50" -> null
      - domain                   = "vpc" -> null
      - id                       = "eipalloc-0e29a09c914a4918a" -> null
      - network_border_group     = "us-east-1" -> null
      - network_interface        = "eni-0aae3a60a35a8d797" -> null
      - private_dns              = "ip-10-0-10-152.ec2.internal" -> null
      - private_ip               = "10.0.10.152" -> null
      - public_dns               = "ec2-3-224-241-123.compute-1.amazonaws.com" -> null
      - public_ip                = "3.224.241.123" -> null
      - public_ipv4_pool         = "amazon" -> null
      - tags                     = {
          - "Name" = "dev-us-east-1a"
        } -> null
      - tags_all                 = {
          - "Name"                = "dev-us-east-1a"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc                      = true -> null
        # (5 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_eip.nat[1] will be destroyed
  # (because index [1] is out of range for count)
  - resource "aws_eip" "nat" {
      - allocation_id            = "eipalloc-0769d1bf73119bad2" -> null
      - arn                      = "arn:aws:ec2:us-east-1:315341936575:elastic-ip/eipalloc-0769d1bf73119bad2" -> null
      - association_id           = "eipassoc-0a510ffa343da079a" -> null
      - domain                   = "vpc" -> null
      - id                       = "eipalloc-0769d1bf73119bad2" -> null
      - network_border_group     = "us-east-1" -> null
      - network_interface        = "eni-0df9113e5116be0cf" -> null
      - private_dns              = "ip-10-0-11-49.ec2.internal" -> null
      - private_ip               = "10.0.11.49" -> null
      - public_dns               = "ec2-3-217-176-107.compute-1.amazonaws.com" -> null
      - public_ip                = "3.217.176.107" -> null
      - public_ipv4_pool         = "amazon" -> null
      - tags                     = {
          - "Name" = "dev-us-east-1b"
        } -> null
      - tags_all                 = {
          - "Name"                = "dev-us-east-1b"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc                      = true -> null
        # (5 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_eip.nat[2] will be destroyed
  # (because index [2] is out of range for count)
  - resource "aws_eip" "nat" {
      - allocation_id            = "eipalloc-0dd527070799c47dd" -> null
      - arn                      = "arn:aws:ec2:us-east-1:315341936575:elastic-ip/eipalloc-0dd527070799c47dd" -> null
      - association_id           = "eipassoc-0da2968b883382bfd" -> null
      - domain                   = "vpc" -> null
      - id                       = "eipalloc-0dd527070799c47dd" -> null
      - network_border_group     = "us-east-1" -> null
      - network_interface        = "eni-035d6eeb0ed724441" -> null
      - private_dns              = "ip-10-0-12-175.ec2.internal" -> null
      - private_ip               = "10.0.12.175" -> null
      - public_dns               = "ec2-18-215-224-7.compute-1.amazonaws.com" -> null
      - public_ip                = "18.215.224.7" -> null
      - public_ipv4_pool         = "amazon" -> null
      - tags                     = {
          - "Name" = "dev-us-east-1c"
        } -> null
      - tags_all                 = {
          - "Name"                = "dev-us-east-1c"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc                      = true -> null
        # (5 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_flow_log.this[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_flow_log" "this" {
      - arn                        = "arn:aws:ec2:us-east-1:315341936575:vpc-flow-log/fl-094e7967ecca70a4b" -> null
      - iam_role_arn               = "arn:aws:iam::315341936575:role/vpc-flow-log-role-20240126190204597800000002" -> null
      - id                         = "fl-094e7967ecca70a4b" -> null
      - log_destination            = "arn:aws:logs:us-east-1:315341936575:log-group:vpc-flow-logs-to-cloudwatch20240126190204594100000001" -> null
      - log_destination_type       = "cloud-watch-logs" -> null
      - log_format                 = "${version} ${account-id} ${interface-id} ${srcaddr} ${dstaddr} ${srcport} ${dstport} ${protocol} ${packets} ${bytes} ${start} ${end} ${action} ${log-status}" -> null
      - log_group_name             = "vpc-flow-logs-to-cloudwatch20240126190204594100000001" -> null
      - max_aggregation_interval   = 600 -> null
      - tags                       = {} -> null
      - tags_all                   = {
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - traffic_type               = "ALL" -> null
      - vpc_id                     = "vpc-08f522c5cc442d126" -> null
        # (1 unchanged attribute hidden)
    }

  # module.network.module.aws_vpc.aws_nat_gateway.this[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_nat_gateway" "this" {
      - allocation_id                      = "eipalloc-0e29a09c914a4918a" -> null
      - association_id                     = "eipassoc-02491f04ac2ae8b50" -> null
      - connectivity_type                  = "public" -> null
      - id                                 = "nat-03203e04c51fddb01" -> null
      - network_interface_id               = "eni-0aae3a60a35a8d797" -> null
      - private_ip                         = "10.0.10.152" -> null
      - public_ip                          = "3.224.241.123" -> null
      - secondary_allocation_ids           = [] -> null
      - secondary_private_ip_address_count = 0 -> null
      - secondary_private_ip_addresses     = [] -> null
      - subnet_id                          = "subnet-05b5e5c01ebc7604b" -> null
      - tags                               = {
          - "Name" = "dev-us-east-1a"
        } -> null
      - tags_all                           = {
          - "Name"                = "dev-us-east-1a"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
    }

  # module.network.module.aws_vpc.aws_nat_gateway.this[1] will be destroyed
  # (because index [1] is out of range for count)
  - resource "aws_nat_gateway" "this" {
      - allocation_id                      = "eipalloc-0769d1bf73119bad2" -> null
      - association_id                     = "eipassoc-0a510ffa343da079a" -> null
      - connectivity_type                  = "public" -> null
      - id                                 = "nat-0674be81f63202645" -> null
      - network_interface_id               = "eni-0df9113e5116be0cf" -> null
      - private_ip                         = "10.0.11.49" -> null
      - public_ip                          = "3.217.176.107" -> null
      - secondary_allocation_ids           = [] -> null
      - secondary_private_ip_address_count = 0 -> null
      - secondary_private_ip_addresses     = [] -> null
      - subnet_id                          = "subnet-08d867e8473b2a90c" -> null
      - tags                               = {
          - "Name" = "dev-us-east-1b"
        } -> null
      - tags_all                           = {
          - "Name"                = "dev-us-east-1b"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
    }

  # module.network.module.aws_vpc.aws_nat_gateway.this[2] will be destroyed
  # (because index [2] is out of range for count)
  - resource "aws_nat_gateway" "this" {
      - allocation_id                      = "eipalloc-0dd527070799c47dd" -> null
      - association_id                     = "eipassoc-0da2968b883382bfd" -> null
      - connectivity_type                  = "public" -> null
      - id                                 = "nat-063ce48aeefbab0cc" -> null
      - network_interface_id               = "eni-035d6eeb0ed724441" -> null
      - private_ip                         = "10.0.12.175" -> null
      - public_ip                          = "18.215.224.7" -> null
      - secondary_allocation_ids           = [] -> null
      - secondary_private_ip_address_count = 0 -> null
      - secondary_private_ip_addresses     = [] -> null
      - subnet_id                          = "subnet-07346454cb648bbf7" -> null
      - tags                               = {
          - "Name" = "dev-us-east-1c"
        } -> null
      - tags_all                           = {
          - "Name"                = "dev-us-east-1c"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
    }

  # module.network.module.aws_vpc.aws_route.private_dns64_nat_gateway[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_route" "private_dns64_nat_gateway" {
      - destination_ipv6_cidr_block = "64:ff9b::/96" -> null
      - id                          = "r-rtb-07b647dcec4b158682696003898" -> null
      - nat_gateway_id              = "nat-03203e04c51fddb01" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-07b647dcec4b15868" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)

      - timeouts {
          - create = "5m" -> null
        }
    }

  # module.network.module.aws_vpc.aws_route.private_dns64_nat_gateway[1] will be destroyed
  # (because index [1] is out of range for count)
  - resource "aws_route" "private_dns64_nat_gateway" {
      - destination_ipv6_cidr_block = "64:ff9b::/96" -> null
      - id                          = "r-rtb-0c2ef476b6761bfc92696003898" -> null
      - nat_gateway_id              = "nat-0674be81f63202645" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-0c2ef476b6761bfc9" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)

      - timeouts {
          - create = "5m" -> null
        }
    }

  # module.network.module.aws_vpc.aws_route.private_dns64_nat_gateway[2] will be destroyed
  # (because index [2] is out of range for count)
  - resource "aws_route" "private_dns64_nat_gateway" {
      - destination_ipv6_cidr_block = "64:ff9b::/96" -> null
      - id                          = "r-rtb-02341a2c0313abe342696003898" -> null
      - nat_gateway_id              = "nat-063ce48aeefbab0cc" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-02341a2c0313abe34" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)

      - timeouts {
          - create = "5m" -> null
        }
    }

  # module.network.module.aws_vpc.aws_route.private_ipv6_egress[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_route" "private_ipv6_egress" {
      - destination_ipv6_cidr_block = "::/0" -> null
      - egress_only_gateway_id      = "eigw-0d007c5286f11b757" -> null
      - id                          = "r-rtb-07b647dcec4b158682750132062" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-07b647dcec4b15868" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_route.private_ipv6_egress[1] will be destroyed
  # (because index [1] is out of range for count)
  - resource "aws_route" "private_ipv6_egress" {
      - destination_ipv6_cidr_block = "::/0" -> null
      - egress_only_gateway_id      = "eigw-0d007c5286f11b757" -> null
      - id                          = "r-rtb-0c2ef476b6761bfc92750132062" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-0c2ef476b6761bfc9" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_route.private_ipv6_egress[2] will be destroyed
  # (because index [2] is out of range for count)
  - resource "aws_route" "private_ipv6_egress" {
      - destination_ipv6_cidr_block = "::/0" -> null
      - egress_only_gateway_id      = "eigw-0d007c5286f11b757" -> null
      - id                          = "r-rtb-02341a2c0313abe342750132062" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-02341a2c0313abe34" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_route.private_nat_gateway[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_route" "private_nat_gateway" {
      - destination_cidr_block      = "0.0.0.0/0" -> null
      - id                          = "r-rtb-07b647dcec4b158681080289494" -> null
      - nat_gateway_id              = "nat-03203e04c51fddb01" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-07b647dcec4b15868" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)

      - timeouts {
          - create = "5m" -> null
        }
    }

  # module.network.module.aws_vpc.aws_route.private_nat_gateway[1] will be destroyed
  # (because index [1] is out of range for count)
  - resource "aws_route" "private_nat_gateway" {
      - destination_cidr_block      = "0.0.0.0/0" -> null
      - id                          = "r-rtb-0c2ef476b6761bfc91080289494" -> null
      - nat_gateway_id              = "nat-0674be81f63202645" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-0c2ef476b6761bfc9" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)

      - timeouts {
          - create = "5m" -> null
        }
    }

  # module.network.module.aws_vpc.aws_route.private_nat_gateway[2] will be destroyed
  # (because index [2] is out of range for count)
  - resource "aws_route" "private_nat_gateway" {
      - destination_cidr_block      = "0.0.0.0/0" -> null
      - id                          = "r-rtb-02341a2c0313abe341080289494" -> null
      - nat_gateway_id              = "nat-063ce48aeefbab0cc" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-02341a2c0313abe34" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)

      - timeouts {
          - create = "5m" -> null
        }
    }

  # module.network.module.aws_vpc.aws_route.public_internet_gateway_ipv6[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_route" "public_internet_gateway_ipv6" {
      - destination_ipv6_cidr_block = "::/0" -> null
      - gateway_id                  = "igw-09306e431523050b5" -> null
      - id                          = "r-rtb-0e2acaf9fbd50158c2750132062" -> null
      - origin                      = "CreateRoute" -> null
      - route_table_id              = "rtb-0e2acaf9fbd50158c" -> null
      - state                       = "active" -> null
        # (13 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_route_table_association.database[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_route_table_association" "database" {
      - id             = "rtbassoc-021586261212049d1" -> null
      - route_table_id = "rtb-07b647dcec4b15868" -> null
      - subnet_id      = "subnet-0f0256a1db5f6153e" -> null
        # (1 unchanged attribute hidden)
    }

  # module.network.module.aws_vpc.aws_route_table_association.database[1] will be destroyed
  # (because index [1] is out of range for count)
  - resource "aws_route_table_association" "database" {
      - id             = "rtbassoc-0c2a4b0bf8d979478" -> null
      - route_table_id = "rtb-0c2ef476b6761bfc9" -> null
      - subnet_id      = "subnet-00494a7cd1713edc7" -> null
        # (1 unchanged attribute hidden)
    }

  # module.network.module.aws_vpc.aws_route_table_association.database[2] will be destroyed
  # (because index [2] is out of range for count)
  - resource "aws_route_table_association" "database" {
      - id             = "rtbassoc-05c13b16000a8603a" -> null
      - route_table_id = "rtb-02341a2c0313abe34" -> null
      - subnet_id      = "subnet-0e00674c7ae0f91df" -> null
        # (1 unchanged attribute hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.database[0] will be destroyed
  # (because index [0] is out of range for count)
  - resource "aws_subnet" "database" {
      - arn                                            = "arn:aws:ec2:us-east-1:315341936575:subnet/subnet-0f0256a1db5f6153e" -> null
      - assign_ipv6_address_on_creation                = false -> null
      - availability_zone                              = "us-east-1a" -> null
      - availability_zone_id                           = "use1-az2" -> null
      - cidr_block                                     = "10.0.5.0/24" -> null
      - enable_dns64                                   = true -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = true -> null
      - id                                             = "subnet-0f0256a1db5f6153e" -> null
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba07::/64" -> null
      - ipv6_cidr_block_association_id                 = "subnet-cidr-assoc-089ed0b32c806fbca" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = false -> null
      - owner_id                                       = "315341936575" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "Name"        = "dev-db-us-east-1a"
          - "subnet_type" = "database"
        } -> null
      - tags_all                                       = {
          - "Name"                = "dev-db-us-east-1a"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "subnet_type"         = "database"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_id                                         = "vpc-08f522c5cc442d126" -> null
        # (2 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.database[1] will be destroyed
  # (because index [1] is out of range for count)
  - resource "aws_subnet" "database" {
      - arn                                            = "arn:aws:ec2:us-east-1:315341936575:subnet/subnet-00494a7cd1713edc7" -> null
      - assign_ipv6_address_on_creation                = false -> null
      - availability_zone                              = "us-east-1b" -> null
      - availability_zone_id                           = "use1-az4" -> null
      - cidr_block                                     = "10.0.6.0/24" -> null
      - enable_dns64                                   = true -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = true -> null
      - id                                             = "subnet-00494a7cd1713edc7" -> null
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba08::/64" -> null
      - ipv6_cidr_block_association_id                 = "subnet-cidr-assoc-0dc640b681682c908" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = false -> null
      - owner_id                                       = "315341936575" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "Name"        = "dev-db-us-east-1b"
          - "subnet_type" = "database"
        } -> null
      - tags_all                                       = {
          - "Name"                = "dev-db-us-east-1b"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "subnet_type"         = "database"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_id                                         = "vpc-08f522c5cc442d126" -> null
        # (2 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.database[2] will be destroyed
  # (because index [2] is out of range for count)
  - resource "aws_subnet" "database" {
      - arn                                            = "arn:aws:ec2:us-east-1:315341936575:subnet/subnet-0e00674c7ae0f91df" -> null
      - assign_ipv6_address_on_creation                = false -> null
      - availability_zone                              = "us-east-1c" -> null
      - availability_zone_id                           = "use1-az6" -> null
      - cidr_block                                     = "10.0.7.0/24" -> null
      - enable_dns64                                   = true -> null
      - enable_lni_at_device_index                     = 0 -> null
      - enable_resource_name_dns_a_record_on_launch    = false -> null
      - enable_resource_name_dns_aaaa_record_on_launch = true -> null
      - id                                             = "subnet-0e00674c7ae0f91df" -> null
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba09::/64" -> null
      - ipv6_cidr_block_association_id                 = "subnet-cidr-assoc-077667ed308bf729a" -> null
      - ipv6_native                                    = false -> null
      - map_customer_owned_ip_on_launch                = false -> null
      - map_public_ip_on_launch                        = false -> null
      - owner_id                                       = "315341936575" -> null
      - private_dns_hostname_type_on_launch            = "ip-name" -> null
      - tags                                           = {
          - "Name"        = "dev-db-us-east-1c"
          - "subnet_type" = "database"
        } -> null
      - tags_all                                       = {
          - "Name"                = "dev-db-us-east-1c"
          - "description"         = "VPC resources"
          - "network_name"        = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "subnet_type"         = "database"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - vpc_id                                         = "vpc-08f522c5cc442d126" -> null
        # (2 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.private[0] will be updated in-place
  ~ resource "aws_subnet" "private" {
      ~ enable_dns64                                   = true -> false
      ~ enable_resource_name_dns_aaaa_record_on_launch = true -> false
        id                                             = "subnet-0a5ea667d3751639f"
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba04::/64" -> null
        tags                                           = {
            "Name"        = "dev-private-us-east-1a"
            "subnet_type" = "private"
        }
        # (17 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.private[1] will be updated in-place
  ~ resource "aws_subnet" "private" {
      ~ enable_dns64                                   = true -> false
      ~ enable_resource_name_dns_aaaa_record_on_launch = true -> false
        id                                             = "subnet-019f469ba97dc6ec7"
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba05::/64" -> null
        tags                                           = {
            "Name"        = "dev-private-us-east-1b"
            "subnet_type" = "private"
        }
        # (17 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.private[2] will be updated in-place
  ~ resource "aws_subnet" "private" {
      ~ enable_dns64                                   = true -> false
      ~ enable_resource_name_dns_aaaa_record_on_launch = true -> false
        id                                             = "subnet-068ede7dcfd9469ab"
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba06::/64" -> null
        tags                                           = {
            "Name"        = "dev-private-us-east-1c"
            "subnet_type" = "private"
        }
        # (17 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.public[0] will be updated in-place
  ~ resource "aws_subnet" "public" {
      ~ enable_dns64                                   = true -> false
      ~ enable_resource_name_dns_aaaa_record_on_launch = true -> false
        id                                             = "subnet-05b5e5c01ebc7604b"
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba01::/64" -> null
        tags                                           = {
            "Name"        = "dev-public-us-east-1a"
            "subnet_type" = "public"
        }
        # (17 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.public[1] will be updated in-place
  ~ resource "aws_subnet" "public" {
      ~ enable_dns64                                   = true -> false
      ~ enable_resource_name_dns_aaaa_record_on_launch = true -> false
        id                                             = "subnet-08d867e8473b2a90c"
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba02::/64" -> null
        tags                                           = {
            "Name"        = "dev-public-us-east-1b"
            "subnet_type" = "public"
        }
        # (17 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_subnet.public[2] will be updated in-place
  ~ resource "aws_subnet" "public" {
      ~ enable_dns64                                   = true -> false
      ~ enable_resource_name_dns_aaaa_record_on_launch = true -> false
        id                                             = "subnet-07346454cb648bbf7"
      - ipv6_cidr_block                                = "2600:1f18:4d06:ba03::/64" -> null
        tags                                           = {
            "Name"        = "dev-public-us-east-1c"
            "subnet_type" = "public"
        }
        # (17 unchanged attributes hidden)
    }

  # module.network.module.aws_vpc.aws_vpc.this[0] will be updated in-place
  ~ resource "aws_vpc" "this" {
      - assign_generated_ipv6_cidr_block     = true -> null
        id                                   = "vpc-08f522c5cc442d126"
      ~ ipv6_association_id                  = "vpc-cidr-assoc-0f4e19b9fc683286b" -> (known after apply)
      ~ ipv6_cidr_block                      = "2600:1f18:4d06:ba00::/56" -> (known after apply)
        tags                                 = {
            "Name" = "dev"
        }
        # (16 unchanged attributes hidden)
    }

Plan: 4 to add, 7 to change, 34 to destroy.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.

================================================================================
COMPONENT: frontend/service
================================================================================

data.terraform_remote_state.current_image_tag[0]: Reading...
module.service.data.external.deploy_github_sha: Reading...
module.app_config.data.external.account_ids_by_name: Reading...
module.service.data.external.whoami: Reading...
module.secrets["SESSION_SECRET"].random_password.secret[0]: Refreshing state... [id=none]
module.app_config.data.external.account_ids_by_name: Read complete after 0s [id=-]
module.service.data.external.whoami: Read complete after 0s [id=-]
module.service.data.external.deploy_github_sha: Read complete after 0s [id=-]
module.service.module.network.data.aws_vpc.network: Reading...
data.aws_vpc.network: Reading...
data.aws_acm_certificate.certificate[0]: Reading...
module.service.data.aws_iam_policy_document.events_assume_role: Reading...
module.service.data.aws_iam_policy_document.ecs_tasks_assume_role_policy: Reading...
module.secrets["SESSION_SECRET"].aws_ssm_parameter.secret[0]: Refreshing state... [id=/frontend/dev/session-secret]
module.service.data.aws_iam_policy_document.events_assume_role: Read complete after 0s [id=3959961479]
module.service.data.aws_iam_policy_document.ecs_tasks_assume_role_policy: Read complete after 0s [id=4229150499]
module.service.aws_s3_bucket.cdn[0]: Refreshing state... [id=frontend-dev-cdn-access-logs20241206211507516700000002]
module.service.module.network.data.aws_subnets.private: Reading...
module.service.data.aws_region.current: Reading...
module.service.data.aws_region.current: Read complete after 0s [id=us-east-1]
module.service.aws_s3_bucket.access_logs: Refreshing state... [id=frontend-dev-access-logs20230818175923948800000003]
module.service.aws_cloudfront_cache_policy.default[0]: Refreshing state... [id=bba68319-a780-4ac0-b437-cc85490c7213]
module.service.aws_cloudfront_origin_access_control.cdn[0]: Refreshing state... [id=E3FCVP7DYF159W]
module.service.module.network.data.aws_subnets.private: Read complete after 1s [id=us-east-1]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_OPPORTUNITY_OFF"]: Reading...
module.service.aws_wafv2_web_acl.waf[0]: Refreshing state... [id=c7b7b8d6-3f15-497d-8ec8-66c6239cdff2]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SEARCH_TABLE_ON"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_OPPORTUNITY_OFF"]: Read complete after 0s [id=/frontend/dev/feature-opportunity-off]
module.secrets.data.aws_ssm_parameter.secrets["API_URL"]: Reading...
data.aws_acm_certificate.certificate[0]: Read complete after 1s [id=arn:aws:acm:us-east-1:315341936575:certificate/3ef215c7-cfb1-40df-833a-7fbe378e0631]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_MANAGE_USERS_OFF"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_USER_ADMIN_OFF"]: Reading...
data.terraform_remote_state.current_image_tag[0]: Read complete after 1s
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SAVED_OPPORTUNITIES_ON"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SEARCH_TABLE_ON"]: Read complete after 0s [id=/frontend/dev/feature-search-table-on]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SAVED_SEARCHES_ON"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_MANAGE_USERS_OFF"]: Read complete after 0s [id=/frontend/dev/feature-manage-users-off]
module.secrets.data.aws_ssm_parameter.secrets["API_URL"]: Read complete after 0s [id=/frontend/dev/api-url]
module.secrets.data.aws_ssm_parameter.secrets["API_GW_AUTH"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["NEW_RELIC_LICENSE_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_USER_ADMIN_OFF"]: Read complete after 0s [id=/frontend/dev/feature-user-admin-off]
module.secrets.data.aws_ssm_parameter.secrets["SENDY_API_KEY"]: Reading...
data.aws_vpc.network: Read complete after 1s [id=vpc-08f522c5cc442d126]
module.secrets.data.aws_ssm_parameter.secrets["SENDY_API_URL"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SAVED_OPPORTUNITIES_ON"]: Read complete after 0s [id=/frontend/dev/feature-saved-opportunities-on]
module.secrets.data.aws_ssm_parameter.secrets["SENDY_LIST_ID"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SAVED_SEARCHES_ON"]: Read complete after 0s [id=/frontend/dev/feature-saved-searches-on]
module.service.module.network.data.aws_vpc.network: Read complete after 1s [id=vpc-08f522c5cc442d126]
module.secrets.data.aws_ssm_parameter.secrets["API_JWT_PUBLIC_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SEARCH_DRAWER_ON"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["API_GW_AUTH"]: Read complete after 0s [id=/frontend/dev/X-API-KEY]
module.secrets.data.aws_ssm_parameter.secrets["NEW_RELIC_APP_NAME"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["NEW_RELIC_LICENSE_KEY"]: Read complete after 0s [id=/new-relic-license-key]
module.secrets.data.aws_ssm_parameter.secrets["AUTH_LOGIN_URL"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["SENDY_API_KEY"]: Read complete after 0s [id=/frontend/dev/sendy-api-key]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SEARCH_OFF"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["SENDY_API_URL"]: Read complete after 0s [id=/frontend/dev/sendy-api-url]
module.secrets.data.aws_ssm_parameter.secrets["SENDY_LIST_ID"]: Read complete after 0s [id=/frontend/dev/sendy-list-id]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_AUTH_ON"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["API_AUTH_TOKEN"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["API_JWT_PUBLIC_KEY"]: Read complete after 0s [id=/api/dev/api-jwt-public-key]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_APPLY_FORM_PROTOTYPE_OFF"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SEARCH_OFF"]: Read complete after 0s [id=/frontend/dev/feature-search-off]
module.service.data.aws_caller_identity.current: Reading...
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_SEARCH_DRAWER_ON"]: Read complete after 0s [id=/frontend/dev/feature-search-drawer-on]
module.service.module.network.data.aws_subnets.public: Reading...
module.secrets.data.aws_ssm_parameter.secrets["NEW_RELIC_APP_NAME"]: Read complete after 0s [id=/frontend/dev/new-relic-app-name]
module.service.data.aws_ssm_parameter.fluent_bit_commit: Reading...
module.secrets.data.aws_ssm_parameter.secrets["AUTH_LOGIN_URL"]: Read complete after 0s [id=/frontend/dev/auth-login-url]
module.domain.data.aws_route53_zone.zone[0]: Reading...
module.service.data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
module.service.aws_cloudwatch_log_group.service_logs: Refreshing state... [id=service/frontend-dev]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_APPLY_FORM_PROTOTYPE_OFF"]: Read complete after 0s [id=/frontend/dev/feature-apply-form-prototype-off]
module.service.data.aws_iam_policy_document.ecs_exec: Reading...
module.service.data.aws_iam_policy_document.ecs_exec: Read complete after 0s [id=1236260518]
module.service.aws_s3_bucket.general_purpose: Refreshing state... [id=frontend-dev-general-purpose20240422224603864800000001]
module.secrets.data.aws_ssm_parameter.secrets["FEATURE_AUTH_ON"]: Read complete after 0s [id=/frontend/dev/feature-auth-on]
module.service.data.aws_iam_policy_document.scheduler_assume_role: Reading...
module.service.data.aws_iam_policy_document.scheduler_assume_role: Read complete after 0s [id=52247394]
module.secrets.data.aws_ssm_parameter.secrets["API_AUTH_TOKEN"]: Read complete after 0s [id=/frontend/dev/api-auth-token]
module.service.aws_cloudfront_origin_request_policy.forward_all_cookies[0]: Refreshing state... [id=e7b98a93-2372-4c81-b522-e6d8141bfc19]
module.service.aws_ecs_cluster.cluster: Refreshing state... [id=arn:aws:ecs:us-east-1:315341936575:cluster/frontend-dev]
module.service.data.aws_ssm_parameter.fluent_bit_commit: Read complete after 0s [id=/fluent-bit-commit]
module.service.aws_cloudfront_cache_policy.api_no_cache[0]: Refreshing state... [id=b22e8f53-d955-4c8a-af44-240996fe999d]
module.service.module.network.data.aws_subnets.public: Read complete after 0s [id=us-east-1]
module.domain.data.aws_acm_certificate.certificate[0]: Reading...
module.service.aws_cloudwatch_log_group.WafWebAclLoggroup[0]: Refreshing state... [id=aws-waf-logs-wafv2-web-acl-frontend-dev]
module.service.module.network.data.aws_subnets.database: Reading...
module.service.aws_iam_role.events: Refreshing state... [id=frontend-dev-events]
module.service.module.network.data.aws_subnets.database: Read complete after 0s [id=us-east-1]
module.service.aws_iam_role.task_executor: Refreshing state... [id=frontend-dev-task-executor]
module.service.aws_iam_role.app_service: Refreshing state... [id=frontend-dev-app]
data.aws_subnets.public: Reading...
data.aws_subnets.private: Reading...
module.domain.data.aws_acm_certificate.certificate[0]: Read complete after 1s [id=arn:aws:acm:us-east-1:315341936575:certificate/3ef215c7-cfb1-40df-833a-7fbe378e0631]
data.aws_security_groups.aws_services: Reading...
module.service.module.network.data.aws_security_groups.aws_services: Reading...
data.aws_subnets.private: Read complete after 0s [id=us-east-1]
module.service.data.aws_iam_policy_document.workflow_orchestrator_assume_role: Reading...
module.service.data.aws_iam_policy_document.workflow_orchestrator_assume_role: Read complete after 0s [id=3468042870]
data.aws_subnets.public: Read complete after 0s [id=us-east-1]
module.service.data.aws_iam_policy_document.runtime_logs: Reading...
module.service.aws_iam_policy.ecs_exec: Refreshing state... [id=arn:aws:iam::315341936575:policy/frontend-dev-ecs-exec]
module.service.data.aws_iam_policy_document.runtime_logs: Read complete after 0s [id=654727942]
module.service.aws_iam_role.scheduler: Refreshing state... [id=frontend-dev-scheduler]
module.domain.data.aws_route53_zone.zone[0]: Read complete after 1s [id=Z04517193GDPF9DWUX2WT]
data.aws_security_groups.aws_services: Read complete after 0s [id=us-east-1]
module.service.aws_s3_bucket_ownership_controls.cdn[0]: Refreshing state... [id=frontend-dev-cdn-access-logs20241206211507516700000002]
module.service.aws_s3_bucket_public_access_block.cdn[0]: Refreshing state... [id=frontend-dev-cdn-access-logs20241206211507516700000002]
module.service.aws_s3_bucket_lifecycle_configuration.cdn[0]: Refreshing state... [id=frontend-dev-cdn-access-logs20241206211507516700000002]
module.service.module.network.data.aws_security_groups.aws_services: Read complete after 0s [id=us-east-1]
module.service.aws_cloudwatch_log_group.fluentbit: Refreshing state... [id=service/frontend-dev-fluentbit]
module.service.aws_s3_bucket_server_side_encryption_configuration.encryption: Refreshing state... [id=frontend-dev-access-logs20230818175923948800000003]
module.service.aws_s3_bucket_lifecycle_configuration.access_logs: Refreshing state... [id=frontend-dev-access-logs20230818175923948800000003]
module.service.data.aws_iam_policy_document.access_logs_put_access: Reading...
module.service.data.aws_iam_policy_document.access_logs_put_access: Read complete after 0s [id=1899969278]
module.service.aws_s3_bucket_public_access_block.access_logs: Refreshing state... [id=frontend-dev-access-logs20230818175923948800000003]
module.service.aws_security_group.alb: Refreshing state... [id=sg-09f21e3710e63e128]
module.service.aws_lb_target_group.app_tg[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:targetgroup/app-20240129183934308400000001/6291f09ee717b0d7]
module.service.aws_iam_role.workflow_orchestrator: Refreshing state... [id=frontend-dev-workflow-orchestrator]
module.service.aws_iam_policy.runtime_logs: Refreshing state... [id=arn:aws:iam::315341936575:policy/frontend-dev-task-executor-role-policy]
module.service.aws_s3_bucket_acl.cdn[0]: Refreshing state... [id=frontend-dev-cdn-access-logs20241206211507516700000002,log-delivery-write]
module.service.aws_s3_bucket_policy.access_logs: Refreshing state... [id=frontend-dev-access-logs20230818175923948800000003]
module.service.aws_security_group_rule.http_ingress_ipv6: Refreshing state... [id=sgrule-535005817]
module.service.aws_security_group.app: Refreshing state... [id=sg-0ab68d90ef2574a9b]
module.service.aws_security_group_rule.http_ingress: Refreshing state... [id=sgrule-982783969]
module.service.aws_security_group_rule.https_ingress_ipv6[0]: Refreshing state... [id=sgrule-2489528993]
module.service.aws_security_group_rule.https_ingress[0]: Refreshing state... [id=sgrule-1653939980]
module.service.aws_lb.alb[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:loadbalancer/app/frontend-dev/3c9002fb0aa7756d]
module.service.aws_iam_role_policy_attachment.runtime_logs: Refreshing state... [id=frontend-dev-app-20250501191931680200000002]
module.service.aws_security_group_rule.alb_app_local_health_check: Refreshing state... [id=sgrule-2374040162]
module.service.aws_iam_role_policy.task_executor: Refreshing state... [id=frontend-dev-task-executor:frontend-dev-task-executor-role-policy]
module.service.aws_s3_bucket_public_access_block.general_purpose: Refreshing state... [id=frontend-dev-general-purpose20240422224603864800000001]
module.service.aws_s3_bucket_server_side_encryption_configuration.general_purpose_encryption: Refreshing state... [id=frontend-dev-general-purpose20240422224603864800000001]
module.service.data.aws_iam_policy_document.general_purpose_put_access: Reading...
module.service.aws_s3_bucket_lifecycle_configuration.general_purpose: Refreshing state... [id=frontend-dev-general-purpose20240422224603864800000001]
module.service.data.aws_iam_policy_document.general_purpose_put_access: Read complete after 0s [id=1545896503]
module.service.aws_s3_bucket_policy.general_purpose: Refreshing state... [id=frontend-dev-general-purpose20240422224603864800000001]
module.service.aws_lb_listener.alb_listener_https[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener/app/frontend-dev/3c9002fb0aa7756d/05591061f06ab0bc]
module.service.aws_lb_listener.alb_listener_http[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener/app/frontend-dev/3c9002fb0aa7756d/249586ef7c2428aa]
module.service.aws_cloudfront_distribution.cdn[0]: Refreshing state... [id=E8MSK3F3PHH2L]
module.service.aws_s3_bucket_policy.cdn[0]: Refreshing state... [id=frontend-dev-cdn-access-logs20241206211507516700000002]
module.service.aws_ecs_task_definition.app: Refreshing state... [id=frontend-dev]
module.service.aws_wafv2_web_acl_association.WafWebAclAssociation[0]: Refreshing state... [id=arn:aws:wafv2:us-east-1:315341936575:regional/webacl/frontend-dev-wafv2-web-acl/c7b7b8d6-3f15-497d-8ec8-66c6239cdff2,arn:aws:elasticloadbalancing:us-east-1:315341936575:loadbalancer/app/frontend-dev/3c9002fb0aa7756d]
module.service.aws_wafv2_web_acl_logging_configuration.WafWebAclLogging[0]: Refreshing state... [id=arn:aws:wafv2:us-east-1:315341936575:regional/webacl/frontend-dev-wafv2-web-acl/c7b7b8d6-3f15-497d-8ec8-66c6239cdff2]
module.service.aws_lb_listener_rule.app_https_forward[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener-rule/app/frontend-dev/3c9002fb0aa7756d/05591061f06ab0bc/2076660e9d031dd3]
module.service.aws_lb_listener_rule.app_http_forward[0]: Refreshing state... [id=arn:aws:elasticloadbalancing:us-east-1:315341936575:listener-rule/app/frontend-dev/3c9002fb0aa7756d/249586ef7c2428aa/42ac4725904087e4]
module.service.data.aws_iam_policy_document.scheduler: Reading...
module.service.data.aws_iam_policy_document.run_task: Reading...
module.service.data.aws_iam_policy_document.scheduler: Read complete after 0s [id=1712525928]
module.service.data.aws_iam_policy_document.run_task: Read complete after 0s [id=1712525928]
module.service.aws_ecs_service.app: Refreshing state... [id=arn:aws:ecs:us-east-1:315341936575:service/frontend-dev/frontend-dev]
module.service.aws_iam_policy.workflow_orchestrator: Refreshing state... [id=arn:aws:iam::315341936575:policy/frontend-dev-workflow-orchestrator]
module.service.aws_iam_policy.scheduler: Refreshing state... [id=arn:aws:iam::315341936575:policy/frontend-dev-scheduler]
module.service.aws_iam_policy.run_task: Refreshing state... [id=arn:aws:iam::315341936575:policy/frontend-dev-run-access]
module.service.aws_appautoscaling_target.ecs_target[0]: Refreshing state... [id=service/frontend-dev/frontend-dev]
module.service.aws_appautoscaling_policy.ecs_scale_policy_memory[0]: Refreshing state... [id=frontend-dev-ecs-scale-policy-memory]
module.service.aws_appautoscaling_policy.ecs_scale_policy_cpu[0]: Refreshing state... [id=frontend-dev-ecs-scale-policy-cpu]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
  - destroy
-/+ destroy and then create replacement
 <= read (data resources)

Terraform will perform the following actions:

  # module.monitoring.aws_cloudwatch_log_metric_filter.service_error_filter will be created
  + resource "aws_cloudwatch_log_metric_filter" "service_error_filter" {
      + id             = (known after apply)
      + log_group_name = "service/frontend-dev"
      + name           = "service-error-filter"
      + pattern        = "%ERROR | Exception%"

      + metric_transformation {
          + name      = "ErrorCount"
          + namespace = "frontend-dev"
          + unit      = "None"
          + value     = "1"
        }
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_app_http_5xx_count will be created
  + resource "aws_cloudwatch_metric_alarm" "high_app_http_5xx_count" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High HTTP service 5XX error count"
      + alarm_name                            = "frontend-dev-high-app-5xx-count"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + dimensions                            = {
          + "LoadBalancer" = "app/frontend-dev/3c9002fb0aa7756d"
        }
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "HTTPCode_Target_5XX_Count"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 1
      + treat_missing_data                    = "notBreaching"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_app_response_time will be created
  + resource "aws_cloudwatch_metric_alarm" "high_app_response_time" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High target latency alert"
      + alarm_name                            = "frontend-dev-high-app-response-time"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + dimensions                            = {
          + "LoadBalancer" = "app/frontend-dev/3c9002fb0aa7756d"
        }
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "TargetResponseTime"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Average"
      + tags_all                              = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 0.5
      + treat_missing_data                    = "ignore"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_load_balancer_http_5xx_count will be created
  + resource "aws_cloudwatch_metric_alarm" "high_load_balancer_http_5xx_count" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High HTTP ELB 5XX error count"
      + alarm_name                            = "frontend-dev-high-load-balancer-5xx-count"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + dimensions                            = {
          + "LoadBalancer" = "app/frontend-dev/3c9002fb0aa7756d"
        }
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "HTTPCode_ELB_5XX_Count"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 1
      + treat_missing_data                    = "notBreaching"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.service_errors will be created
  + resource "aws_cloudwatch_metric_alarm" "service_errors" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "Alarm for service errors"
      + alarm_name                            = "frontend-dev-errors"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanThreshold"
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 1
      + id                                    = (known after apply)
      + metric_name                           = "ErrorCount"
      + namespace                             = "frontend-dev"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 0
      + treat_missing_data                    = "ignore"
    }

  # module.monitoring.aws_sns_topic.this will be created
  + resource "aws_sns_topic" "this" {
      + arn                         = (known after apply)
      + beginning_archive_time      = (known after apply)
      + content_based_deduplication = false
      + fifo_topic                  = false
      + id                          = (known after apply)
      + name                        = "frontend-dev-monitoring"
      + name_prefix                 = (known after apply)
      + owner                       = (known after apply)
      + policy                      = (known after apply)
      + signature_version           = (known after apply)
      + tags_all                    = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + tracing_config              = (known after apply)
    }

  # module.secrets.aws_ssm_parameter.secrets["SESSION_SECRET"] will be created
  + resource "aws_ssm_parameter" "secrets" {
      + arn            = (known after apply)
      + data_type      = (known after apply)
      + has_value_wo   = (known after apply)
      + id             = (known after apply)
      + insecure_value = (known after apply)
      + key_id         = (known after apply)
      + name           = "/frontend/dev/session-secret"
      + tags_all       = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + tier           = (known after apply)
      + type           = "SecureString"
      + value          = (sensitive value)
      + value_wo       = (write-only attribute)
      + version        = (known after apply)
    }

  # module.secrets.random_password.secrets["SESSION_SECRET"] will be created
  + resource "random_password" "secrets" {
      + bcrypt_hash      = (sensitive value)
      + id               = (known after apply)
      + length           = 64
      + lower            = true
      + min_lower        = 0
      + min_numeric      = 0
      + min_special      = 0
      + min_upper        = 0
      + number           = true
      + numeric          = true
      + override_special = "!#$%&*()-_=+[]{}<>:?"
      + result           = (sensitive value)
      + special          = true
      + upper            = true
    }

  # module.secrets["SESSION_SECRET"].aws_ssm_parameter.secret[0] will be destroyed
  # (because aws_ssm_parameter.secret is not in configuration)
  - resource "aws_ssm_parameter" "secret" {
      - arn             = "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/session-secret" -> null
      - data_type       = "text" -> null
      - id              = "/frontend/dev/session-secret" -> null
      - key_id          = "alias/aws/ssm" -> null
      - name            = "/frontend/dev/session-secret" -> null
      - tags            = {} -> null
      - tags_all        = {
          - "app"                 = "frontend"
          - "description"         = "Application resources created in dev environment"
          - "environment"         = "dev"
          - "owner"               = "navapbc"
          - "project"             = "simpler-grants-gov"
          - "repository"          = "https://github.com/HHS/simpler-grants-gov"
          - "service_name"        = "frontend-dev"
          - "terraform"           = "true"
          - "terraform_workspace" = "default"
        } -> null
      - tier            = "Standard" -> null
      - type            = "SecureString" -> null
      - value           = (sensitive value) -> null
      - value_wo        = (write-only attribute) -> null
      - version         = 1 -> null
        # (2 unchanged attributes hidden)
    }

  # module.secrets["SESSION_SECRET"].random_password.secret[0] will be destroyed
  # (because random_password.secret is not in configuration)
  - resource "random_password" "secret" {
      - bcrypt_hash      = (sensitive value) -> null
      - id               = "none" -> null
      - length           = 64 -> null
      - lower            = true -> null
      - min_lower        = 0 -> null
      - min_numeric      = 0 -> null
      - min_special      = 0 -> null
      - min_upper        = 0 -> null
      - number           = true -> null
      - numeric          = true -> null
      - override_special = "!#$%&*()-_=+[]{}<>:?" -> null
      - result           = (sensitive value) -> null
      - special          = true -> null
      - upper            = true -> null
    }

  # module.service.data.aws_iam_policy_document.cdn[0] will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "cdn" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:GetObject",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::frontend-dev-cdn-access-logs20241206211507516700000002/*",
            ]
          + sid       = "AllowCloudFrontIngress"

          + condition {
              + test     = "StringEquals"
              + values   = [
                  + "arn:aws:cloudfront::315341936575:distribution/E8MSK3F3PHH2L",
                ]
              + variable = "AWS:SourceArn"
            }

          + principals {
              + identifiers = [
                  + "cloudfront.amazonaws.com",
                ]
              + type        = "Service"
            }
        }
    }

  # module.service.data.aws_iam_policy_document.task_executor will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "task_executor" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "logs:CreateLogStream",
              + "logs:DescribeLogStreams",
              + "logs:PutLogEvents",
            ]
          + resources = [
              + "arn:aws:logs:us-east-1:315341936575:log-group:service/frontend-dev*",
              + "arn:aws:logs:us-east-1:315341936575:log-group:service/frontend-dev:*",
            ]
        }
      + statement {
          + actions   = [
              + "ecr:GetAuthorizationToken",
            ]
          + resources = [
              + "*",
            ]
          + sid       = "ECRAuth"
        }
      + statement {
          + actions   = [
              + "ecr:BatchCheckLayerAvailability",
              + "ecr:BatchGetImage",
              + "ecr:GetDownloadUrlForLayer",
            ]
          + resources = [
              + "arn:aws:ecr:us-east-1:315341936575:repository/simpler-grants-gov-frontend",
            ]
          + sid       = "ECRPullAccess"
        }
      + statement {
          + actions   = [
              + "ecr:BatchCheckLayerAvailability",
              + "ecr:BatchGetImage",
              + "ecr:GetDownloadUrlForLayer",
            ]
          + resources = [
              + "arn:aws:ecr:us-east-1:315341936575:repository/simpler-grants-gov-fluentbit",
            ]
          + sid       = "ECRPullAccessFluentbit"
        }
      + statement {
          + actions   = [
              + "ecr:BatchCheckLayerAvailability",
              + "ecr:BatchGetImage",
              + "ecr:GetDownloadUrlForLayer",
            ]
          + resources = [
              + "arn:aws:ecr:us-east-1:593207742271:repository/aws-guardduty-agent-fargate",
            ]
          + sid       = "ECRPullAccessGuardDuty"
        }
      + statement {
          + actions   = [
              + "ssm:GetParameters",
            ]
          + resources = [
              + "arn:aws:ssm:us-east-1:315341936575:parameter/new-relic-license-key",
            ]
          + sid       = "PullSharedNewRelicKey"
        }
      + statement {
          + actions   = [
              + "ssm:GetParameters",
            ]
          + resources = [
              + "arn:aws:ssm:us-east-1:315341936575:parameter/api/dev/api-jwt-public-key",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/X-API-KEY",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/api-auth-token",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/api-url",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/auth-login-url",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-apply-form-prototype-off",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-auth-on",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-manage-users-off",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-opportunity-off",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-saved-opportunities-on",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-saved-searches-on",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-search-drawer-on",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-search-off",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-search-table-on",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-user-admin-off",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/new-relic-app-name",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/sendy-api-key",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/sendy-api-url",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/sendy-list-id",
              + "arn:aws:ssm:us-east-1:315341936575:parameter/new-relic-license-key",
              + (known after apply),
            ]
          + sid       = "SecretsAccess"
        }
    }

  # module.service.data.aws_iam_policy_document.workflow_orchestrator will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "workflow_orchestrator" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "logs:CreateLogDelivery",
              + "logs:CreateLogStream",
              + "logs:DeleteLogDelivery",
              + "logs:DescribeLogGroups",
              + "logs:DescribeResourcePolicies",
              + "logs:GetLogDelivery",
              + "logs:ListLogDeliveries",
              + "logs:PutLogEvents",
              + "logs:PutResourcePolicy",
              + "logs:UpdateLogDelivery",
            ]
          + resources = [
              + "*",
            ]
          + sid       = "UnscopeLogsPermissions"
        }
      + statement {
          + actions   = [
              + "events:DescribeRule",
              + "events:PutRule",
              + "events:PutTargets",
            ]
          + resources = [
              + "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForECSTaskRule",
            ]
          + sid       = "StepFunctionsEvents"
        }
      + statement {
          + actions   = [
              + "ecs:RunTask",
            ]
          + effect    = "Allow"
          + resources = [
              + (known after apply),
            ]

          + condition {
              + test     = "ArnLike"
              + values   = [
                  + "arn:aws:ecs:us-east-1:315341936575:cluster/frontend-dev",
                ]
              + variable = "ecs:cluster"
            }
        }
      + statement {
          + actions   = [
              + "ecs:DescribeTasks",
              + "ecs:StopTask",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:ecs:us-east-1:315341936575:task/frontend-dev/*",
            ]

          + condition {
              + test     = "ArnLike"
              + values   = [
                  + "arn:aws:ecs:us-east-1:315341936575:cluster/frontend-dev",
                ]
              + variable = "ecs:cluster"
            }
        }
      + statement {
          + actions   = [
              + "iam:PassRole",
            ]
          + resources = [
              + "arn:aws:iam::315341936575:role/frontend-dev-app",
              + "arn:aws:iam::315341936575:role/frontend-dev-task-executor",
            ]
          + sid       = "PassRole"
        }
    }

  # module.service.aws_cloudfront_cache_policy.default[0] will be updated in-place
  ~ resource "aws_cloudfront_cache_policy" "default" {
      - comment     = "Auth-aware cache policy with X-User-Authenticated header support" -> null
        id          = "bba68319-a780-4ac0-b437-cc85490c7213"
        name        = "frontend-dev"
        # (5 unchanged attributes hidden)

        # (1 unchanged block hidden)
    }

  # module.service.aws_cloudfront_distribution.cdn[0] will be updated in-place
  ~ resource "aws_cloudfront_distribution" "cdn" {
        id                              = "E8MSK3F3PHH2L"
        tags                            = {}
        # (22 unchanged attributes hidden)

      - origin {
          - connection_attempts      = 3 -> null
          - connection_timeout       = 10 -> null
          - domain_name              = "frontend-dev-1739892538.us-east-1.elb.amazonaws.com" -> null
          - origin_id                = "default" -> null
            # (2 unchanged attributes hidden)

          - custom_origin_config {
              - http_port                = 80 -> null
              - https_port               = 443 -> null
              - origin_keepalive_timeout = 5 -> null
              - origin_protocol_policy   = "http-only" -> null
              - origin_read_timeout      = 30 -> null
              - origin_ssl_protocols     = [
                  - "TLSv1.2",
                ] -> null
            }

          - origin_shield {
              - enabled              = true -> null
              - origin_shield_region = "us-east-1" -> null
            }
        }
      + origin {
          + connection_attempts      = 3
          + connection_timeout       = 10
          + domain_name              = "frontend-dev-1739892538.us-east-1.elb.amazonaws.com"
          + origin_id                = "default"
            # (2 unchanged attributes hidden)

          + custom_origin_config {
              + http_port                = 80
              + https_port               = 443
              + origin_keepalive_timeout = 5
              + origin_protocol_policy   = "http-only"
              + origin_read_timeout      = 30
              + origin_ssl_protocols     = [
                  + "TLSv1.2",
                ]
            }
        }

        # (5 unchanged blocks hidden)
    }

  # module.service.aws_ecs_service.app will be updated in-place
  ~ resource "aws_ecs_service" "app" {
        id                                 = "arn:aws:ecs:us-east-1:315341936575:service/frontend-dev/frontend-dev"
        name                               = "frontend-dev"
        tags                               = {}
      ~ task_definition                    = "arn:aws:ecs:us-east-1:315341936575:task-definition/frontend-dev:762" -> (known after apply)
        # (16 unchanged attributes hidden)

        # (4 unchanged blocks hidden)
    }

  # module.service.aws_ecs_task_definition.app must be replaced
-/+ resource "aws_ecs_task_definition" "app" {
      ~ arn                      = "arn:aws:ecs:us-east-1:315341936575:task-definition/frontend-dev:762" -> (known after apply)
      ~ arn_without_revision     = "arn:aws:ecs:us-east-1:315341936575:task-definition/frontend-dev" -> (known after apply)
      ~ container_definitions    = (sensitive value) # forces replacement
      ~ enable_fault_injection   = false -> (known after apply)
      ~ id                       = "frontend-dev" -> (known after apply)
      ~ revision                 = 762 -> (known after apply)
      - tags                     = {} -> null
        # (12 unchanged attributes hidden)
    }

  # module.service.aws_iam_policy.workflow_orchestrator will be updated in-place
  ~ resource "aws_iam_policy" "workflow_orchestrator" {
        id               = "arn:aws:iam::315341936575:policy/frontend-dev-workflow-orchestrator"
        name             = "frontend-dev-workflow-orchestrator"
      ~ policy           = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "logs:UpdateLogDelivery",
                          - "logs:PutResourcePolicy",
                          - "logs:PutLogEvents",
                          - "logs:ListLogDeliveries",
                          - "logs:GetLogDelivery",
                          - "logs:DescribeResourcePolicies",
                          - "logs:DescribeLogGroups",
                          - "logs:DeleteLogDelivery",
                          - "logs:CreateLogStream",
                          - "logs:CreateLogDelivery",
                        ]
                      - Effect   = "Allow"
                      - Resource = "*"
                      - Sid      = "UnscopeLogsPermissions"
                    },
                  - {
                      - Action   = [
                          - "events:PutTargets",
                          - "events:PutRule",
                          - "events:DescribeRule",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForECSTaskRule"
                      - Sid      = "StepFunctionsEvents"
                    },
                  - {
                      - Action    = "ecs:RunTask"
                      - Condition = {
                          - ArnLike = {
                              - "ecs:cluster" = "arn:aws:ecs:us-east-1:315341936575:cluster/frontend-dev"
                            }
                        }
                      - Effect    = "Allow"
                      - Resource  = "arn:aws:ecs:us-east-1:315341936575:task-definition/frontend-dev:*"
                    },
                  - {
                      - Action    = [
                          - "ecs:StopTask",
                          - "ecs:DescribeTasks",
                        ]
                      - Condition = {
                          - ArnLike = {
                              - "ecs:cluster" = "arn:aws:ecs:us-east-1:315341936575:cluster/frontend-dev"
                            }
                        }
                      - Effect    = "Allow"
                      - Resource  = "arn:aws:ecs:us-east-1:315341936575:task/frontend-dev/*"
                    },
                  - {
                      - Action   = "iam:PassRole"
                      - Effect   = "Allow"
                      - Resource = [
                          - "arn:aws:iam::315341936575:role/frontend-dev-task-executor",
                          - "arn:aws:iam::315341936575:role/frontend-dev-app",
                        ]
                      - Sid      = "PassRole"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        tags             = {}
        # (7 unchanged attributes hidden)
    }

  # module.service.aws_iam_role_policy.task_executor will be updated in-place
  ~ resource "aws_iam_role_policy" "task_executor" {
        id          = "frontend-dev-task-executor:frontend-dev-task-executor-role-policy"
        name        = "frontend-dev-task-executor-role-policy"
      ~ policy      = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "logs:PutLogEvents",
                          - "logs:DescribeLogStreams",
                          - "logs:CreateLogStream",
                        ]
                      - Effect   = "Allow"
                      - Resource = [
                          - "arn:aws:logs:us-east-1:315341936575:log-group:service/frontend-dev:*",
                          - "arn:aws:logs:us-east-1:315341936575:log-group:service/frontend-dev*",
                        ]
                    },
                  - {
                      - Action   = "ecr:GetAuthorizationToken"
                      - Effect   = "Allow"
                      - Resource = "*"
                      - Sid      = "ECRAuth"
                    },
                  - {
                      - Action   = [
                          - "ecr:GetDownloadUrlForLayer",
                          - "ecr:BatchGetImage",
                          - "ecr:BatchCheckLayerAvailability",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:ecr:us-east-1:315341936575:repository/simpler-grants-gov-frontend"
                      - Sid      = "ECRPullAccess"
                    },
                  - {
                      - Action   = [
                          - "ecr:GetDownloadUrlForLayer",
                          - "ecr:BatchGetImage",
                          - "ecr:BatchCheckLayerAvailability",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:ecr:us-east-1:315341936575:repository/simpler-grants-gov-fluentbit"
                      - Sid      = "ECRPullAccessFluentbit"
                    },
                  - {
                      - Action   = [
                          - "ecr:GetDownloadUrlForLayer",
                          - "ecr:BatchGetImage",
                          - "ecr:BatchCheckLayerAvailability",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:ecr:us-east-1:593207742271:repository/aws-guardduty-agent-fargate"
                      - Sid      = "ECRPullAccessGuardDuty"
                    },
                  - {
                      - Action   = "ssm:GetParameters"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:ssm:us-east-1:315341936575:parameter/new-relic-license-key"
                      - Sid      = "PullSharedNewRelicKey"
                    },
                  - {
                      - Action   = "ssm:GetParameters"
                      - Effect   = "Allow"
                      - Resource = [
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/new-relic-license-key",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/session-secret",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/sendy-list-id",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/sendy-api-url",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/sendy-api-key",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/new-relic-app-name",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-user-admin-off",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-search-table-on",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-search-off",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-search-drawer-on",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-saved-searches-on",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-saved-opportunities-on",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-opportunity-off",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-manage-users-off",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-auth-on",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/feature-apply-form-prototype-off",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/auth-login-url",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/api-url",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/api-auth-token",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/frontend/dev/X-API-KEY",
                          - "arn:aws:ssm:us-east-1:315341936575:parameter/api/dev/api-jwt-public-key",
                        ]
                      - Sid      = "SecretsAccess"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        # (2 unchanged attributes hidden)
    }

  # module.service.aws_iam_role_policy_attachment.events will be created
  + resource "aws_iam_role_policy_attachment" "events" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/frontend-dev-run-access"
      + role       = "frontend-dev-events"
    }

  # module.service.aws_iam_role_policy_attachment.scheduler will be created
  + resource "aws_iam_role_policy_attachment" "scheduler" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/frontend-dev-scheduler"
      + role       = "frontend-dev-scheduler"
    }

  # module.service.aws_iam_role_policy_attachment.workflow_orchestrator will be created
  + resource "aws_iam_role_policy_attachment" "workflow_orchestrator" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/frontend-dev-workflow-orchestrator"
      + role       = "frontend-dev-workflow-orchestrator"
    }

  # module.service.aws_lb_listener_rule.http_to_https_redirect[0] will be created
  + resource "aws_lb_listener_rule" "http_to_https_redirect" {
      + arn          = (known after apply)
      + id           = (known after apply)
      + listener_arn = "arn:aws:elasticloadbalancing:us-east-1:315341936575:listener/app/frontend-dev/3c9002fb0aa7756d/249586ef7c2428aa"
      + priority     = 50
      + tags_all     = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }

      + action {
          + order = (known after apply)
          + type  = "redirect"

          + redirect {
              + host        = "#{host}"
              + path        = "/#{path}"
              + port        = "443"
              + protocol    = "HTTPS"
              + query       = "#{query}"
              + status_code = "HTTP_301"
            }
        }

      + condition {
          + path_pattern {
              + values = [
                  + "/*",
                ]
            }
        }
    }

  # module.service.aws_s3_bucket_policy.cdn[0] will be updated in-place
  ~ resource "aws_s3_bucket_policy" "cdn" {
        id     = "frontend-dev-cdn-access-logs20241206211507516700000002"
      ~ policy = jsonencode(
            {
              - Statement = [
                  - {
                      - Action    = "s3:GetObject"
                      - Condition = {
                          - StringEquals = {
                              - "AWS:SourceArn" = "arn:aws:cloudfront::315341936575:distribution/E8MSK3F3PHH2L"
                            }
                        }
                      - Effect    = "Allow"
                      - Principal = {
                          - Service = "cloudfront.amazonaws.com"
                        }
                      - Resource  = "arn:aws:s3:::frontend-dev-cdn-access-logs20241206211507516700000002/*"
                      - Sid       = "AllowCloudFrontIngress"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        # (1 unchanged attribute hidden)
    }

  # module.storage.data.aws_iam_policy_document.storage will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "storage" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Deny"
          + resources = [
              + (known after apply),
            ]
          + sid       = "RestrictToTLSRequestsOnly"

          + condition {
              + test     = "Bool"
              + values   = [
                  + "false",
                ]
              + variable = "aws:SecureTransport"
            }

          + principals {
              + identifiers = [
                  + "*",
                ]
              + type        = "*"
            }
        }
    }

  # module.storage.data.aws_iam_policy_document.storage_access will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "storage_access" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:DeleteObject",
              + "s3:DeleteObjectTagging",
              + "s3:GetObject",
              + "s3:GetObjectAttributes",
              + "s3:GetObjectTagging",
              + "s3:ListBucket",
              + "s3:PutObject",
              + "s3:PutObjectTagging",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::simpler-grants-gov-frontend-dev",
              + "arn:aws:s3:::simpler-grants-gov-frontend-dev/*",
            ]
        }
      + statement {
          + actions   = [
              + "kms:Decrypt",
              + "kms:GenerateDataKey",
            ]
          + effect    = "Allow"
          + resources = [
              + (known after apply),
            ]
        }
    }

  # module.storage.aws_iam_policy.storage_access will be created
  + resource "aws_iam_policy" "storage_access" {
      + arn              = (known after apply)
      + attachment_count = (known after apply)
      + id               = (known after apply)
      + name             = "simpler-grants-gov-frontend-dev-access"
      + name_prefix      = (known after apply)
      + path             = "/"
      + policy           = (known after apply)
      + policy_id        = (known after apply)
      + tags_all         = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
    }

  # module.storage.aws_kms_key.storage will be created
  + resource "aws_kms_key" "storage" {
      + arn                                = (known after apply)
      + bypass_policy_lockout_safety_check = false
      + customer_master_key_spec           = "SYMMETRIC_DEFAULT"
      + deletion_window_in_days            = 10
      + description                        = "KMS key for bucket simpler-grants-gov-frontend-dev"
      + enable_key_rotation                = true
      + id                                 = (known after apply)
      + is_enabled                         = true
      + key_id                             = (known after apply)
      + key_usage                          = "ENCRYPT_DECRYPT"
      + multi_region                       = (known after apply)
      + policy                             = (known after apply)
      + rotation_period_in_days            = (known after apply)
      + tags_all                           = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
    }

  # module.storage.aws_s3_bucket.storage will be created
  + resource "aws_s3_bucket" "storage" {
      + acceleration_status         = (known after apply)
      + acl                         = (known after apply)
      + arn                         = (known after apply)
      + bucket                      = "simpler-grants-gov-frontend-dev"
      + bucket_domain_name          = (known after apply)
      + bucket_prefix               = (known after apply)
      + bucket_regional_domain_name = (known after apply)
      + force_destroy               = false
      + hosted_zone_id              = (known after apply)
      + id                          = (known after apply)
      + object_lock_enabled         = (known after apply)
      + policy                      = (known after apply)
      + region                      = (known after apply)
      + request_payer               = (known after apply)
      + tags_all                    = {
          + "app"                 = "frontend"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "frontend-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + website_domain              = (known after apply)
      + website_endpoint            = (known after apply)

      + cors_rule (known after apply)

      + grant (known after apply)

      + lifecycle_rule (known after apply)

      + logging (known after apply)

      + object_lock_configuration (known after apply)

      + replication_configuration (known after apply)

      + server_side_encryption_configuration (known after apply)

      + versioning (known after apply)

      + website (known after apply)
    }

  # module.storage.aws_s3_bucket_lifecycle_configuration.storage will be created
  + resource "aws_s3_bucket_lifecycle_configuration" "storage" {
      + bucket                                 = (known after apply)
      + expected_bucket_owner                  = (known after apply)
      + id                                     = (known after apply)
      + transition_default_minimum_object_size = "all_storage_classes_128K"

      + rule {
          + id     = "AbortIncompleteUpload"
          + prefix = (known after apply)
          + status = "Enabled"

          + abort_incomplete_multipart_upload {
              + days_after_initiation = 7
            }
        }
    }

  # module.storage.aws_s3_bucket_notification.storage will be created
  + resource "aws_s3_bucket_notification" "storage" {
      + bucket      = (known after apply)
      + eventbridge = true
      + id          = (known after apply)
    }

  # module.storage.aws_s3_bucket_policy.storage will be created
  + resource "aws_s3_bucket_policy" "storage" {
      + bucket = (known after apply)
      + id     = (known after apply)
      + policy = (known after apply)
    }

  # module.storage.aws_s3_bucket_public_access_block.storage will be created
  + resource "aws_s3_bucket_public_access_block" "storage" {
      + block_public_acls       = true
      + block_public_policy     = true
      + bucket                  = (known after apply)
      + id                      = (known after apply)
      + ignore_public_acls      = true
      + restrict_public_buckets = true
    }

  # module.storage.aws_s3_bucket_server_side_encryption_configuration.storage will be created
  + resource "aws_s3_bucket_server_side_encryption_configuration" "storage" {
      + bucket = (known after apply)
      + id     = (known after apply)

      + rule {
          + bucket_key_enabled = true

          + apply_server_side_encryption_by_default {
              + kms_master_key_id = (known after apply)
              + sse_algorithm     = "aws:kms"
            }
        }
    }

Plan: 21 to add, 6 to change, 3 to destroy.

Warning: Invalid Attribute Combination

  with module.service.aws_s3_bucket_lifecycle_configuration.access_logs,
  on ../../modules/service/access_logs.tf line 82, in resource "aws_s3_bucket_lifecycle_configuration" "access_logs":
  82:   rule {

No attribute specified when one (and only one) of [rule[0].prefix.<.filter]
is required

This will be an error in a future version of the provider

(and 6 more similar warnings elsewhere)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.

================================================================================
COMPONENT: analytics/service
================================================================================

data.terraform_remote_state.current_image_tag[0]: Reading...
module.service.data.external.whoami: Reading...
module.service.data.external.deploy_github_sha: Reading...
module.app_config.data.external.account_ids_by_name: Reading...
module.service.data.external.whoami: Read complete after 0s [id=-]
module.app_config.data.external.account_ids_by_name: Read complete after 0s [id=-]
module.service.data.external.deploy_github_sha: Read complete after 0s [id=-]
module.service.data.aws_ssm_parameter.fluent_bit_commit: Reading...
data.aws_vpc.network: Reading...
module.secrets.data.aws_ssm_parameter.secrets["ANALYTICS_SLACK_BOT_TOKEN"]: Reading...
module.service.data.aws_iam_policy_document.scheduler_assume_role: Reading...
module.service.data.aws_iam_policy_document.events_assume_role: Reading...
module.service.data.aws_region.current: Reading...
module.database[0].data.aws_rds_cluster.db_cluster: Reading...
module.service.aws_ecs_cluster.cluster: Refreshing state... [id=arn:aws:ecs:us-east-1:315341936575:cluster/analytics-dev]
module.service.data.aws_iam_policy_document.events_assume_role: Read complete after 0s [id=3959961479]
module.service.data.aws_iam_policy_document.scheduler_assume_role: Read complete after 0s [id=52247394]
module.service.data.aws_region.current: Read complete after 0s [id=us-east-1]
module.secrets.data.aws_ssm_parameter.secrets["GH_TOKEN"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["MB_DB_PASS"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["NEW_RELIC_LICENSE_KEY"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["ANALYTICS_REPORTING_CHANNEL_ID"]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["MB_DB_PASS"]: Read complete after 0s [id=/analytics/dev/metabase-db-pass]
module.service.aws_s3_bucket.access_logs: Refreshing state... [id=analytics-dev-access-logs20241029172617413200000004]
module.secrets.data.aws_ssm_parameter.secrets["ANALYTICS_SLACK_BOT_TOKEN"]: Read complete after 0s [id=/analytics/slack-bot-token]
data.aws_acm_certificate.certificate[0]: Reading...
module.secrets.data.aws_ssm_parameter.secrets["ANALYTICS_REPORTING_CHANNEL_ID"]: Read complete after 0s [id=/analytics/dev/reporting-channel-id]
module.service.aws_cloudwatch_log_group.scheduled_jobs["sprint-reports"]: Refreshing state... [id=/aws/vendedlogs/states/analytics-dev-sprint-reports/scheduled-jobs/20250314180447733700000002]
module.secrets.data.aws_ssm_parameter.secrets["NEW_RELIC_LICENSE_KEY"]: Read complete after 0s [id=/analytics/dev/new-relic-license-key]
module.domain.data.aws_route53_zone.zone[0]: Reading...
module.service.data.aws_ssm_parameter.fluent_bit_commit: Read complete after 0s [id=/fluent-bit-commit]
module.service.aws_cloudwatch_log_group.scheduled_jobs["opportunity-load-csvs"]: Refreshing state... [id=/aws/vendedlogs/states/analytics-dev-opportunity-load-csvs/scheduled-jobs/20250314180447731500000001]
module.secrets.data.aws_ssm_parameter.secrets["GH_TOKEN"]: Read complete after 0s [id=/analytics/github-token]
module.service.module.network.data.aws_subnets.public: Reading...
data.aws_ssm_parameter.api_analytics_bucket_id: Reading...
data.aws_ssm_parameter.api_analytics_bucket_id: Read complete after 1s [id=/buckets/api-dev/api-analytics-transfer/id]
module.database[0].data.aws_iam_policy.migrator_db_access_policy: Reading...
module.database[0].data.aws_rds_cluster.db_cluster: Read complete after 1s [id=analytics-dev]
module.service.module.network.data.aws_subnets.database: Reading...
module.service.module.network.data.aws_subnets.public: Read complete after 1s [id=us-east-1]
data.aws_ssm_parameter.api_analytics_bucket_arn: Reading...
data.terraform_remote_state.current_image_tag[0]: Read complete after 1s
data.aws_iam_policy.app_db_access_policy[0]: Reading...
module.database[0].data.aws_iam_policy.app_db_access_policy: Reading...
module.domain.data.aws_acm_certificate.certificate[0]: Reading...
module.service.module.network.data.aws_subnets.database: Read complete after 0s [id=us-east-1]
data.aws_rds_cluster.db_cluster[0]: Reading...
data.aws_ssm_parameter.api_analytics_bucket_arn: Read complete after 0s [id=/buckets/api-dev/api-analytics-transfer/arn]
module.service.aws_s3_bucket.general_purpose: Refreshing state... [id=analytics-dev-general-purpose20241029172617410500000003]
module.domain.data.aws_route53_zone.zone[0]: Read complete after 1s [id=Z04517193GDPF9DWUX2WT]
data.aws_acm_certificate.certificate[0]: Read complete after 1s [id=arn:aws:acm:us-east-1:315341936575:certificate/c9cddf6f-7770-4b8c-8b79-04e00e662e2c]
data.aws_rds_cluster.db_cluster[0]: Read complete after 0s [id=analytics-dev]
module.service.data.aws_iam_policy_document.ecs_tasks_assume_role_policy: Reading...
module.service.data.aws_caller_identity.current: Reading...
module.service.module.network.data.aws_vpc.network: Reading...
module.service.data.aws_iam_policy_document.ecs_tasks_assume_role_policy: Read complete after 0s [id=4229150499]
module.service.data.aws_iam_policy_document.ecs_exec: Reading...
module.service.data.aws_iam_policy_document.ecs_exec: Read complete after 0s [id=1236260518]
module.service.module.network.data.aws_subnets.private: Reading...
module.service.data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
data.aws_iam_policy.migrator_db_access_policy[0]: Reading...
module.service.module.network.data.aws_subnets.private: Read complete after 0s [id=us-east-1]
data.aws_vpc.network: Read complete after 1s [id=vpc-08f522c5cc442d126]
module.service.aws_cloudwatch_log_group.service_logs: Refreshing state... [id=service/analytics-dev]
module.service.aws_iam_role.scheduler: Refreshing state... [id=analytics-dev-scheduler]
module.domain.data.aws_acm_certificate.certificate[0]: Read complete after 0s [id=arn:aws:acm:us-east-1:315341936575:certificate/c9cddf6f-7770-4b8c-8b79-04e00e662e2c]
module.service.aws_iam_role.events: Refreshing state... [id=analytics-dev-events]
data.aws_iam_policy_document.api_analytics_bucket_access: Reading...
data.aws_iam_policy_document.api_analytics_bucket_access: Read complete after 0s [id=2174760927]
module.service.aws_iam_role.task_executor: Refreshing state... [id=analytics-dev-task-executor]
module.service.aws_iam_role.app_service: Refreshing state... [id=analytics-dev-app]
module.service.module.network.data.aws_vpc.network: Read complete after 1s [id=vpc-08f522c5cc442d126]
module.service.aws_iam_policy.ecs_exec: Refreshing state... [id=arn:aws:iam::315341936575:policy/analytics-dev-ecs-exec]
module.service.data.aws_iam_policy_document.runtime_logs: Reading...
module.service.data.aws_iam_policy_document.runtime_logs: Read complete after 0s [id=3547612059]
module.service.data.aws_iam_policy_document.workflow_orchestrator_assume_role: Reading...
module.service.data.aws_iam_policy_document.workflow_orchestrator_assume_role: Read complete after 0s [id=3468042870]
data.aws_subnets.private: Reading...
data.aws_subnets.private: Read complete after 0s [id=us-east-1]
data.aws_subnets.public: Reading...
data.aws_security_groups.aws_services: Reading...
module.service.aws_cloudwatch_log_group.fluentbit: Refreshing state... [id=service/analytics-dev-fluentbit]
aws_iam_policy.api_analytics_bucket_access: Refreshing state... [id=arn:aws:iam::315341936575:policy/dev-api-analytics-transfer]
module.service.module.network.data.aws_security_groups.aws_services: Reading...
data.aws_subnets.public: Read complete after 0s [id=us-east-1]
module.service.aws_iam_policy.runtime_logs: Refreshing state... [id=arn:aws:iam::315341936575:policy/analytics-dev-task-executor-role-policy]
module.service.aws_iam_role.workflow_orchestrator: Refreshing state... [id=analytics-dev-workflow-orchestrator]
data.aws_security_groups.aws_services: Read complete after 0s [id=us-east-1]
module.service.data.aws_iam_policy_document.task_executor: Reading...
module.service.data.aws_iam_policy_document.task_executor: Read complete after 0s [id=280783001]
module.service.aws_s3_bucket_server_side_encryption_configuration.encryption: Refreshing state... [id=analytics-dev-access-logs20241029172617413200000004]
module.service.module.network.data.aws_security_groups.aws_services: Read complete after 0s [id=us-east-1]
module.service.data.aws_iam_policy_document.access_logs_put_access: Reading...
module.service.data.aws_iam_policy_document.access_logs_put_access: Read complete after 0s [id=1532338303]
module.service.aws_s3_bucket_lifecycle_configuration.access_logs: Refreshing state... [id=analytics-dev-access-logs20241029172617413200000004]
module.service.aws_s3_bucket_public_access_block.access_logs: Refreshing state... [id=analytics-dev-access-logs20241029172617413200000004]
module.service.aws_security_group.alb: Refreshing state... [id=sg-0c9a3959f2f42a76e]
module.service.aws_iam_role_policy.task_executor: Refreshing state... [id=analytics-dev-task-executor:analytics-dev-task-executor-role-policy]
module.service.aws_s3_bucket_policy.access_logs: Refreshing state... [id=analytics-dev-access-logs20241029172617413200000004]
module.service.aws_iam_role_policy_attachment.runtime_logs: Refreshing state... [id=analytics-dev-app-20250430181528072200000001]
module.service.aws_security_group_rule.http_ingress: Refreshing state... [id=sgrule-1369163356]
module.service.aws_security_group.app: Refreshing state... [id=sg-09c1394b598221f67]
module.service.aws_iam_role_policy_attachment.extra_policies["api_analytics_bucket_access"]: Refreshing state... [id=analytics-dev-app-20250121210750300800000001]
module.service.aws_security_group_rule.http_ingress_ipv6: Refreshing state... [id=sgrule-4112141054]
module.service.aws_s3_bucket_server_side_encryption_configuration.general_purpose_encryption: Refreshing state... [id=analytics-dev-general-purpose20241029172617410500000003]
module.service.aws_s3_bucket_lifecycle_configuration.general_purpose: Refreshing state... [id=analytics-dev-general-purpose20241029172617410500000003]
module.service.aws_s3_bucket_public_access_block.general_purpose: Refreshing state... [id=analytics-dev-general-purpose20241029172617410500000003]
module.service.data.aws_iam_policy_document.general_purpose_put_access: Reading...
module.service.data.aws_iam_policy_document.general_purpose_put_access: Read complete after 0s [id=417394005]
module.service.aws_security_group_rule.alb_app_local_health_check: Refreshing state... [id=sgrule-3202974405]
module.service.aws_s3_bucket_policy.general_purpose: Refreshing state... [id=analytics-dev-general-purpose20241029172617410500000003]
data.aws_iam_policy.app_db_access_policy[0]: Read complete after 2s [id=arn:aws:iam::315341936575:policy/analytics-dev-app-access]
module.database[0].data.aws_iam_policy.migrator_db_access_policy: Read complete after 2s [id=arn:aws:iam::315341936575:policy/analytics-dev-migrator-access]
data.aws_iam_policy.migrator_db_access_policy[0]: Read complete after 2s [id=arn:aws:iam::315341936575:policy/analytics-dev-migrator-access]
module.database[0].data.aws_iam_policy.app_db_access_policy: Read complete after 3s [id=arn:aws:iam::315341936575:policy/analytics-dev-app-access]
module.service.aws_iam_role_policy_attachment.app_service_db_access[0]: Refreshing state... [id=analytics-dev-app-20250211201518640400000002]
module.service.aws_iam_role.migrator_task[0]: Refreshing state... [id=analytics-dev-migrator]
module.service.aws_vpc_security_group_ingress_rule.db_ingress_from_service[0]: Refreshing state... [id=sgr-012f867ee6ffdbdb0]
module.service.aws_ecs_task_definition.app: Refreshing state... [id=analytics-dev]
module.service.data.aws_iam_policy_document.run_task: Reading...
module.service.data.aws_iam_policy_document.run_task: Read complete after 0s [id=1712525928]
module.service.aws_ecs_service.app: Refreshing state... [id=arn:aws:ecs:us-east-1:315341936575:service/analytics-dev/analytics-dev]
module.service.aws_iam_policy.run_task: Refreshing state... [id=arn:aws:iam::315341936575:policy/analytics-dev-run-access]
module.service.aws_iam_role_policy_attachment.migrator_app_db_access[0]: Refreshing state... [id=analytics-dev-migrator-20251218101854760900000001]
module.service.aws_iam_role_policy_attachment.migrator_db_access[0]: Refreshing state... [id=analytics-dev-migrator-20250211201518636400000001]
module.service.aws_ecs_task_definition.migrator[0]: Refreshing state... [id=analytics-dev-migrator]
module.service.aws_sfn_state_machine.scheduled_jobs["sprint-reports"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-sprint-reports]
module.service.aws_sfn_state_machine.scheduled_jobs["opportunity-load-csvs"]: Refreshing state... [id=arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-opportunity-load-csvs]
module.service.aws_iam_policy.workflow_orchestrator: Refreshing state... [id=arn:aws:iam::315341936575:policy/analytics-dev-workflow-orchestrator]
module.service.aws_scheduler_schedule.scheduled_jobs["sprint-reports"]: Refreshing state... [id=default/analytics-dev-sprint-reports]
module.service.aws_scheduler_schedule.scheduled_jobs["opportunity-load-csvs"]: Refreshing state... [id=default/analytics-dev-opportunity-load-csvs]
module.service.aws_iam_policy.scheduler: Refreshing state... [id=arn:aws:iam::315341936575:policy/analytics-dev-scheduler]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
-/+ destroy and then create replacement
 <= read (data resources)

Terraform will perform the following actions:

  # module.monitoring.aws_cloudwatch_log_metric_filter.service_error_filter will be created
  + resource "aws_cloudwatch_log_metric_filter" "service_error_filter" {
      + id             = (known after apply)
      + log_group_name = "service/analytics-dev"
      + name           = "service-error-filter"
      + pattern        = "%ERROR | Exception%"

      + metric_transformation {
          + name      = "ErrorCount"
          + namespace = "analytics-dev"
          + unit      = "None"
          + value     = "1"
        }
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_app_http_5xx_count will be created
  + resource "aws_cloudwatch_metric_alarm" "high_app_http_5xx_count" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High HTTP service 5XX error count"
      + alarm_name                            = "analytics-dev-high-app-5xx-count"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "HTTPCode_Target_5XX_Count"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "analytics"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "analytics-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 1
      + treat_missing_data                    = "notBreaching"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_app_response_time will be created
  + resource "aws_cloudwatch_metric_alarm" "high_app_response_time" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High target latency alert"
      + alarm_name                            = "analytics-dev-high-app-response-time"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "TargetResponseTime"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Average"
      + tags_all                              = {
          + "app"                 = "analytics"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "analytics-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 0.5
      + treat_missing_data                    = "ignore"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.high_load_balancer_http_5xx_count will be created
  + resource "aws_cloudwatch_metric_alarm" "high_load_balancer_http_5xx_count" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "High HTTP ELB 5XX error count"
      + alarm_name                            = "analytics-dev-high-load-balancer-5xx-count"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanOrEqualToThreshold"
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 5
      + id                                    = (known after apply)
      + metric_name                           = "HTTPCode_ELB_5XX_Count"
      + namespace                             = "AWS/ApplicationELB"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "analytics"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "analytics-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 1
      + treat_missing_data                    = "notBreaching"
    }

  # module.monitoring.aws_cloudwatch_metric_alarm.service_errors will be created
  + resource "aws_cloudwatch_metric_alarm" "service_errors" {
      + actions_enabled                       = true
      + alarm_actions                         = (known after apply)
      + alarm_description                     = "Alarm for service errors"
      + alarm_name                            = "analytics-dev-errors"
      + arn                                   = (known after apply)
      + comparison_operator                   = "GreaterThanThreshold"
      + evaluate_low_sample_count_percentiles = (known after apply)
      + evaluation_periods                    = 1
      + id                                    = (known after apply)
      + metric_name                           = "ErrorCount"
      + namespace                             = "analytics-dev"
      + ok_actions                            = (known after apply)
      + period                                = 60
      + statistic                             = "Sum"
      + tags_all                              = {
          + "app"                 = "analytics"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "analytics-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + threshold                             = 0
      + treat_missing_data                    = "ignore"
    }

  # module.monitoring.aws_sns_topic.this will be created
  + resource "aws_sns_topic" "this" {
      + arn                         = (known after apply)
      + beginning_archive_time      = (known after apply)
      + content_based_deduplication = false
      + fifo_topic                  = false
      + id                          = (known after apply)
      + name                        = "analytics-dev-monitoring"
      + name_prefix                 = (known after apply)
      + owner                       = (known after apply)
      + policy                      = (known after apply)
      + signature_version           = (known after apply)
      + tags_all                    = {
          + "app"                 = "analytics"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "analytics-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + tracing_config              = (known after apply)
    }

  # module.service.data.aws_iam_policy_document.scheduler will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "aws_iam_policy_document" "scheduler" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "events:DescribeRule",
              + "events:PutRule",
              + "events:PutTargets",
            ]
          + resources = [
              + "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule",
            ]
          + sid       = "StepFunctionsEvents"
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-opportunity-load-csvs",
            ]
        }
      + statement {
          + actions   = [
              + "states:StartExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-sprint-reports",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-opportunity-load-csvs:*",
            ]
        }
      + statement {
          + actions   = [
              + "states:DescribeExecution",
              + "states:StopExecution",
            ]
          + resources = [
              + "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-sprint-reports:*",
            ]
        }
    }

  # module.service.data.aws_iam_policy_document.workflow_orchestrator will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "workflow_orchestrator" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "logs:CreateLogDelivery",
              + "logs:CreateLogStream",
              + "logs:DeleteLogDelivery",
              + "logs:DescribeLogGroups",
              + "logs:DescribeResourcePolicies",
              + "logs:GetLogDelivery",
              + "logs:ListLogDeliveries",
              + "logs:PutLogEvents",
              + "logs:PutResourcePolicy",
              + "logs:UpdateLogDelivery",
            ]
          + resources = [
              + "*",
            ]
          + sid       = "UnscopeLogsPermissions"
        }
      + statement {
          + actions   = [
              + "events:DescribeRule",
              + "events:PutRule",
              + "events:PutTargets",
            ]
          + resources = [
              + "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForECSTaskRule",
            ]
          + sid       = "StepFunctionsEvents"
        }
      + statement {
          + actions   = [
              + "ecs:RunTask",
            ]
          + effect    = "Allow"
          + resources = [
              + (known after apply),
              + (known after apply),
            ]

          + condition {
              + test     = "ArnLike"
              + values   = [
                  + "arn:aws:ecs:us-east-1:315341936575:cluster/analytics-dev",
                ]
              + variable = "ecs:cluster"
            }
        }
      + statement {
          + actions   = [
              + "ecs:DescribeTasks",
              + "ecs:StopTask",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:ecs:us-east-1:315341936575:task/analytics-dev/*",
            ]

          + condition {
              + test     = "ArnLike"
              + values   = [
                  + "arn:aws:ecs:us-east-1:315341936575:cluster/analytics-dev",
                ]
              + variable = "ecs:cluster"
            }
        }
      + statement {
          + actions   = [
              + "iam:PassRole",
            ]
          + resources = [
              + "arn:aws:iam::315341936575:role/analytics-dev-app",
              + "arn:aws:iam::315341936575:role/analytics-dev-migrator",
              + "arn:aws:iam::315341936575:role/analytics-dev-task-executor",
            ]
          + sid       = "PassRole"
        }
    }

  # module.service.aws_ecs_service.app will be updated in-place
  ~ resource "aws_ecs_service" "app" {
        id                                 = "arn:aws:ecs:us-east-1:315341936575:service/analytics-dev/analytics-dev"
        name                               = "analytics-dev"
        tags                               = {}
      ~ task_definition                    = "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev:496" -> (known after apply)
        # (16 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_ecs_task_definition.app must be replaced
-/+ resource "aws_ecs_task_definition" "app" {
      ~ arn                      = "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev:496" -> (known after apply)
      ~ arn_without_revision     = "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev" -> (known after apply)
      ~ container_definitions    = (sensitive value) # forces replacement
      ~ enable_fault_injection   = false -> (known after apply)
      ~ id                       = "analytics-dev" -> (known after apply)
      ~ revision                 = 496 -> (known after apply)
      - tags                     = {} -> null
        # (12 unchanged attributes hidden)
    }

  # module.service.aws_ecs_task_definition.migrator[0] must be replaced
-/+ resource "aws_ecs_task_definition" "migrator" {
      ~ arn                      = "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev-migrator:43" -> (known after apply)
      ~ arn_without_revision     = "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev-migrator" -> (known after apply)
      ~ container_definitions    = (sensitive value) # forces replacement
      ~ enable_fault_injection   = false -> (known after apply)
      ~ id                       = "analytics-dev-migrator" -> (known after apply)
      ~ revision                 = 43 -> (known after apply)
      - tags                     = {} -> null
        # (12 unchanged attributes hidden)

      - volume {
          - configure_at_launch = false -> null
          - name                = "tmp" -> null
            # (1 unchanged attribute hidden)
        }
      + volume {
          + configure_at_launch = (known after apply)
          + name                = "tmp"
            # (1 unchanged attribute hidden)
        }
    }

  # module.service.aws_iam_policy.scheduler will be updated in-place
  ~ resource "aws_iam_policy" "scheduler" {
        id               = "arn:aws:iam::315341936575:policy/analytics-dev-scheduler"
        name             = "analytics-dev-scheduler"
      ~ policy           = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "events:PutTargets",
                          - "events:PutRule",
                          - "events:DescribeRule",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForStepFunctionsExecutionRule"
                      - Sid      = "StepFunctionsEvents"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-opportunity-load-csvs"
                    },
                  - {
                      - Action   = "states:StartExecution"
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-sprint-reports"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-opportunity-load-csvs:*"
                    },
                  - {
                      - Action   = [
                          - "states:StopExecution",
                          - "states:DescribeExecution",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-sprint-reports:*"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        tags             = {}
        # (7 unchanged attributes hidden)
    }

  # module.service.aws_iam_policy.workflow_orchestrator will be updated in-place
  ~ resource "aws_iam_policy" "workflow_orchestrator" {
        id               = "arn:aws:iam::315341936575:policy/analytics-dev-workflow-orchestrator"
        name             = "analytics-dev-workflow-orchestrator"
      ~ policy           = jsonencode(
            {
              - Statement = [
                  - {
                      - Action   = [
                          - "logs:UpdateLogDelivery",
                          - "logs:PutResourcePolicy",
                          - "logs:PutLogEvents",
                          - "logs:ListLogDeliveries",
                          - "logs:GetLogDelivery",
                          - "logs:DescribeResourcePolicies",
                          - "logs:DescribeLogGroups",
                          - "logs:DeleteLogDelivery",
                          - "logs:CreateLogStream",
                          - "logs:CreateLogDelivery",
                        ]
                      - Effect   = "Allow"
                      - Resource = "*"
                      - Sid      = "UnscopeLogsPermissions"
                    },
                  - {
                      - Action   = [
                          - "events:PutTargets",
                          - "events:PutRule",
                          - "events:DescribeRule",
                        ]
                      - Effect   = "Allow"
                      - Resource = "arn:aws:events:us-east-1:315341936575:rule/StepFunctionsGetEventsForECSTaskRule"
                      - Sid      = "StepFunctionsEvents"
                    },
                  - {
                      - Action    = "ecs:RunTask"
                      - Condition = {
                          - ArnLike = {
                              - "ecs:cluster" = "arn:aws:ecs:us-east-1:315341936575:cluster/analytics-dev"
                            }
                        }
                      - Effect    = "Allow"
                      - Resource  = [
                          - "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev:*",
                          - "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev-migrator:*",
                        ]
                    },
                  - {
                      - Action    = [
                          - "ecs:StopTask",
                          - "ecs:DescribeTasks",
                        ]
                      - Condition = {
                          - ArnLike = {
                              - "ecs:cluster" = "arn:aws:ecs:us-east-1:315341936575:cluster/analytics-dev"
                            }
                        }
                      - Effect    = "Allow"
                      - Resource  = "arn:aws:ecs:us-east-1:315341936575:task/analytics-dev/*"
                    },
                  - {
                      - Action   = "iam:PassRole"
                      - Effect   = "Allow"
                      - Resource = [
                          - "arn:aws:iam::315341936575:role/analytics-dev-task-executor",
                          - "arn:aws:iam::315341936575:role/analytics-dev-migrator",
                          - "arn:aws:iam::315341936575:role/analytics-dev-app",
                        ]
                      - Sid      = "PassRole"
                    },
                ]
              - Version   = "2012-10-17"
            }
        ) -> (known after apply)
        tags             = {}
        # (7 unchanged attributes hidden)
    }

  # module.service.aws_iam_role_policy_attachment.events will be created
  + resource "aws_iam_role_policy_attachment" "events" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/analytics-dev-run-access"
      + role       = "analytics-dev-events"
    }

  # module.service.aws_iam_role_policy_attachment.scheduler will be created
  + resource "aws_iam_role_policy_attachment" "scheduler" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/analytics-dev-scheduler"
      + role       = "analytics-dev-scheduler"
    }

  # module.service.aws_iam_role_policy_attachment.workflow_orchestrator will be created
  + resource "aws_iam_role_policy_attachment" "workflow_orchestrator" {
      + id         = (known after apply)
      + policy_arn = "arn:aws:iam::315341936575:policy/analytics-dev-workflow-orchestrator"
      + role       = "analytics-dev-workflow-orchestrator"
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["opportunity-load-csvs"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/analytics-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-09c1394b598221f67",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "poetry",
                                          - "run",
                                          - "analytics",
                                          - "etl",
                                          - "opportunity-load",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "analytics-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev-migrator:43"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-opportunity-load-csvs"
        name                      = "analytics-dev-opportunity-load-csvs"
        tags                      = {
            "job"  = "opportunity-load-csvs"
            "name" = "analytics-dev-opportunity-load-csvs"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.service.aws_sfn_state_machine.scheduled_jobs["sprint-reports"] will be updated in-place
  ~ resource "aws_sfn_state_machine" "scheduled_jobs" {
      ~ definition                = jsonencode(
            {
              - StartAt = "RunTask"
              - States  = {
                  - RunTask = {
                      - End        = true
                      - Parameters = {
                          - Cluster              = "arn:aws:ecs:us-east-1:315341936575:cluster/analytics-dev"
                          - LaunchType           = "FARGATE"
                          - NetworkConfiguration = {
                              - AwsvpcConfiguration = {
                                  - SecurityGroups = [
                                      - "sg-09c1394b598221f67",
                                    ]
                                  - Subnets        = [
                                      - "subnet-0a5ea667d3751639f",
                                      - "subnet-068ede7dcfd9469ab",
                                      - "subnet-019f469ba97dc6ec7",
                                    ]
                                }
                            }
                          - Overrides            = {
                              - ContainerOverrides = [
                                  - {
                                      - Command     = [
                                          - "make",
                                          - "gh-extract-transform-and-load",
                                        ]
                                      - Cpu         = 768
                                      - Environment = []
                                      - Memory      = 1792
                                      - Name        = "analytics-dev"
                                    },
                                ]
                              - Cpu                = "1024"
                              - Memory             = "2048"
                            }
                          - TaskDefinition       = "arn:aws:ecs:us-east-1:315341936575:task-definition/analytics-dev-migrator:43"
                        }
                      - Resource   = "arn:aws:states:::ecs:runTask.sync"
                      - Type       = "Task"
                    }
                }
            }
        ) -> (known after apply)
        id                        = "arn:aws:states:us-east-1:315341936575:stateMachine:analytics-dev-sprint-reports"
        name                      = "analytics-dev-sprint-reports"
        tags                      = {
            "job"  = "sprint-reports"
            "name" = "analytics-dev-sprint-reports"
        }
        # (11 unchanged attributes hidden)

        # (3 unchanged blocks hidden)
    }

  # module.storage.data.aws_iam_policy_document.storage will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "storage" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:*",
            ]
          + effect    = "Deny"
          + resources = [
              + (known after apply),
            ]
          + sid       = "RestrictToTLSRequestsOnly"

          + condition {
              + test     = "Bool"
              + values   = [
                  + "false",
                ]
              + variable = "aws:SecureTransport"
            }

          + principals {
              + identifiers = [
                  + "*",
                ]
              + type        = "*"
            }
        }
    }

  # module.storage.data.aws_iam_policy_document.storage_access will be read during apply
  # (config refers to values not yet known)
 <= data "aws_iam_policy_document" "storage_access" {
      + id            = (known after apply)
      + json          = (known after apply)
      + minified_json = (known after apply)

      + statement {
          + actions   = [
              + "s3:DeleteObject",
              + "s3:DeleteObjectTagging",
              + "s3:GetObject",
              + "s3:GetObjectAttributes",
              + "s3:GetObjectTagging",
              + "s3:ListBucket",
              + "s3:PutObject",
              + "s3:PutObjectTagging",
            ]
          + effect    = "Allow"
          + resources = [
              + "arn:aws:s3:::simpler-grants-gov-analytics-dev",
              + "arn:aws:s3:::simpler-grants-gov-analytics-dev/*",
            ]
        }
      + statement {
          + actions   = [
              + "kms:Decrypt",
              + "kms:GenerateDataKey",
            ]
          + effect    = "Allow"
          + resources = [
              + (known after apply),
            ]
        }
    }

  # module.storage.aws_iam_policy.storage_access will be created
  + resource "aws_iam_policy" "storage_access" {
      + arn              = (known after apply)
      + attachment_count = (known after apply)
      + id               = (known after apply)
      + name             = "simpler-grants-gov-analytics-dev-access"
      + name_prefix      = (known after apply)
      + path             = "/"
      + policy           = (known after apply)
      + policy_id        = (known after apply)
      + tags_all         = {
          + "app"                 = "analytics"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "analytics-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
    }

  # module.storage.aws_kms_key.storage will be created
  + resource "aws_kms_key" "storage" {
      + arn                                = (known after apply)
      + bypass_policy_lockout_safety_check = false
      + customer_master_key_spec           = "SYMMETRIC_DEFAULT"
      + deletion_window_in_days            = 10
      + description                        = "KMS key for bucket simpler-grants-gov-analytics-dev"
      + enable_key_rotation                = true
      + id                                 = (known after apply)
      + is_enabled                         = true
      + key_id                             = (known after apply)
      + key_usage                          = "ENCRYPT_DECRYPT"
      + multi_region                       = (known after apply)
      + policy                             = (known after apply)
      + rotation_period_in_days            = (known after apply)
      + tags_all                           = {
          + "app"                 = "analytics"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "analytics-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
    }

  # module.storage.aws_s3_bucket.storage will be created
  + resource "aws_s3_bucket" "storage" {
      + acceleration_status         = (known after apply)
      + acl                         = (known after apply)
      + arn                         = (known after apply)
      + bucket                      = "simpler-grants-gov-analytics-dev"
      + bucket_domain_name          = (known after apply)
      + bucket_prefix               = (known after apply)
      + bucket_regional_domain_name = (known after apply)
      + force_destroy               = false
      + hosted_zone_id              = (known after apply)
      + id                          = (known after apply)
      + object_lock_enabled         = (known after apply)
      + policy                      = (known after apply)
      + region                      = (known after apply)
      + request_payer               = (known after apply)
      + tags_all                    = {
          + "app"                 = "analytics"
          + "description"         = "Application resources created in dev environment"
          + "environment"         = "dev"
          + "owner"               = "navapbc"
          + "project"             = "simpler-grants-gov"
          + "repository"          = "https://github.com/HHS/simpler-grants-gov"
          + "service_name"        = "analytics-dev"
          + "terraform"           = "true"
          + "terraform_workspace" = "default"
        }
      + website_domain              = (known after apply)
      + website_endpoint            = (known after apply)

      + cors_rule (known after apply)

      + grant (known after apply)

      + lifecycle_rule (known after apply)

      + logging (known after apply)

      + object_lock_configuration (known after apply)

      + replication_configuration (known after apply)

      + server_side_encryption_configuration (known after apply)

      + versioning (known after apply)

      + website (known after apply)
    }

  # module.storage.aws_s3_bucket_lifecycle_configuration.storage will be created
  + resource "aws_s3_bucket_lifecycle_configuration" "storage" {
      + bucket                                 = (known after apply)
      + expected_bucket_owner                  = (known after apply)
      + id                                     = (known after apply)
      + transition_default_minimum_object_size = "all_storage_classes_128K"

      + rule {
          + id     = "AbortIncompleteUpload"
          + prefix = (known after apply)
          + status = "Enabled"

          + abort_incomplete_multipart_upload {
              + days_after_initiation = 7
            }
        }
    }

  # module.storage.aws_s3_bucket_notification.storage will be created
  + resource "aws_s3_bucket_notification" "storage" {
      + bucket      = (known after apply)
      + eventbridge = true
      + id          = (known after apply)
    }

  # module.storage.aws_s3_bucket_policy.storage will be created
  + resource "aws_s3_bucket_policy" "storage" {
      + bucket = (known after apply)
      + id     = (known after apply)
      + policy = (known after apply)
    }

  # module.storage.aws_s3_bucket_public_access_block.storage will be created
  + resource "aws_s3_bucket_public_access_block" "storage" {
      + block_public_acls       = true
      + block_public_policy     = true
      + bucket                  = (known after apply)
      + id                      = (known after apply)
      + ignore_public_acls      = true
      + restrict_public_buckets = true
    }

  # module.storage.aws_s3_bucket_server_side_encryption_configuration.storage will be created
  + resource "aws_s3_bucket_server_side_encryption_configuration" "storage" {
      + bucket = (known after apply)
      + id     = (known after apply)

      + rule {
          + bucket_key_enabled = true

          + apply_server_side_encryption_by_default {
              + kms_master_key_id = (known after apply)
              + sse_algorithm     = "aws:kms"
            }
        }
    }

Plan: 19 to add, 5 to change, 2 to destroy.

Changes to Outputs:
  + migrator_username             = "migrator"

Warning: Invalid Attribute Combination

  with module.service.aws_s3_bucket_lifecycle_configuration.access_logs,
  on ../../modules/service/access_logs.tf line 82, in resource "aws_s3_bucket_lifecycle_configuration" "access_logs":
  82:   rule {

No attribute specified when one (and only one) of [rule[0].prefix.<.filter]
is required

This will be an error in a future version of the provider

(and 6 more similar warnings elsewhere)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Note: You didn't use the -out option to save this plan, so Terraform can't
guarantee to take exactly these actions if you run "terraform apply" now.

================================================================================
COMPONENT: analytics/database
================================================================================

module.app_config.data.external.account_ids_by_name: Reading...
module.database.random_id.db_superuser: Refreshing state... [id=L016cYTj5tTQGlo0U5Wl6g]
module.app_config.data.external.account_ids_by_name: Read complete after 0s [id=-]
module.database.data.aws_region.current: Reading...
module.database.data.aws_iam_policy_document.rds_enhanced_monitoring: Reading...
module.database.data.aws_kms_key.backup_vault_key: Reading...
data.aws_vpc.network: Reading...
module.database.data.aws_kms_key.default_ssm_key: Reading...
module.database.data.aws_iam_policy_document.role_manager_assume_role: Reading...
module.database.data.aws_iam_policy.lambda_vpc_access: Reading...
module.database.data.aws_caller_identity.current: Reading...
module.database.aws_rds_cluster_parameter_group.rds_query_logging: Refreshing state... [id=analytics-dev-17]
module.database.aws_kms_key.role_manager: Refreshing state... [id=fa35d51e-23cb-4441-905d-30a80e7ce359]
module.database.data.aws_region.current: Read complete after 0s [id=us-east-1]
module.database.data.aws_iam_policy_document.role_manager_assume_role: Read complete after 0s [id=2690255455]
module.database.data.aws_iam_policy_document.rds_enhanced_monitoring: Read complete after 0s [id=76086537]
module.database.data.aws_iam_policy_document.db_backup_policy: Reading...
module.database.aws_kms_key.db: Refreshing state... [id=3b48e737-af2a-4f62-b5ac-a7466aa41c27]
module.database.aws_kms_key.dms_endpoints: Refreshing state... [id=2ff80005-04f6-42c1-951c-59a4fab19627]
module.database.data.aws_iam_policy_document.db_backup_policy: Read complete after 0s [id=1497918837]
module.database.aws_iam_role.rds_enhanced_monitoring: Refreshing state... [id=analytics-dev-db-monitor-20240325193749424800000002]
module.database.data.aws_caller_identity.current: Read complete after 0s [id=315341936575]
module.database.aws_iam_role.db_backup_role: Refreshing state... [id=analytics-dev-db-backup-20240325193749425400000004]
module.database.data.aws_kms_key.backup_vault_key: Read complete after 0s [id=fc09b7a2-be4b-40cf-a259-4ee81bd24693]
module.database.aws_backup_vault.backup_vault: Refreshing state... [id=analytics-dev-db-backup-vault]
module.database.data.aws_kms_key.default_ssm_key: Read complete after 0s [id=838d74b1-f6a8-469b-b8fa-9ebf5f75d67f]
module.database.aws_iam_role_policy_attachment.rds_enhanced_monitoring: Refreshing state... [id=analytics-dev-db-monitor-20240325193749424800000002-20240325193750417100000006]
module.database.aws_iam_role_policy_attachment.db_backup_role_policy_attachment: Refreshing state... [id=analytics-dev-db-backup-20240325193749425400000004-20240325193750392800000005]
module.database.aws_backup_plan.backup_plan: Refreshing state... [id=f56e13d0-3445-4bec-a833-d37c43048487]
data.aws_vpc.network: Read complete after 1s [id=vpc-08f522c5cc442d126]
data.aws_security_groups.aws_services: Reading...
data.aws_subnets.database: Reading...
module.database.aws_security_group.role_manager: Refreshing state... [id=sg-05c31dd74bad744cc]
module.database.aws_security_group.db: Refreshing state... [id=sg-0028da5be25711e39]
data.aws_security_groups.aws_services: Read complete after 0s [id=us-east-1]
module.database.aws_vpc_security_group_egress_rule.role_manager_egress_to_vpc_endpoints: Refreshing state... [id=sgr-0027c29b99d760421]
module.database.aws_vpc_security_group_ingress_rule.vpc_endpoints_ingress_from_role_manager: Refreshing state... [id=sgr-02017fa4b8ddf9e43]
module.database.aws_vpc_security_group_ingress_rule.db_ingress_from_role_manager: Refreshing state... [id=sgr-02fdae39bde0349e7]
module.database.aws_vpc_security_group_egress_rule.egress_to_oracle: Refreshing state... [id=sgr-062f9771bc3847a09]
module.database.aws_vpc_security_group_egress_rule.role_manager_egress_to_db: Refreshing state... [id=sgr-0156255704bec1b19]
module.database.aws_vpc_security_group_ingress_rule.ingress_from_oracle: Refreshing state... [id=sgr-003296d5d2ae60726]
module.database.aws_rds_cluster.db: Refreshing state... [id=analytics-dev]
data.aws_subnets.database: Read complete after 0s [id=us-east-1]
module.database.data.aws_secretsmanager_secret.db_password: Reading...
module.database.aws_backup_selection.db_backup: Refreshing state... [id=b41fac56-2b8f-42a8-9c54-43135b24b7f3]
module.database.data.aws_iam_policy_document.app_db_access: Reading...
module.database.data.aws_iam_policy_document.migrator_db_access: Reading...
module.database.aws_rds_cluster_instance.instance[1]: Refreshing state... [id=analytics-dev-instance-1]
module.database.aws_rds_cluster_instance.instance[0]: Refreshing state... [id=analytics-dev-instance-0]
module.database.data.aws_iam_policy_document.app_db_access: Read complete after 0s [id=2857112179]
module.database.data.aws_iam_policy_document.migrator_db_access: Read complete after 0s [id=1121382655]
module.database.aws_iam_policy.app_db_access: Refreshing state... [id=arn:aws:iam::315341936575:policy/analytics-dev-app-access]
module.database.aws_iam_policy.migrator_db_access: Refreshing state... [id=arn:aws:iam::315341936575:policy/analytics-dev-migrator-access]
module.database.data.aws_secretsmanager_secret.db_password: Read complete after 0s [id=arn:aws:secretsmanager:us-east-1:315341936575:secret:rds!cluster-d6b403b4-8dfb-49ce-972a-ffa9c7b1a201-01iyPG]
module.database.data.aws_iam_policy.lambda_vpc_access: Read complete after 2s [id=arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole]
module.database.aws_iam_role.role_manager: Refreshing state... [id=analytics-dev-manager]
module.database.aws_iam_role_policy.role_manager_access_to_db_password: Refreshing state... [id=analytics-dev-manager:analytics-dev-role-manager-ssm-access]
module.database.aws_lambda_function.role_manager: Refreshing state... [id=analytics-dev-role-manager]

No changes. Your infrastructure matches the configuration.

Terraform has compared your real infrastructure against your configuration
and found no differences, so no changes are needed.

Warning: Deprecated attribute

  on ../../modules/database/main.tf line 19, in locals:
  19:   db_user_arn_prefix = "arn:aws:rds-db:${data.aws_region.current.name}:${data.aws_caller_identity.current.account_id}:dbuser:${aws_rds_cluster.db.cluster_resource_id}"

The attribute "name" is deprecated. Refer to the provider documentation for
details.

(and one more similar warning elsewhere)

Warning: Argument is deprecated

  with module.database.aws_iam_role.role_manager,
  on ../../modules/database/role_manager.tf line 78, in resource "aws_iam_role" "role_manager":
  78:   managed_policy_arns = [
  79:     data.aws_iam_policy.lambda_vpc_access.arn,
  80:     # Grant the role manager access to the DB as app and migrator users
  81:     # so that it can performance database checks. This is needed by
  82:     # the infra database tests
  83:     aws_iam_policy.app_db_access.arn,
  84:     aws_iam_policy.migrator_db_access.arn
  85:   ]

managed_policy_arns is deprecated. Use the aws_iam_role_policy_attachment
resource instead. If Terraform should exclusively manage all managed policy
attachments (the current behavior of this argument), use the
aws_iam_role_policy_attachments_exclusive resource as well.

