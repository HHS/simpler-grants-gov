Feature: Apply Workflow Edge Cases

#  Audit and Create Plan for priority E2E tests needed for Simpler Apply workflow #6146
  
  ###########################################################################
    # Edge Case 1: Browser or network issues
  ###########################################################################
  Scenario: Apply shell partially loads due to slow network
    Given I select "Start Application"
    When the Apply shell loads partially or times out
    Then I should see an error message or retry option
    And the system should not allow submission until fully loaded
    
  ###########################################################################
  # Edge Case 2: Invalid input formats
  ###########################################################################
  Scenario: Entering unexpected data types in required fields
    Given I am filling out required fields
    When I enter special characters, HTML, or very long strings
    Then the system should validate and show appropriate errors
    And prevent incorrect submission
    
  ###########################################################################
   # Edge Case 3: Page refresh at critical moments at save
  ###########################################################################
  Scenario: Refreshing page during save
    Given I have completed all required fields
    And I click to save
    When I refresh the page while saving
    Then my entered data should persist

  ###########################################################################
  # Edge Case 4A: Page refresh resumes submission (API-aware)
  ###############################################################################
  Scenario: Submission resumes after page refresh during submit
    Given I have completed all required forms with valid data
    And all client-side validations have passed
    And a new submission request has been prepared with a unique idempotency key
    And the backend submission API is available
    And no submission exists yet for the current idempotency key
    When I click the Submit button
    And the system sends a submission request to the backend API
    And the backend API acknowledges the request and marks it as IN_PROGRESS
    And I refresh the page before the submission completes
    Then the application should query the submission status API
    And the backend should return the submission status as IN_PROGRESS
    And the application should resume polling the submission status
    And the backend should complete the submission successfully
    And the backend should persist the submission with status COMPLETED
    And the submission should be stored exactly once
    And the user should see a confirmation message

  ###############################################################################
  # Edge Case 4B: Page refresh causes graceful failure (API-aware)
  ###############################################################################
  Scenario: Submission fails gracefully after page refresh during submit
    Given I have completed all required forms with valid data
    And all client-side validations have passed
    And a new submission request has been prepared with a unique idempotency key
    And the backend submission API is available
    And no submission exists yet for the current idempotency key
    When I click the Submit button
    And the system sends a submission request to the backend API
    And the backend API acknowledges the request and marks it as IN_PROGRESS
    And I refresh the page before the submission completes
    Then the application should query the submission status API
    And the backend should return the submission status as FAILED
    And the failure reason should be recoverable
    And the backend should not persist partial submission data
    And the backend should not create duplicate submissions
    And the user should see a clear failure message
    And the user should be given instructions to retry safely

